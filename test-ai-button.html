<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIæŒ‰é’®æµ‹è¯•</title>
    <script src="firebase-config.js"></script>
    <script src="firebase-database-sync.js"></script>
    <script src="gemini-ai-assistant.js"></script>
    <link rel="stylesheet" href="ai-assistant-styles.css">
</head>
<body>
    <div style="padding: 50px;">
        <h1>AIæŒ‰é’®æµ‹è¯•é¡µé¢</h1>
        
        <!-- æµ‹è¯•æŒ‰é’®1ï¼šä½¿ç”¨onclickå±æ€§ -->
        <button onclick="testClick1()" style="padding: 20px; font-size: 18px; margin: 10px;">
            æµ‹è¯•1ï¼šonclickå±æ€§
        </button>
        
        <!-- æµ‹è¯•æŒ‰é’®2ï¼šä½¿ç”¨äº‹ä»¶ç›‘å¬å™¨ -->
        <button id="testBtn2" style="padding: 20px; font-size: 18px; margin: 10px;">
            æµ‹è¯•2ï¼šäº‹ä»¶ç›‘å¬å™¨
        </button>
        
        <!-- æµ‹è¯•æŒ‰é’®3ï¼šAIåˆ†ææŒ‰é’® -->
        <button onclick="startAIAnalysis()" style="padding: 20px; font-size: 18px; margin: 10px;">
            æµ‹è¯•3ï¼šAIåˆ†æï¼ˆåŸå‡½æ•°ï¼‰
        </button>
        
        <!-- æµ‹è¯•æŒ‰é’®4ï¼šç›´æ¥è°ƒç”¨ -->
        <button onclick="directAICall()" style="padding: 20px; font-size: 18px; margin: 10px;">
            æµ‹è¯•4ï¼šç›´æ¥è°ƒç”¨AI
        </button>
        
        <div id="output" style="margin-top: 30px; padding: 20px; background: #f5f5f5; border-radius: 8px;">
            <h3>è¾“å‡ºä¿¡æ¯ï¼š</h3>
            <div id="log"></div>
        </div>
    </div>
    
    <script>
        const log = (msg) => {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += `<p>${new Date().toLocaleTimeString()}: ${msg}</p>`;
            console.log(msg);
        };
        
        // æµ‹è¯•å‡½æ•°1
        function testClick1() {
            log('âœ… æµ‹è¯•1æˆåŠŸï¼šonclickå±æ€§æ­£å¸¸å·¥ä½œ');
            alert('æµ‹è¯•1æˆåŠŸï¼');
        }
        
        // æµ‹è¯•å‡½æ•°2
        document.addEventListener('DOMContentLoaded', () => {
            const btn2 = document.getElementById('testBtn2');
            if (btn2) {
                btn2.addEventListener('click', () => {
                    log('âœ… æµ‹è¯•2æˆåŠŸï¼šäº‹ä»¶ç›‘å¬å™¨æ­£å¸¸å·¥ä½œ');
                    alert('æµ‹è¯•2æˆåŠŸï¼');
                });
            }
        });
        
        // æµ‹è¯•å‡½æ•°3ï¼šå®šä¹‰startAIAnalysis
        window.startAIAnalysis = async function() {
            log('ğŸš€ startAIAnalysiså‡½æ•°è¢«è°ƒç”¨');
            
            if (typeof geminiAssistant === 'undefined') {
                log('âŒ geminiAssistantæœªå®šä¹‰');
                alert('geminiAssistantæœªåŠ è½½');
                return;
            }
            
            log('âœ… geminiAssistantå·²åŠ è½½');
            alert('AIåŠ©æ‰‹å·²å‡†å¤‡å¥½ï¼');
        };
        
        // æµ‹è¯•å‡½æ•°4ï¼šç›´æ¥è°ƒç”¨
        async function directAICall() {
            log('ğŸ” ç›´æ¥è°ƒç”¨AIåˆ†æ');
            
            log('æ£€æŸ¥geminiAssistant: ' + typeof geminiAssistant);
            log('æ£€æŸ¥startAIAnalysis: ' + typeof startAIAnalysis);
            
            if (typeof geminiAssistant !== 'undefined') {
                try {
                    log('å¼€å§‹AIåˆ†æ...');
                    const result = await geminiAssistant.analyzeAndSuggest();
                    log('AIåˆ†æç»“æœ: ' + JSON.stringify(result));
                } catch (error) {
                    log('AIåˆ†æé”™è¯¯: ' + error.message);
                }
            } else {
                log('âŒ geminiAssistantæœªåŠ è½½');
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„æ£€æŸ¥
        window.addEventListener('load', () => {
            log('é¡µé¢åŠ è½½å®Œæˆ');
            log('geminiAssistantç±»å‹: ' + typeof geminiAssistant);
            log('startAIAnalysisç±»å‹: ' + typeof startAIAnalysis);
        });
    </script>
</body>
</html>

