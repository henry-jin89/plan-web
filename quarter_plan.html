<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <script src="config.js"></script>
    
    <!-- Firebaseé…ç½® -->
    <script src="firebase-config.js"></script>
    
    <!-- åŒæ­¥ä¿®å¤å·¥å…· -->
    <script src="sync-fix.js"></script>
    
    <!-- WebSocket å®æ—¶åŒæ­¥ -->
    <script src="websocket-sync.js"></script>
    
    <!-- Firebaseæ•°æ®åº“åŒæ­¥ -->
    <script src="firebase-database-sync.js"></script>
    <script src="gemini-ai-assistant.js"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å­£åº¦è®¡åˆ’ - æ™ºèƒ½è®¡åˆ’ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="ai-assistant-styles.css">
    <style>
        .template-btn {
            background: var(--theme-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 8px;
        }
        .template-btn:hover {
            background: #1976d2;
            transform: translateY(-1px);
        }
        .plan-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <div class="page-header">
            <a href="index.html" class="back-to-home">â† è¿”å›ä¸»é¡µ</a>
            <h1 class="page-title">ğŸ¯ å­£åº¦è®¡åˆ’ç®¡ç†</h1>
            <div style="display: flex; gap: 8px;">
                <a href="month_plan.html" class="btn-main" style="font-size: 0.9em;">æœˆè®¡åˆ’</a>
                <a href="year_plan.html" class="btn-main" style="font-size: 0.9em;">å¹´è®¡åˆ’</a>
            </div>
        </div>

        <!-- AIæ™ºèƒ½åˆ†æåŒºåŸŸ - æ”¾åœ¨æœ€é¡¶éƒ¨ -->
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; padding: 24px; margin-bottom: 24px; box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);">
            <div style="display: flex; align-items: center; justify-content: space-between; gap: 20px;">
                <div style="flex: 1;">
                    <h3 style="color: white; margin: 0 0 8px 0; font-size: 1.4em; display: flex; align-items: center; gap: 10px;">
                        ğŸ¤– AI æ™ºèƒ½åˆ†æ
                        <span style="font-size: 0.5em; background: rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 12px;">Gemini 2.5 Pro</span>
                    </h3>
                    <p style="color: rgba(255,255,255,0.95); margin: 0; font-size: 1em; line-height: 1.6;">
                        è®© AI åˆ†ææ‚¨çš„å­£åº¦è®¡åˆ’ï¼Œæä¾›ä¸“ä¸šå»ºè®®å’Œä¼˜åŒ–æ–¹æ¡ˆ
                    </p>
                </div>
                <button type="button" onclick="startAIAnalysis()" style="background: white; color: #667eea; border: none; padding: 16px 40px; border-radius: 12px; font-size: 1.1em; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: all 0.3s ease; white-space: nowrap;">
                    ğŸš€ å¼€å§‹åˆ†æ
                </button>
            </div>
        </div>

        <!-- æ™ºèƒ½æ§åˆ¶æ  -->
        <div class="plan-smartbar">
            <div class="progress-bar" style="flex: 1;">
                <div style="background:#eee;border-radius:8px;height:18px;overflow:hidden;">
                    <div id="quarter-progress-inner" class="progress-inner" style="width: 0%;"></div>
                </div>
                <div style="font-size:0.9em;color:#666;margin-top:3px;">
                    <span id="quarter-progress-text">æœ¬å­£åº¦è¿›åº¦ 0%</span>
                </div>
            </div>
            
            <button type="button" id="quarter-prev">â†</button>
            <select id="quarter_select" style="width:120px;padding:4px;">
                <option value="1">ç¬¬1å­£åº¦</option>
                <option value="2">ç¬¬2å­£åº¦</option>
                <option value="3">ç¬¬3å­£åº¦</option>
                <option value="4">ç¬¬4å­£åº¦</option>
            </select>
            <input type="number" id="quarter_year" min="2020" max="2050" style="width:80px;padding:4px;text-align:center;">
            <button type="button" id="quarter-next">â†’</button>
        </div>

        <!-- æ“ä½œæ  -->
        <div class="save-bar">
            <button type="button" id="quarter-template-btn" class="btn-main" style="background: #ff9800;">ğŸ“‹ ä½¿ç”¨æ¨¡æ¿</button>
            <button type="button" class="save-btn" data-type="quarter">ğŸ’¾ ä¿å­˜è®¡åˆ’</button>
            <button type="button" class="save-view-btn" data-type="quarter">ğŸ“š å†å²è®°å½•</button>
            <button type="button" id="okr-assistant-btn">ğŸ¯ OKRåŠ©æ‰‹</button>
        </div>

        <!-- å­£åº¦OKR -->
        <div class="plan-item-header">
            <label>ğŸ¯ å­£åº¦OKRç›®æ ‡</label>
        </div>
        <textarea id="quarter_objectives" placeholder="è®¾å®šæœ¬å­£åº¦çš„æ ¸å¿ƒç›®æ ‡ (Objectives)...

ä¾‹å¦‚ï¼š
â€¢ æå‡å›¢é˜Ÿåä½œæ•ˆç‡
â€¢ å¢å¼ºä¸ªäººä¸“ä¸šæŠ€èƒ½
â€¢ æ”¹å–„äº§å“ç”¨æˆ·ä½“éªŒ
â€¢ å»ºç«‹å¥åº·ç”Ÿæ´»ä¹ æƒ¯" style="min-height: 120px;"></textarea>

        <!-- å…³é”®ç»“æœ -->
        <div class="plan-item-header">
            <label>ğŸ“Š å…³é”®ç»“æœ (Key Results)</label>
        </div>
        <div id="quarter_key_results" class="todo-list-container" data-placeholder="[ ] å¯è¡¡é‡çš„å…³é”®ç»“æœ..."></div>

        <!-- æœˆåº¦åˆ†è§£ -->
        <div class="plan-item-header">
            <label>ğŸ“… æœˆåº¦é‡Œç¨‹ç¢‘</label>
            <button type="button" class="template-btn" onclick="showMilestoneTemplates()" title="ä½¿ç”¨æ¨¡æ¿">ğŸ“‹ æ¨¡æ¿</button>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-bottom: 24px;">
            <!-- ç¬¬ä¸€ä¸ªæœˆ -->
            <div style="background: rgba(255,255,255,0.9); border-radius: 12px; padding: 16px; border-left: 4px solid #2196f3;">
                <h4 style="margin: 0 0 12px 0; color: #2196f3;" id="month1-title">ç¬¬1ä¸ªæœˆ</h4>
                <div id="month1_milestones" class="todo-list-container" data-placeholder="[ ] ç¬¬1ä¸ªæœˆçš„é‡Œç¨‹ç¢‘..." style="min-height: 100px;"></div>
            </div>

            <!-- ç¬¬äºŒä¸ªæœˆ -->
            <div style="background: rgba(255,255,255,0.9); border-radius: 12px; padding: 16px; border-left: 4px solid #4caf50;">
                <h4 style="margin: 0 0 12px 0; color: #4caf50;" id="month2-title">ç¬¬2ä¸ªæœˆ</h4>
                <div id="month2_milestones" class="todo-list-container" data-placeholder="[ ] ç¬¬2ä¸ªæœˆçš„é‡Œç¨‹ç¢‘..." style="min-height: 100px;"></div>
            </div>

            <!-- ç¬¬ä¸‰ä¸ªæœˆ -->
            <div style="background: rgba(255,255,255,0.9); border-radius: 12px; padding: 16px; border-left: 4px solid #ff9800;">
                <h4 style="margin: 0 0 12px 0; color: #ff9800;" id="month3-title">ç¬¬3ä¸ªæœˆ</h4>
                <div id="month3_milestones" class="todo-list-container" data-placeholder="[ ] ç¬¬3ä¸ªæœˆçš„é‡Œç¨‹ç¢‘..." style="min-height: 100px;"></div>
            </div>
        </div>

        <!-- å­£åº¦å›é¡¾ -->
        <div class="plan-item-header">
            <label>ğŸ“ å­£åº¦å›é¡¾</label>
            <button type="button" class="template-btn" onclick="showReviewTemplates()" title="ä½¿ç”¨æ¨¡æ¿">ğŸ“‹ æ¨¡æ¿</button>
        </div>
        <textarea id="quarter_review" placeholder="å­£åº¦å›é¡¾ä¸æ€»ç»“...

å›é¡¾å†…å®¹ï¼š
â€¢ OKRå®Œæˆæƒ…å†µè¯„ä¼°
â€¢ é‡è¦æˆæœå’Œçªç ´
â€¢ é‡åˆ°çš„æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆ
â€¢ å›¢é˜Ÿåä½œå’Œä¸ªäººæˆé•¿
â€¢ ä¸‹å­£åº¦æ”¹è¿›è®¡åˆ’" style="min-height: 120px;"></textarea>
    </div>

    <script src="common.js"></script>
    <script>
        // å­£åº¦è®¡åˆ’ç®€åŒ–å®ç°
        let currentQuarter = getCurrentQuarter();
        let currentYear = new Date().getFullYear();

        function getCurrentQuarter() {
            return Math.ceil((new Date().getMonth() + 1) / 3);
        }

        document.addEventListener('DOMContentLoaded', function() {
            initQuarterPlan();
        });

        function initQuarterPlan() {
            document.getElementById('quarter_select').value = currentQuarter;
            document.getElementById('quarter_year').value = currentYear;
            updateMonthTitles();
            
            // å¯ç”¨å¾…åŠäº‹é¡¹åŠŸèƒ½
            const containers = document.querySelectorAll('.todo-list-container');
            containers.forEach(container => {
                TodoUtils.enableTodoFunctionality(container);
            });
            
            // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
            document.getElementById('quarter-prev').addEventListener('click', () => navigateQuarter(-1));
            document.getElementById('quarter-next').addEventListener('click', () => navigateQuarter(1));
            document.getElementById('quarter_select').addEventListener('change', handleQuarterChange);
            document.getElementById('quarter_year').addEventListener('change', handleYearChange);
            document.querySelector('.save-btn').addEventListener('click', saveQuarterPlan);
            document.querySelector('.save-view-btn').addEventListener('click', showQuarterHistory);
            document.getElementById('okr-assistant-btn').addEventListener('click', showOKRAssistant);
            document.querySelector('.ai-assistant-btn').addEventListener('click', showQuarterAIAssistant);
            document.getElementById('quarter-template-btn').addEventListener('click', showQuarterTemplateSelector);
            
            loadQuarterPlan();
            updateProgress();
        }

        function navigateQuarter(quarters) {
            currentQuarter += quarters;
            if (currentQuarter < 1) {
                currentQuarter = 4;
                currentYear--;
            } else if (currentQuarter > 4) {
                currentQuarter = 1;
                currentYear++;
            }
            
            document.getElementById('quarter_select').value = currentQuarter;
            document.getElementById('quarter_year').value = currentYear;
            updateMonthTitles();
            loadQuarterPlan();
            updateProgress();
        }

        function handleQuarterChange() {
            currentQuarter = parseInt(document.getElementById('quarter_select').value);
            updateMonthTitles();
            loadQuarterPlan();
            updateProgress();
        }

        function handleYearChange() {
            currentYear = parseInt(document.getElementById('quarter_year').value);
            loadQuarterPlan();
            updateProgress();
        }

        function updateMonthTitles() {
            const quarterMonths = {
                1: ['1æœˆ', '2æœˆ', '3æœˆ'],
                2: ['4æœˆ', '5æœˆ', '6æœˆ'],
                3: ['7æœˆ', '8æœˆ', '9æœˆ'],
                4: ['10æœˆ', '11æœˆ', '12æœˆ']
            };
            
            const months = quarterMonths[currentQuarter];
            document.getElementById('month1-title').textContent = months[0];
            document.getElementById('month2-title').textContent = months[1];
            document.getElementById('month3-title').textContent = months[2];
        }

        function saveQuarterPlan() {
            const quarterKey = `${currentYear}-Q${currentQuarter}`;
            const data = {
                objectives: document.getElementById('quarter_objectives').value,
                keyResults: getTodoContent('quarter_key_results'),
                month1Milestones: getTodoContent('month1_milestones'),
                month2Milestones: getTodoContent('month2_milestones'),
                month3Milestones: getTodoContent('month3_milestones'),
                review: document.getElementById('quarter_review').value
            };

            const success = StorageUtils.savePlan('quarter', quarterKey, data);
            if (success) {
                MessageUtils.success('å­£åº¦è®¡åˆ’ä¿å­˜æˆåŠŸï¼');
            }
        }

        function loadQuarterPlan() {
            const quarterKey = `${currentYear}-Q${currentQuarter}`;
            const data = StorageUtils.loadPlan('quarter', quarterKey);
            
            if (data) {
                document.getElementById('quarter_objectives').value = data.objectives || '';
                document.getElementById('quarter_review').value = data.review || '';
                
                loadTodoContent('quarter_key_results', data.keyResults);
                loadTodoContent('month1_milestones', data.month1Milestones);
                loadTodoContent('month2_milestones', data.month2Milestones);
                loadTodoContent('month3_milestones', data.month3Milestones);
            } else {
                clearFields();
            }
        }

        function clearFields() {
            document.getElementById('quarter_objectives').value = '';
            document.getElementById('quarter_review').value = '';
            
            const containers = ['quarter_key_results', 'month1_milestones', 'month2_milestones', 'month3_milestones'];
            containers.forEach(id => {
                document.getElementById(id).innerHTML = '';
            });
        }

        function loadTodoContent(containerId, content) {
            const container = document.getElementById(containerId);
            if (container && content) {
                container.textContent = content;
                TodoUtils.renderTodos(container);
            }
        }

        function getTodoContent(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return '';
            
            const tasks = container.querySelectorAll('.task-item');
            const lines = [];
            
            tasks.forEach(task => {
                const checkbox = task.querySelector('.custom-checkbox');
                const text = task.querySelector('.task-text').textContent;
                const isChecked = checkbox.classList.contains('checked');
                lines.push(`[${isChecked ? 'x' : ' '}] ${text}`);
            });
            
            return lines.join('\n');
        }

        function updateProgress() {
            // ç®€åŒ–çš„å­£åº¦è¿›åº¦è®¡ç®—
            const quarterMonth = (currentQuarter - 1) * 3;
            const now = new Date();
            const currentMonth = now.getMonth();
            
            let progress = 0;
            if (currentMonth >= quarterMonth && currentMonth < quarterMonth + 3) {
                const dayOfQuarter = (currentMonth - quarterMonth) * 30 + now.getDate();
                progress = Math.min(Math.round((dayOfQuarter / 90) * 100), 100);
            } else if (currentMonth >= quarterMonth + 3) {
                progress = 100;
            }
            
            document.getElementById('quarter-progress-inner').style.width = `${progress}%`;
            document.getElementById('quarter-progress-text').textContent = `æœ¬å­£åº¦è¿›åº¦ ${progress}%`;
        }

        function showQuarterHistory() {
            const history = StorageUtils.getHistory('quarter');
            
            if (history.length === 0) {
                MessageUtils.info('æš‚æ— å­£åº¦è®¡åˆ’å†å²è®°å½•');
                return;
            }

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ“š å­£åº¦è®¡åˆ’å†å²è®°å½•</h4>
                    <p style="color: #666;">æŸ¥çœ‹æ‚¨ä¹‹å‰çš„å­£åº¦è®¡åˆ’å’Œå›é¡¾æ€»ç»“ï¼š</p>
                </div>

                <div style="max-height: 500px; overflow-y: auto;">
                    ${history.map((entry, index) => `
                        <div class="history-item" style="background: white; border: 2px solid #e0e0e0; border-radius: 12px; padding: 20px; margin-bottom: 16px; transition: all 0.3s ease; cursor: pointer;" onclick="loadHistoryEntry(${index})">
                            <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 12px;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0; color: var(--theme-color); font-size: 1.1em;">${entry.date}</h5>
                                    <div style="color: #666; font-size: 0.9em; margin-top: 4px;">
                                        ${new Date(entry.timestamp).toLocaleString('zh-CN')}
                                    </div>
                                </div>
                                <button class="btn-danger" onclick="deleteHistoryEntry(event, ${index})" style="padding: 4px 8px; font-size: 0.8em;">åˆ é™¤</button>
                            </div>
                            
                            <div style="background: rgba(25, 118, 210, 0.05); padding: 12px; border-radius: 8px; margin-bottom: 12px;">
                                <div style="color: #666; font-size: 0.9em; line-height: 1.5;">${entry.summary}</div>
                            </div>
                            
                            <div style="display: flex; gap: 8px; margin-top: 12px;">
                                <span style="background: rgba(33, 150, 243, 0.1); color: #2196f3; padding: 4px 8px; border-radius: 4px; font-size: 0.8em;">
                                    ğŸ“Š ${(entry.data.keyResults && entry.data.keyResults.match(/\\[.\\]/g) || []).length} ä¸ªKR
                                </span>
                                <span style="background: rgba(76, 175, 80, 0.1); color: #4caf50; padding: 4px 8px; border-radius: 4px; font-size: 0.8em;">
                                    ğŸ—“ï¸ ${((entry.data.month1Milestones && entry.data.month1Milestones.match(/\\[.\\]/g) || []).length + 
                                          (entry.data.month2Milestones && entry.data.month2Milestones.match(/\\[.\\]/g) || []).length + 
                                          (entry.data.month3Milestones && entry.data.month3Milestones.match(/\\[.\\]/g) || []).length)} ä¸ªé‡Œç¨‹ç¢‘
                                </span>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-main" onclick="exportHistory()">ğŸ“„ å¯¼å‡ºå†å²</button>
                    <button class="btn-main" onclick="closeModal()" style="margin-left: 12px;">å…³é—­</button>
                </div>

                <style>
                    .history-item:hover {
                        border-color: var(--theme-color);
                        transform: translateY(-2px);
                        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                    }
                    .btn-danger {
                        background: #f44336;
                        color: white;
                        border: none;
                        border-radius: 4px;
                        cursor: pointer;
                        transition: background 0.3s ease;
                    }
                    .btn-danger:hover {
                        background: #d32f2f;
                    }
                </style>
            `;

            ModalUtils.show('å­£åº¦è®¡åˆ’å†å²è®°å½•', content, 'large');
        }

        // åŠ è½½å†å²è®°å½•
        function loadHistoryEntry(index) {
            const history = StorageUtils.getHistory('quarter');
            const entry = history[index];
            
            if (!entry) return;

            // ç¡®è®¤æ˜¯å¦è¦åŠ è½½å†å²è®°å½•
            const confirmed = confirm(`ç¡®å®šè¦åŠ è½½ ${entry.date} çš„å­£åº¦è®¡åˆ’å—ï¼Ÿå½“å‰æœªä¿å­˜çš„ä¿®æ”¹å°†ä¼šä¸¢å¤±ã€‚`);
            if (!confirmed) return;

            const data = entry.data;
            
            // åŠ è½½ç›®æ ‡
            document.getElementById('quarter_objectives').value = data.objectives || '';
            document.getElementById('quarter_review').value = data.review || '';
            
            // åŠ è½½å…³é”®ç»“æœ
            loadTodoContent('quarter_key_results', data.keyResults);
            loadTodoContent('month1_milestones', data.month1Milestones);
            loadTodoContent('month2_milestones', data.month2Milestones);
            loadTodoContent('month3_milestones', data.month3Milestones);

            // å…³é—­æ¨¡æ€æ¡†
            closeModal();
            
            MessageUtils.success(`å·²åŠ è½½ ${entry.date} çš„å­£åº¦è®¡åˆ’`);
        }

        // åˆ é™¤å†å²è®°å½•
        function deleteHistoryEntry(event, index) {
            event.stopPropagation();
            
            const history = StorageUtils.getHistory('quarter');
            const entry = history[index];
            
            const confirmed = confirm(`ç¡®å®šè¦åˆ é™¤ ${entry.date} çš„å†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚`);
            if (!confirmed) return;

            const success = StorageUtils.deleteHistory('quarter', index);
            if (success) {
                MessageUtils.success('å†å²è®°å½•å·²åˆ é™¤');
                // é‡æ–°æ˜¾ç¤ºå†å²è®°å½•
                setTimeout(() => {
                    closeModal();
                    showQuarterHistory();
                }, 500);
            } else {
                MessageUtils.error('åˆ é™¤å†å²è®°å½•å¤±è´¥');
            }
        }

        // å¯¼å‡ºå†å²è®°å½•
        function exportHistory() {
            const history = StorageUtils.getHistory('quarter');
            
            if (history.length === 0) {
                MessageUtils.info('æš‚æ— å†å²è®°å½•å¯å¯¼å‡º');
                return;
            }

            const exportData = {
                type: 'quarter_plan_history',
                exportTime: new Date().toISOString(),
                totalRecords: history.length,
                records: history
            };

            const filename = `å­£åº¦è®¡åˆ’å†å²è®°å½•_${DateUtils.formatDate(new Date())}.json`;
            ExportUtils.exportToJSON(exportData, filename);
            
            MessageUtils.success('å†å²è®°å½•å¯¼å‡ºæˆåŠŸï¼');
        }

        function showOKRAssistant() {
            const content = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <h3 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ¯ OKRåˆ¶å®šåŠ©æ‰‹</h3>
                    <p style="color: #666;">è®©AIå¸®åŠ©æ‚¨åˆ¶å®šSMARTç›®æ ‡</p>
                </div>
                
                <div style="background: rgba(25,118,210,0.05); padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                    <h4 style="margin: 0 0 8px 0; color: var(--theme-color);">ğŸ’¡ OKRåˆ¶å®šåŸåˆ™</h4>
                    <ul style="margin: 0; padding-left: 20px; color: #666;">
                        <li>ç›®æ ‡è¦æœ‰æŒ‘æˆ˜æ€§ä½†å¯å®ç°</li>
                        <li>å…³é”®ç»“æœè¦å¯é‡åŒ–å’Œå¯è¡¡é‡</li>
                        <li>è®¾å®š3-5ä¸ªå…³é”®ç»“æœ</li>
                        <li>å®šæœŸå›é¡¾å’Œè°ƒæ•´</li>
                    </ul>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                    <button class="ai-feature-btn" onclick="generateOKRSuggestions()">
                        <div class="feature-icon">ğŸ¯</div>
                        <div class="feature-title">ç›®æ ‡å»ºè®®</div>
                    </button>
                    
                    <button class="ai-feature-btn" onclick="generateKRSuggestions()">
                        <div class="feature-icon">ğŸ“Š</div>
                        <div class="feature-title">å…³é”®ç»“æœ</div>
                    </button>
                </div>
                
                <style>
                    .ai-feature-btn {
                        background: white;
                        border: 2px solid #e0e0e0;
                        border-radius: 12px;
                        padding: 20px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        text-align: center;
                    }
                    .ai-feature-btn:hover {
                        border-color: var(--theme-color);
                        transform: translateY(-2px);
                    }
                    .feature-icon { font-size: 2em; margin-bottom: 8px; }
                    .feature-title { font-weight: 600; color: var(--theme-color); }
                </style>
            `;
            
            ModalUtils.show('OKRåˆ¶å®šåŠ©æ‰‹', content);
        }

        function generateOKRSuggestions() {
            generateQuarterObjectives();
        }

        function generateKRSuggestions() {
            generateKeyResults();
        }

        // å­£åº¦AIåŠ©æ‰‹ä¸»ç•Œé¢
        function showQuarterAIAssistant() {
            const content = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <h3 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ¤– å­£åº¦è®¡åˆ’AIåŠ©æ‰‹</h3>
                    <p style="color: #666;">è®©AIåŠ©æ‚¨åˆ¶å®šé«˜è´¨é‡çš„å­£åº¦è®¡åˆ’å’ŒOKRç›®æ ‡</p>
                </div>
                
                <div style="background: rgba(25,118,210,0.05); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 8px 0; color: var(--theme-color);">ğŸ’¡ AIåŠ©æ‰‹èƒ½åŠ›</h4>
                    <ul style="margin: 0; padding-left: 20px; color: #666; line-height: 1.6;">
                        <li>æ™ºèƒ½ç”Ÿæˆå­£åº¦OKRç›®æ ‡å»ºè®®</li>
                        <li>åˆ¶å®šå¯é‡åŒ–çš„å…³é”®ç»“æœæŒ‡æ ‡</li>
                        <li>åˆ†æç°æœ‰è®¡åˆ’å¹¶æä¾›ä¼˜åŒ–å»ºè®®</li>
                        <li>ç”Ÿæˆæœˆåº¦é‡Œç¨‹ç¢‘åˆ†è§£è®¡åˆ’</li>
                        <li>æä¾›è¡Œä¸šæœ€ä½³å®è·µæŒ‡å¯¼</li>
                    </ul>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    <button class="ai-feature-btn" onclick="generateQuarterObjectives()">
                        <div class="feature-icon">ğŸ¯</div>
                        <div class="feature-title">æ™ºèƒ½ç›®æ ‡å»ºè®®</div>
                        <div class="feature-desc">åŸºäºè¡Œä¸šè¶‹åŠ¿ç”ŸæˆOKRç›®æ ‡</div>
                    </button>
                    
                    <button class="ai-feature-btn" onclick="generateKeyResults()">
                        <div class="feature-icon">ğŸ“Š</div>
                        <div class="feature-title">å…³é”®ç»“æœæŒ‡æ ‡</div>
                        <div class="feature-desc">åˆ¶å®šSMARTåŸåˆ™çš„KRæŒ‡æ ‡</div>
                    </button>
                    
                    <button class="ai-feature-btn" onclick="generateMilestones()">
                        <div class="feature-icon">ğŸ—“ï¸</div>
                        <div class="feature-title">é‡Œç¨‹ç¢‘è§„åˆ’</div>
                        <div class="feature-desc">æ™ºèƒ½åˆ†è§£æœˆåº¦æ‰§è¡Œè®¡åˆ’</div>
                    </button>
                    
                    <button class="ai-feature-btn" onclick="analyzeCurrentPlan()">
                        <div class="feature-icon">ğŸ”</div>
                        <div class="feature-title">è®¡åˆ’åˆ†æ</div>
                        <div class="feature-desc">è¯„ä¼°ç°æœ‰è®¡åˆ’å¯è¡Œæ€§</div>
                    </button>
                    
                    <button class="ai-feature-btn" onclick="generateQuarterTemplate()">
                        <div class="feature-icon">ğŸ“‹</div>
                        <div class="feature-title">æ¨¡æ¿ç”Ÿæˆ</div>
                        <div class="feature-desc">åˆ›å»ºæ ‡å‡†åŒ–è®¡åˆ’æ¨¡æ¿</div>
                    </button>
                    
                    <button class="ai-feature-btn" onclick="getBestPractices()">
                        <div class="feature-icon">ğŸ’</div>
                        <div class="feature-title">æœ€ä½³å®è·µ</div>
                        <div class="feature-desc">å­¦ä¹ è¡Œä¸šæˆåŠŸç»éªŒ</div>
                    </button>
                </div>
                
                <div style="background: rgba(255, 193, 7, 0.1); padding: 12px; border-radius: 8px; border-left: 4px solid #ffc107;">
                    <p style="margin: 0; color: #856404; font-size: 0.9em;">
                        ğŸ’¡ <strong>æç¤ºï¼š</strong>ç‚¹å‡»ä¸Šæ–¹åŠŸèƒ½æŒ‰é’®ï¼ŒAIå°†æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚æä¾›ä¸ªæ€§åŒ–å»ºè®®
                    </p>
                </div>
                
                <style>
                    .ai-feature-btn {
                        background: white;
                        border: 2px solid #e0e0e0;
                        border-radius: 12px;
                        padding: 20px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        text-align: center;
                        position: relative;
                        overflow: hidden;
                    }
                    .ai-feature-btn:hover {
                        border-color: var(--theme-color);
                        transform: translateY(-2px);
                        box-shadow: 0 4px 12px rgba(25, 118, 210, 0.15);
                    }
                    .ai-feature-btn:active {
                        transform: translateY(0);
                    }
                    .feature-icon { 
                        font-size: 2.2em; 
                        margin-bottom: 12px;
                        display: block;
                    }
                    .feature-title { 
                        font-weight: 600; 
                        color: var(--theme-color);
                        margin-bottom: 8px;
                        font-size: 1.1em;
                    }
                    .feature-desc {
                        color: #666;
                        font-size: 0.9em;
                        line-height: 1.4;
                    }
                </style>
            `;
            
            ModalUtils.show('å­£åº¦è®¡åˆ’AIåŠ©æ‰‹', content, 'large');
        }

        // æ™ºèƒ½ç”Ÿæˆå­£åº¦ç›®æ ‡
        function generateQuarterObjectives() {
            const suggestions = [
                "æå‡å›¢é˜Ÿåä½œæ•ˆç‡30%ï¼Œå»ºç«‹æ›´é«˜æ•ˆçš„æ²Ÿé€šæœºåˆ¶å’Œå·¥ä½œæµç¨‹",
                "å®Œæˆæ ¸å¿ƒäº§å“åŠŸèƒ½å¼€å‘ï¼Œå®ç°ç”¨æˆ·ä½“éªŒçš„æ˜¾è‘—æå‡",
                "å»ºç«‹ä¸ªäººæŠ€èƒ½æå‡ä½“ç³»ï¼ŒæŒæ¡3é¡¹æ ¸å¿ƒä¸“ä¸šæŠ€èƒ½",
                "ä¼˜åŒ–å·¥ä½œç”Ÿæ´»å¹³è¡¡ï¼Œå»ºç«‹å¯æŒç»­çš„å¥åº·ç”Ÿæ´»æ–¹å¼",
                "æ‰©å¤§ä¸šåŠ¡å½±å“åŠ›ï¼Œåœ¨è¡Œä¸šå†…å»ºç«‹ä¸“ä¸šå£°èª‰å’Œç½‘ç»œ",
                "åˆ›æ–°é¡¹ç›®ç®¡ç†æ–¹æ³•ï¼Œæé«˜é¡¹ç›®äº¤ä»˜è´¨é‡å’Œæ•ˆç‡",
                "åŸ¹å…»é¢†å¯¼åŠ›å’Œå›¢é˜Ÿç®¡ç†èƒ½åŠ›ï¼Œæˆä¸ºæ›´å¥½çš„å›¢é˜Ÿé¢†å¯¼è€…"
            ];

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ¯ AIæ¨èçš„å­£åº¦ç›®æ ‡</h4>
                    <p style="color: #666; margin-bottom: 16px;">ä»¥ä¸‹æ˜¯åŸºäºæœ€ä½³å®è·µç”Ÿæˆçš„ç›®æ ‡å»ºè®®ï¼Œæ‚¨å¯ä»¥é€‰æ‹©åˆé€‚çš„ç›®æ ‡æˆ–ä½œä¸ºçµæ„Ÿæ¥æºï¼š</p>
                </div>

                <div style="max-height: 400px; overflow-y: auto;">
                    ${suggestions.map((suggestion, index) => `
                        <div class="suggestion-item" style="background: rgba(25,118,210,0.05); margin-bottom: 12px; padding: 16px; border-radius: 8px; border-left: 4px solid var(--theme-color); cursor: pointer;" onclick="selectObjective('${suggestion.replace(/'/g, "\\'")}')">
                            <div style="font-weight: 500; color: var(--theme-color); margin-bottom: 4px;">ç›®æ ‡ ${index + 1}</div>
                            <div style="color: #333; line-height: 1.5;">${suggestion}</div>
                        </div>
                    `).join('')}
                </div>

                <div style="margin-top: 20px; padding: 16px; background: rgba(76, 175, 80, 0.1); border-radius: 8px;">
                    <h5 style="color: #2e7d32; margin: 0 0 8px 0;">ğŸ’¡ åˆ¶å®šç›®æ ‡çš„å»ºè®®</h5>
                    <ul style="margin: 0; padding-left: 20px; color: #2e7d32; line-height: 1.6;">
                        <li>ç›®æ ‡åº”è¯¥å…·æœ‰æŒ‘æˆ˜æ€§ä½†å¯å®ç°</li>
                        <li>ç¡®ä¿ç›®æ ‡ä¸å…¬å¸/ä¸ªäººé•¿æœŸæ„¿æ™¯ä¸€è‡´</li>
                        <li>æ¯ä¸ªå­£åº¦å»ºè®®è®¾å®š3-5ä¸ªæ ¸å¿ƒç›®æ ‡</li>
                        <li>ç›®æ ‡æè¿°è¦å…·ä½“æ˜ç¡®ï¼Œé¿å…æ¨¡ç³Šè¡¨è¿°</li>
                    </ul>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-main" onclick="customObjective()" style="margin-right: 12px;">âœï¸ è‡ªå®šä¹‰ç›®æ ‡</button>
                    <button class="btn-main" onclick="closeModal()">å®Œæˆé€‰æ‹©</button>
                </div>
            `;

            ModalUtils.show('æ™ºèƒ½ç›®æ ‡å»ºè®®', content, 'large');
        }

        // é€‰æ‹©ç›®æ ‡
        function selectObjective(objective) {
            const objectivesField = document.getElementById('quarter_objectives');
            const currentText = objectivesField.value;
            
            if (currentText.trim()) {
                objectivesField.value = currentText + '\n\nâ€¢ ' + objective;
            } else {
                objectivesField.value = 'â€¢ ' + objective;
            }
            
            MessageUtils.success('ç›®æ ‡å·²æ·»åŠ åˆ°è®¡åˆ’ä¸­ï¼');
            
            // è§¦å‘è‡ªåŠ¨ä¿å­˜
            if (typeof window.saveDraft === 'function') {
                window.saveDraft();
            }
        }

        // ç”Ÿæˆå…³é”®ç»“æœ
        function generateKeyResults() {
            const krSuggestions = [
                "å°†é¡¹ç›®å®Œæˆç‡æå‡è‡³95%ä»¥ä¸Š",
                "å›¢é˜Ÿæ»¡æ„åº¦è°ƒç ”è¾¾åˆ°4.5åˆ†ï¼ˆ5åˆ†åˆ¶ï¼‰",
                "æ–°åŠŸèƒ½ç”¨æˆ·é‡‡ç”¨ç‡è¾¾åˆ°60%",
                "å‡å°‘bugæ•°é‡50%ï¼Œæå‡äº§å“è´¨é‡",
                "å®Œæˆ3æ¬¡å›¢é˜ŸåŸ¹è®­ï¼Œæå‡æŠ€èƒ½æ°´å¹³",
                "å»ºç«‹5ä¸ªè¡Œä¸šåˆä½œä¼™ä¼´å…³ç³»",
                "ä¸ªäººæŠ€èƒ½è€ƒæ ¸é€šè¿‡ç‡è¾¾åˆ°90%",
                "å®¢æˆ·æ»¡æ„åº¦NPSåˆ†æ•°æå‡20åˆ†",
                "è¿è¥æ•ˆç‡æå‡25%ï¼Œé™ä½æˆæœ¬",
                "å®Œæˆ2ä¸ªåˆ›æ–°é¡¹ç›®çš„åŸå‹å¼€å‘"
            ];

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ“Š å¯é‡åŒ–çš„å…³é”®ç»“æœå»ºè®®</h4>
                    <p style="color: #666; margin-bottom: 16px;">å…³é”®ç»“æœåº”è¯¥æ˜¯å…·ä½“çš„ã€å¯è¡¡é‡çš„ã€æœ‰æ—¶é™çš„æˆæœæŒ‡æ ‡ï¼š</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 12px; margin-bottom: 20px;">
                    ${krSuggestions.map((kr, index) => `
                        <div class="kr-suggestion" style="background: white; border: 2px solid #e0e0e0; padding: 16px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;" onclick="selectKeyResult('${kr.replace(/'/g, "\\'")}')">
                            <div style="font-weight: 500; color: var(--theme-color); margin-bottom: 4px;">KR ${index + 1}</div>
                            <div style="color: #333;">${kr}</div>
                        </div>
                    `).join('')}
                </div>

                <div style="background: rgba(255, 152, 0, 0.1); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                    <h5 style="color: #e65100; margin: 0 0 8px 0;">ğŸ¯ SMARTåŸåˆ™æé†’</h5>
                    <div style="color: #e65100; line-height: 1.6;">
                        <strong>S</strong>pecific (å…·ä½“çš„) | <strong>M</strong>easurable (å¯è¡¡é‡) | <strong>A</strong>chievable (å¯è¾¾æˆ) | <strong>R</strong>elevant (ç›¸å…³çš„) | <strong>T</strong>ime-bound (æœ‰æ—¶é™)
                    </div>
                </div>

                <div style="text-align: center;">
                    <button class="btn-main" onclick="customKeyResult()" style="margin-right: 12px;">âœï¸ è‡ªå®šä¹‰KR</button>
                    <button class="btn-main" onclick="closeModal()">å®Œæˆé€‰æ‹©</button>
                </div>

                <style>
                    .kr-suggestion:hover {
                        border-color: var(--theme-color);
                        transform: translateY(-2px);
                        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                    }
                </style>
            `;

            ModalUtils.show('å…³é”®ç»“æœå»ºè®®', content, 'large');
        }

        // é€‰æ‹©å…³é”®ç»“æœ
        function selectKeyResult(kr) {
            const krContainer = document.getElementById('quarter_key_results');
            const currentContent = krContainer.textContent || '';
            
            let newContent;
            if (currentContent.trim()) {
                newContent = currentContent + '\n[ ] ' + kr;
            } else {
                newContent = '[ ] ' + kr;
            }
            
            krContainer.textContent = newContent;
            TodoUtils.renderTodos(krContainer);
            
            MessageUtils.success('å…³é”®ç»“æœå·²æ·»åŠ ï¼');
            
            // è§¦å‘è‡ªåŠ¨ä¿å­˜
            if (typeof window.saveDraft === 'function') {
                window.saveDraft();
            }
        }

        // ç”Ÿæˆé‡Œç¨‹ç¢‘è®¡åˆ’
        function generateMilestones() {
            const milestoneTemplates = {
                month1: [
                    "åˆ¶å®šè¯¦ç»†æ‰§è¡Œè®¡åˆ’å’Œèµ„æºåˆ†é…",
                    "ç»„å»ºæ ¸å¿ƒå›¢é˜Ÿå¹¶æ˜ç¡®èŒè´£åˆ†å·¥",
                    "å®ŒæˆåŸºç¡€è®¾æ–½å’Œå·¥å…·é…ç½®",
                    "å¯åŠ¨å…³é”®é¡¹ç›®çš„ç¬¬ä¸€é˜¶æ®µ",
                    "å»ºç«‹è¿›åº¦è·Ÿè¸ªå’Œåé¦ˆæœºåˆ¶"
                ],
                month2: [
                    "å®Œæˆç¬¬ä¸€é˜¶æ®µæˆæœéªŒæ”¶",
                    "è¯„ä¼°è¿›å±•å¹¶è°ƒæ•´æ‰§è¡Œç­–ç•¥",
                    "æ¨è¿›æ ¸å¿ƒåŠŸèƒ½å¼€å‘",
                    "åŠ å¼ºå›¢é˜Ÿåä½œå’Œæ²Ÿé€š",
                    "è¿›è¡Œä¸­æœŸæˆæœå±•ç¤º"
                ],
                month3: [
                    "å®Œæˆæ‰€æœ‰å…³é”®äº¤ä»˜æˆæœ",
                    "è¿›è¡Œå…¨é¢è´¨é‡æ£€æŸ¥å’Œä¼˜åŒ–",
                    "æ€»ç»“ç»éªŒå¹¶å½¢æˆæœ€ä½³å®è·µ",
                    "å‡†å¤‡å­£åº¦æ€»ç»“å’Œä¸‹å­£åº¦è§„åˆ’",
                    "åº†ç¥å›¢é˜Ÿæˆå°±å¹¶è¯†åˆ«æ”¹è¿›æœºä¼š"
                ]
            };

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ—“ï¸ æ™ºèƒ½é‡Œç¨‹ç¢‘è§„åˆ’</h4>
                    <p style="color: #666;">AIä¸ºæ‚¨ç”Ÿæˆçš„ä¸‰ä¸ªæœˆæ¸è¿›å¼é‡Œç¨‹ç¢‘è®¡åˆ’ï¼š</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    <div style="background: rgba(33, 150, 243, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #2196f3;">
                        <h5 style="color: #2196f3; margin: 0 0 16px 0;">ç¬¬ä¸€ä¸ªæœˆ - å¯åŠ¨é˜¶æ®µ</h5>
                        ${milestoneTemplates.month1.map(item => `
                            <div style="margin-bottom: 8px; cursor: pointer; padding: 8px; border-radius: 4px; transition: background 0.2s;" 
                                 onclick="addMilestone('month1', '${item.replace(/'/g, "\\'")}')">
                                <span style="color: #2196f3;">â–¸</span> ${item}
                            </div>
                        `).join('')}
                    </div>

                    <div style="background: rgba(76, 175, 80, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #4caf50;">
                        <h5 style="color: #4caf50; margin: 0 0 16px 0;">ç¬¬äºŒä¸ªæœˆ - æ‰§è¡Œé˜¶æ®µ</h5>
                        ${milestoneTemplates.month2.map(item => `
                            <div style="margin-bottom: 8px; cursor: pointer; padding: 8px; border-radius: 4px; transition: background 0.2s;" 
                                 onclick="addMilestone('month2', '${item.replace(/'/g, "\\'")}')">
                                <span style="color: #4caf50;">â–¸</span> ${item}
                            </div>
                        `).join('')}
                    </div>

                    <div style="background: rgba(255, 152, 0, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #ff9800;">
                        <h5 style="color: #ff9800; margin: 0 0 16px 0;">ç¬¬ä¸‰ä¸ªæœˆ - æ”¶å°¾é˜¶æ®µ</h5>
                        ${milestoneTemplates.month3.map(item => `
                            <div style="margin-bottom: 8px; cursor: pointer; padding: 8px; border-radius: 4px; transition: background 0.2s;" 
                                 onclick="addMilestone('month3', '${item.replace(/'/g, "\\'")}')">
                                <span style="color: #ff9800;">â–¸</span> ${item}
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-main" onclick="addAllMilestones()">ğŸ“… æ·»åŠ å…¨éƒ¨é‡Œç¨‹ç¢‘</button>
                    <button class="btn-main" onclick="closeModal()" style="margin-left: 12px;">å®Œæˆ</button>
                </div>
            `;

            ModalUtils.show('é‡Œç¨‹ç¢‘è§„åˆ’å»ºè®®', content, 'large');
        }

        // æ·»åŠ é‡Œç¨‹ç¢‘
        function addMilestone(month, milestone) {
            const containerId = `${month}_milestones`;
            const container = document.getElementById(containerId);
            const currentContent = container.textContent || '';
            
            let newContent;
            if (currentContent.trim()) {
                newContent = currentContent + '\n[ ] ' + milestone;
            } else {
                newContent = '[ ] ' + milestone;
            }
            
            container.textContent = newContent;
            TodoUtils.renderTodos(container);
            
            MessageUtils.success(`é‡Œç¨‹ç¢‘å·²æ·»åŠ åˆ°${month === 'month1' ? 'ç¬¬ä¸€ä¸ªæœˆ' : month === 'month2' ? 'ç¬¬äºŒä¸ªæœˆ' : 'ç¬¬ä¸‰ä¸ªæœˆ'}ï¼`);
        }

        // æ·»åŠ æ‰€æœ‰é‡Œç¨‹ç¢‘
        function addAllMilestones() {
            const milestoneTemplates = {
                month1_milestones: [
                    "åˆ¶å®šè¯¦ç»†æ‰§è¡Œè®¡åˆ’å’Œèµ„æºåˆ†é…",
                    "ç»„å»ºæ ¸å¿ƒå›¢é˜Ÿå¹¶æ˜ç¡®èŒè´£åˆ†å·¥",
                    "å®ŒæˆåŸºç¡€è®¾æ–½å’Œå·¥å…·é…ç½®",
                    "å¯åŠ¨å…³é”®é¡¹ç›®çš„ç¬¬ä¸€é˜¶æ®µ",
                    "å»ºç«‹è¿›åº¦è·Ÿè¸ªå’Œåé¦ˆæœºåˆ¶"
                ],
                month2_milestones: [
                    "å®Œæˆç¬¬ä¸€é˜¶æ®µæˆæœéªŒæ”¶",
                    "è¯„ä¼°è¿›å±•å¹¶è°ƒæ•´æ‰§è¡Œç­–ç•¥",
                    "æ¨è¿›æ ¸å¿ƒåŠŸèƒ½å¼€å‘",
                    "åŠ å¼ºå›¢é˜Ÿåä½œå’Œæ²Ÿé€š",
                    "è¿›è¡Œä¸­æœŸæˆæœå±•ç¤º"
                ],
                month3_milestones: [
                    "å®Œæˆæ‰€æœ‰å…³é”®äº¤ä»˜æˆæœ",
                    "è¿›è¡Œå…¨é¢è´¨é‡æ£€æŸ¥å’Œä¼˜åŒ–",
                    "æ€»ç»“ç»éªŒå¹¶å½¢æˆæœ€ä½³å®è·µ",
                    "å‡†å¤‡å­£åº¦æ€»ç»“å’Œä¸‹å­£åº¦è§„åˆ’",
                    "åº†ç¥å›¢é˜Ÿæˆå°±å¹¶è¯†åˆ«æ”¹è¿›æœºä¼š"
                ]
            };

            Object.keys(milestoneTemplates).forEach(containerId => {
                const container = document.getElementById(containerId);
                if (container) {
                    const milestones = milestoneTemplates[containerId];
                    const content = milestones.map(item => `[ ] ${item}`).join('\n');
                    container.textContent = content;
                    TodoUtils.renderTodos(container);
                }
            });

            MessageUtils.success('æ‰€æœ‰é‡Œç¨‹ç¢‘å·²æ·»åŠ å®Œæˆï¼');
            
            // å…³é—­æ¨¡æ€æ¡†
            const modal = document.querySelector('.modal-mask');
            if (modal) {
                ModalUtils.hide(modal);
            }
        }

        // åˆ†æå½“å‰è®¡åˆ’
        function analyzeCurrentPlan() {
            const objectives = document.getElementById('quarter_objectives').value;
            const keyResults = getTodoContent('quarter_key_results');
            const month1 = getTodoContent('month1_milestones');
            const month2 = getTodoContent('month2_milestones');
            const month3 = getTodoContent('month3_milestones');
            const review = document.getElementById('quarter_review').value;

            // è®¡ç®—åˆ†ææŒ‡æ ‡
            const objectiveWords = objectives.split(' ').length;
            const krCount = (keyResults.match(/\[.\]/g) || []).length;
            const totalMilestones = (month1.match(/\[.\]/g) || []).length + 
                                   (month2.match(/\[.\]/g) || []).length + 
                                   (month3.match(/\[.\]/g) || []).length;
            const completedKRs = (keyResults.match(/\[x\]/gi) || []).length;
            const completionRate = krCount > 0 ? Math.round((completedKRs / krCount) * 100) : 0;

            // ç”Ÿæˆå»ºè®®
            let suggestions = [];
            if (objectiveWords < 20) suggestions.push("å»ºè®®è¯¦åŒ–ç›®æ ‡æè¿°ï¼Œå¢åŠ å…·ä½“èƒŒæ™¯å’ŒæœŸæœ›æˆæœ");
            if (krCount < 3) suggestions.push("å»ºè®®å¢åŠ æ›´å¤šå…³é”®ç»“æœæŒ‡æ ‡ï¼Œç¡®ä¿ç›®æ ‡å¯è¡¡é‡");
            if (krCount > 7) suggestions.push("å…³é”®ç»“æœè¿‡å¤šï¼Œå»ºè®®ç²¾ç®€åˆ°3-5ä¸ªæ ¸å¿ƒæŒ‡æ ‡");
            if (totalMilestones < 9) suggestions.push("å»ºè®®ä¸ºæ¯ä¸ªæœˆè®¾å®š3-5ä¸ªé‡Œç¨‹ç¢‘ï¼Œç¡®ä¿æ‰§è¡Œæœ‰åº");
            if (!review.trim()) suggestions.push("å»ºè®®å¡«å†™å­£åº¦å›é¡¾ï¼Œæ€»ç»“ç»éªŒå’Œæ”¹è¿›è®¡åˆ’");

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ” è®¡åˆ’åˆ†ææŠ¥å‘Š</h4>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                    <div style="background: rgba(33, 150, 243, 0.1); padding: 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2em; color: #2196f3; margin-bottom: 8px;">${objectiveWords}</div>
                        <div style="color: #666;">ç›®æ ‡æè¿°å­—æ•°</div>
                    </div>
                    <div style="background: rgba(76, 175, 80, 0.1); padding: 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2em; color: #4caf50; margin-bottom: 8px;">${krCount}</div>
                        <div style="color: #666;">å…³é”®ç»“æœæ•°é‡</div>
                    </div>
                    <div style="background: rgba(255, 152, 0, 0.1); padding: 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2em; color: #ff9800; margin-bottom: 8px;">${totalMilestones}</div>
                        <div style="color: #666;">æ€»é‡Œç¨‹ç¢‘æ•°</div>
                    </div>
                    <div style="background: rgba(156, 39, 176, 0.1); padding: 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2em; color: #9c27b0; margin-bottom: 8px;">${completionRate}%</div>
                        <div style="color: #666;">å®Œæˆè¿›åº¦</div>
                    </div>
                </div>

                <div style="background: white; border: 2px solid #e0e0e0; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h5 style="color: var(--theme-color); margin: 0 0 16px 0;">ğŸ’¡ AIä¼˜åŒ–å»ºè®®</h5>
                    ${suggestions.length > 0 ? `
                        <ul style="margin: 0; padding-left: 20px; color: #666; line-height: 1.8;">
                            ${suggestions.map(suggestion => `<li>${suggestion}</li>`).join('')}
                        </ul>
                    ` : `
                        <div style="color: #4caf50; font-weight: 500;">
                            ğŸ‰ æ‚¨çš„å­£åº¦è®¡åˆ’ç»“æ„å®Œå–„ï¼Œå†…å®¹å……å®ï¼ç»§ç»­ä¿æŒè¿™ç§é«˜è´¨é‡çš„è§„åˆ’ä¹ æƒ¯ã€‚
                        </div>
                    `}
                </div>

                <div style="background: rgba(76, 175, 80, 0.1); padding: 16px; border-radius: 8px;">
                    <h5 style="color: #2e7d32; margin: 0 0 8px 0;">â­ è®¡åˆ’è´¨é‡è¯„åˆ†</h5>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="flex: 1; background: rgba(76, 175, 80, 0.2); border-radius: 10px; height: 20px; overflow: hidden;">
                            <div style="width: ${Math.min(85, (objectiveWords > 15 ? 25 : 0) + (krCount >= 3 ? 25 : 0) + (totalMilestones >= 9 ? 25 : 0) + (review.trim() ? 25 : 0))}%; height: 100%; background: #4caf50; transition: width 0.3s ease;"></div>
                        </div>
                        <div style="color: #2e7d32; font-weight: 600;">${Math.min(85, (objectiveWords > 15 ? 25 : 0) + (krCount >= 3 ? 25 : 0) + (totalMilestones >= 9 ? 25 : 0) + (review.trim() ? 25 : 0))}åˆ†</div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-main" onclick="closeModal()">å…³é—­åˆ†æ</button>
                </div>
            `;

            ModalUtils.show('è®¡åˆ’åˆ†ææŠ¥å‘Š', content, 'large');
        }

        // ç”Ÿæˆè®¡åˆ’æ¨¡æ¿
        function generateQuarterTemplate() {
            const templates = {
                business: {
                    name: "å•†ä¸šå‘å±•æ¨¡æ¿",
                    objectives: "â€¢ æ‹“å±•æ–°å¸‚åœºå¹¶å»ºç«‹å“ç‰Œå½±å“åŠ›\nâ€¢ æå‡äº§å“ç«äº‰åŠ›å’Œç”¨æˆ·ä½“éªŒ\nâ€¢ å»ºç«‹å¯æŒç»­çš„å•†ä¸šå¢é•¿æ¨¡å¼",
                    keyResults: [
                        "æ–°å®¢æˆ·è·å–é‡å¢é•¿40%",
                        "å®¢æˆ·æ»¡æ„åº¦NPSæå‡è‡³50+",
                        "äº§å“æœˆæ´»è·ƒç”¨æˆ·å¢é•¿30%",
                        "è¥æ”¶ç¯æ¯”å¢é•¿25%"
                    ],
                    icon: "ğŸ’¼"
                },
                personal: {
                    name: "ä¸ªäººæˆé•¿æ¨¡æ¿",
                    objectives: "â€¢ æå‡æ ¸å¿ƒä¸“ä¸šæŠ€èƒ½å’Œé¢†å¯¼èƒ½åŠ›\nâ€¢ å»ºç«‹å¥åº·å¹³è¡¡çš„ç”Ÿæ´»æ–¹å¼\nâ€¢ æ‰©å±•äººé™…ç½‘ç»œå’Œå½±å“åŠ›",
                    keyResults: [
                        "å®Œæˆ3é¡¹æ ¸å¿ƒæŠ€èƒ½è®¤è¯",
                        "å»ºç«‹æ¯å‘¨è¿åŠ¨3æ¬¡çš„ä¹ æƒ¯",
                        "å‚åŠ 5åœºè¡Œä¸šä¼šè®®",
                        "å»ºç«‹100+ä¸“ä¸šäººè„‰ç½‘ç»œ"
                    ],
                    icon: "ğŸ¯"
                },
                team: {
                    name: "å›¢é˜Ÿç®¡ç†æ¨¡æ¿",
                    objectives: "â€¢ æ‰“é€ é«˜æ•ˆåä½œçš„å›¢é˜Ÿæ–‡åŒ–\nâ€¢ æå‡å›¢é˜Ÿæ•´ä½“èƒ½åŠ›å’Œç»©æ•ˆ\nâ€¢ å»ºç«‹å®Œå–„çš„å›¢é˜Ÿå‘å±•ä½“ç³»",
                    keyResults: [
                        "å›¢é˜Ÿåä½œæ•ˆç‡æå‡35%",
                        "å‘˜å·¥æ»¡æ„åº¦è¾¾åˆ°4.5åˆ†",
                        "å›¢é˜ŸæŠ€èƒ½åŸ¹è®­å®Œæˆç‡95%",
                        "é¡¹ç›®äº¤ä»˜å‡†æ—¶ç‡è¾¾98%"
                    ],
                    icon: "ğŸ‘¥"
                },
                product: {
                    name: "äº§å“å¼€å‘æ¨¡æ¿",
                    objectives: "â€¢ æ„å»ºç”¨æˆ·ä»·å€¼é©±åŠ¨çš„äº§å“ä½“ç³»\nâ€¢ å»ºç«‹æ•æ·é«˜æ•ˆçš„å¼€å‘æµç¨‹\nâ€¢ æå‡äº§å“å¸‚åœºç«äº‰åŠ›",
                    keyResults: [
                        "æ–°åŠŸèƒ½ç”¨æˆ·é‡‡ç”¨ç‡60%+",
                        "äº§å“ç¼ºé™·ç‡é™ä½50%",
                        "å¼€å‘æ•ˆç‡æå‡40%",
                        "ç”¨æˆ·ç•™å­˜ç‡æå‡25%"
                    ],
                    icon: "ğŸš€"
                }
            };

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ“‹ æ ‡å‡†åŒ–è®¡åˆ’æ¨¡æ¿</h4>
                    <p style="color: #666;">é€‰æ‹©é€‚åˆçš„æ¨¡æ¿å¿«é€Ÿå¼€å§‹æ‚¨çš„å­£åº¦è§„åˆ’ï¼š</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    ${Object.entries(templates).map(([key, template]) => `
                        <div class="template-card" style="background: white; border: 2px solid #e0e0e0; border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s ease;" onclick="applyTemplate('${key}')">
                            <div style="text-align: center; margin-bottom: 16px;">
                                <div style="font-size: 3em; margin-bottom: 8px;">${template.icon}</div>
                                <div style="font-weight: 600; color: var(--theme-color); font-size: 1.1em;">${template.name}</div>
                            </div>
                            <div style="color: #666; line-height: 1.5; margin-bottom: 16px;">${template.objectives.split('\n')[0]}...</div>
                            <div style="background: rgba(25, 118, 210, 0.05); padding: 12px; border-radius: 8px;">
                                <div style="font-size: 0.9em; color: #666; margin-bottom: 8px;">åŒ…å« ${template.keyResults.length} ä¸ªå…³é”®ç»“æœæŒ‡æ ‡</div>
                                <div style="display: flex; gap: 4px;">
                                    ${Array(4).fill(0).map(() => '<div style="width: 8px; height: 8px; background: var(--theme-color); border-radius: 50%; opacity: 0.6;"></div>').join('')}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div style="background: rgba(255, 193, 7, 0.1); padding: 16px; border-radius: 8px; border-left: 4px solid #ffc107;">
                    <p style="margin: 0; color: #856404;">
                        ğŸ’¡ <strong>æç¤ºï¼š</strong>é€‰æ‹©æ¨¡æ¿åï¼Œæ‚¨å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œè°ƒæ•´å’Œå®šåˆ¶
                    </p>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-main" onclick="closeModal()">å–æ¶ˆ</button>
                </div>

                <style>
                    .template-card:hover {
                        border-color: var(--theme-color);
                        transform: translateY(-4px);
                        box-shadow: 0 8px 24px rgba(0,0,0,0.15);
                    }
                </style>
            `;

            ModalUtils.show('é€‰æ‹©è®¡åˆ’æ¨¡æ¿', content, 'large');
        }

        // åº”ç”¨æ¨¡æ¿
        function applyTemplate(templateKey) {
            const templates = {
                business: {
                    objectives: "â€¢ æ‹“å±•æ–°å¸‚åœºå¹¶å»ºç«‹å“ç‰Œå½±å“åŠ›\nâ€¢ æå‡äº§å“ç«äº‰åŠ›å’Œç”¨æˆ·ä½“éªŒ\nâ€¢ å»ºç«‹å¯æŒç»­çš„å•†ä¸šå¢é•¿æ¨¡å¼",
                    keyResults: [
                        "æ–°å®¢æˆ·è·å–é‡å¢é•¿40%",
                        "å®¢æˆ·æ»¡æ„åº¦NPSæå‡è‡³50+",
                        "äº§å“æœˆæ´»è·ƒç”¨æˆ·å¢é•¿30%",
                        "è¥æ”¶ç¯æ¯”å¢é•¿25%"
                    ]
                },
                personal: {
                    objectives: "â€¢ æå‡æ ¸å¿ƒä¸“ä¸šæŠ€èƒ½å’Œé¢†å¯¼èƒ½åŠ›\nâ€¢ å»ºç«‹å¥åº·å¹³è¡¡çš„ç”Ÿæ´»æ–¹å¼\nâ€¢ æ‰©å±•äººé™…ç½‘ç»œå’Œå½±å“åŠ›",
                    keyResults: [
                        "å®Œæˆ3é¡¹æ ¸å¿ƒæŠ€èƒ½è®¤è¯",
                        "å»ºç«‹æ¯å‘¨è¿åŠ¨3æ¬¡çš„ä¹ æƒ¯",
                        "å‚åŠ 5åœºè¡Œä¸šä¼šè®®",
                        "å»ºç«‹100+ä¸“ä¸šäººè„‰ç½‘ç»œ"
                    ]
                },
                team: {
                    objectives: "â€¢ æ‰“é€ é«˜æ•ˆåä½œçš„å›¢é˜Ÿæ–‡åŒ–\nâ€¢ æå‡å›¢é˜Ÿæ•´ä½“èƒ½åŠ›å’Œç»©æ•ˆ\nâ€¢ å»ºç«‹å®Œå–„çš„å›¢é˜Ÿå‘å±•ä½“ç³»",
                    keyResults: [
                        "å›¢é˜Ÿåä½œæ•ˆç‡æå‡35%",
                        "å‘˜å·¥æ»¡æ„åº¦è¾¾åˆ°4.5åˆ†",
                        "å›¢é˜ŸæŠ€èƒ½åŸ¹è®­å®Œæˆç‡95%",
                        "é¡¹ç›®äº¤ä»˜å‡†æ—¶ç‡è¾¾98%"
                    ]
                },
                product: {
                    objectives: "â€¢ æ„å»ºç”¨æˆ·ä»·å€¼é©±åŠ¨çš„äº§å“ä½“ç³»\nâ€¢ å»ºç«‹æ•æ·é«˜æ•ˆçš„å¼€å‘æµç¨‹\nâ€¢ æå‡äº§å“å¸‚åœºç«äº‰åŠ›",
                    keyResults: [
                        "æ–°åŠŸèƒ½ç”¨æˆ·é‡‡ç”¨ç‡60%+",
                        "äº§å“ç¼ºé™·ç‡é™ä½50%",
                        "å¼€å‘æ•ˆç‡æå‡40%",
                        "ç”¨æˆ·ç•™å­˜ç‡æå‡25%"
                    ]
                }
            };

            const template = templates[templateKey];
            if (!template) return;

            // åº”ç”¨ç›®æ ‡
            document.getElementById('quarter_objectives').value = template.objectives;

            // åº”ç”¨å…³é”®ç»“æœ
            const krContainer = document.getElementById('quarter_key_results');
            const krContent = template.keyResults.map(kr => `[ ] ${kr}`).join('\n');
            krContainer.textContent = krContent;
            TodoUtils.renderTodos(krContainer);

            MessageUtils.success('æ¨¡æ¿å·²åº”ç”¨æˆåŠŸï¼æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´ã€‚');
            
            // å…³é—­æ¨¡æ€æ¡†
            const modal = document.querySelector('.modal-mask');
            if (modal) {
                ModalUtils.hide(modal);
            }
        }

        // è·å–æœ€ä½³å®è·µ
        function getBestPractices() {
            const practices = [
                {
                    title: "OKRåˆ¶å®šåŸåˆ™",
                    icon: "ğŸ¯",
                    content: "ç›®æ ‡è¦æœ‰æŒ‘æˆ˜æ€§ä½†å¯å®ç°ï¼Œå…³é”®ç»“æœå¿…é¡»å¯é‡åŒ–ã€‚æ¯å­£åº¦3-5ä¸ªç›®æ ‡ï¼Œæ¯ä¸ªç›®æ ‡å¯¹åº”3-5ä¸ªå…³é”®ç»“æœã€‚"
                },
                {
                    title: "æ‰§è¡Œè·Ÿè¸ªé¢‘ç‡",
                    icon: "ğŸ“Š",
                    content: "å»ºè®®æ¯å‘¨æ£€æŸ¥è¿›åº¦ï¼Œæ¯æœˆè°ƒæ•´ç­–ç•¥ã€‚ä½¿ç”¨çœ‹æ¿æˆ–è¿›åº¦å›¾è¡¨å¯è§†åŒ–è¿½è¸ªï¼Œä¿æŒå›¢é˜Ÿé€æ˜åº¦ã€‚"
                },
                {
                    title: "å›¢é˜Ÿåä½œæœºåˆ¶",
                    icon: "ğŸ‘¥",
                    content: "å»ºç«‹å®šæœŸæ²Ÿé€šæœºåˆ¶ï¼ŒåŒ…æ‹¬å‘¨ä¼šã€æœˆåº¦å›é¡¾ã€‚ç¡®ä¿æ¯ä¸ªäººéƒ½æ¸…æ¥šè‡ªå·±çš„è´¡çŒ®å’Œå›¢é˜Ÿæ•´ä½“ç›®æ ‡ã€‚"
                },
                {
                    title: "é£é™©ç®¡ç†ç­–ç•¥",
                    icon: "âš ï¸",
                    content: "è¯†åˆ«å¯èƒ½çš„é£é™©ç‚¹ï¼Œåˆ¶å®šåº”å¯¹æ–¹æ¡ˆã€‚ä¸ºæ¯ä¸ªå…³é”®ç»“æœè®¾ç½®70%çš„è¾¾æˆæ ‡å‡†ä½œä¸ºæˆåŠŸæŒ‡æ ‡ã€‚"
                },
                {
                    title: "å­¦ä¹ ä¸æ”¹è¿›",
                    icon: "ğŸ“š",
                    content: "å­£åº¦ç»“æŸåè¿›è¡Œå¤ç›˜ï¼Œæ€»ç»“ç»éªŒæ•™è®­ã€‚å»ºç«‹çŸ¥è¯†åº“ï¼Œè®°å½•æˆåŠŸå®è·µå’Œå¤±è´¥åŸå› ã€‚"
                },
                {
                    title: "å·¥å…·ä¸æ–¹æ³•",
                    icon: "ğŸ› ï¸",
                    content: "ä½¿ç”¨åˆé€‚çš„å·¥å…·æ”¯æŒæ‰§è¡Œï¼Œå¦‚é¡¹ç›®ç®¡ç†è½¯ä»¶ã€æ•°æ®åˆ†æå·¥å…·ã€‚å»ºç«‹æ ‡å‡†åŒ–çš„å·¥ä½œæµç¨‹ã€‚"
                }
            ];

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ’ å­£åº¦è§„åˆ’æœ€ä½³å®è·µ</h4>
                    <p style="color: #666;">å­¦ä¹ è¡Œä¸šé¢†å…ˆçš„å­£åº¦è§„åˆ’æ–¹æ³•å’ŒæŠ€å·§ï¼š</p>
                </div>

                <div style="display: grid; gap: 16px; margin-bottom: 20px;">
                    ${practices.map(practice => `
                        <div style="background: white; border: 2px solid #e0e0e0; border-radius: 12px; padding: 20px;">
                            <div style="display: flex; align-items: center; margin-bottom: 12px;">
                                <div style="font-size: 1.5em; margin-right: 12px;">${practice.icon}</div>
                                <h5 style="margin: 0; color: var(--theme-color);">${practice.title}</h5>
                            </div>
                            <p style="margin: 0; color: #666; line-height: 1.6;">${practice.content}</p>
                        </div>
                    `).join('')}
                </div>

                <div style="background: rgba(25, 118, 210, 0.1); padding: 20px; border-radius: 12px;">
                    <h5 style="color: var(--theme-color); margin: 0 0 12px 0;">ğŸš€ æˆåŠŸè¦ç´ æ€»ç»“</h5>
                    <ul style="margin: 0; padding-left: 20px; color: #666; line-height: 1.8;">
                        <li>åˆ¶å®šæ¸…æ™°å…·ä½“çš„ç›®æ ‡å’Œå¯è¡¡é‡çš„ç»“æœ</li>
                        <li>å»ºç«‹æœ‰æ•ˆçš„æ‰§è¡Œå’Œè·Ÿè¸ªæœºåˆ¶</li>
                        <li>ä¿æŒå›¢é˜Ÿå¯¹é½å’Œé«˜æ•ˆæ²Ÿé€š</li>
                        <li>æŒç»­å­¦ä¹ å’Œè¿­ä»£æ”¹è¿›</li>
                    </ul>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-main" onclick="closeModal()">äº†è§£å®Œæˆ</button>
                </div>
            `;

            ModalUtils.show('æœ€ä½³å®è·µæŒ‡å—', content, 'large');
        }

        // å…³é—­æ¨¡æ€æ¡†çš„é€šç”¨æ–¹æ³•
        function closeModal() {
            const modal = document.querySelector('.modal-mask');
            if (modal) {
                ModalUtils.hide(modal);
            }
        }

        // è‡ªå®šä¹‰åŠŸèƒ½ï¼ˆå ä½ç¬¦ï¼‰
        function customObjective() {
            MessageUtils.info('è‡ªå®šä¹‰ç›®æ ‡åŠŸèƒ½å³å°†ä¸Šçº¿...');
        }

        function customKeyResult() {
            MessageUtils.info('è‡ªå®šä¹‰å…³é”®ç»“æœåŠŸèƒ½å³å°†ä¸Šçº¿...');
        }

        // æ˜¾ç¤ºæœˆåº¦é‡Œç¨‹ç¢‘æ¨¡æ¿
        function showMilestoneTemplates() {
            const templates = {
                startup: {
                    name: "é¡¹ç›®å¯åŠ¨æ¨¡æ¿",
                    icon: "ğŸš€",
                    description: "é€‚ç”¨äºæ–°é¡¹ç›®æˆ–æ–°ä¸šåŠ¡çš„å¯åŠ¨é˜¶æ®µ",
                    milestones: {
                        month1: [
                            "å®Œæˆé¡¹ç›®ç«‹é¡¹å’Œéœ€æ±‚åˆ†æ",
                            "ç»„å»ºæ ¸å¿ƒå›¢é˜Ÿå¹¶æ˜ç¡®è§’è‰²åˆ†å·¥",
                            "åˆ¶å®šè¯¦ç»†çš„é¡¹ç›®è®¡åˆ’å’Œæ—¶é—´è¡¨",
                            "å®ŒæˆæŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡",
                            "å»ºç«‹é¡¹ç›®ç®¡ç†å’Œæ²Ÿé€šæœºåˆ¶"
                        ],
                        month2: [
                            "å®Œæˆæ ¸å¿ƒåŠŸèƒ½çš„åŸå‹å¼€å‘",
                            "è¿›è¡Œç¬¬ä¸€è½®ç”¨æˆ·æµ‹è¯•å’Œåé¦ˆæ”¶é›†",
                            "ä¼˜åŒ–äº§å“è®¾è®¡å’Œç”¨æˆ·ä½“éªŒ",
                            "å»ºç«‹åŸºç¡€çš„è¿è¥å’Œæ”¯æŒä½“ç³»",
                            "å‡†å¤‡å¸‚åœºæ¨å¹¿å’Œå®£ä¼ ææ–™"
                        ],
                        month3: [
                            "å®Œæˆäº§å“çš„å®Œæ•´åŠŸèƒ½å¼€å‘",
                            "è¿›è¡Œå…¨é¢çš„è´¨é‡æµ‹è¯•å’Œä¼˜åŒ–",
                            "æ­£å¼å‘å¸ƒå¹¶å¼€å§‹å¸‚åœºæ¨å¹¿",
                            "å»ºç«‹ç”¨æˆ·åé¦ˆå’ŒæŒç»­æ”¹è¿›æœºåˆ¶",
                            "æ€»ç»“é¡¹ç›®ç»éªŒå¹¶è§„åˆ’ä¸‹ä¸€é˜¶æ®µ"
                        ]
                    }
                },
                growth: {
                    name: "ä¸šåŠ¡å¢é•¿æ¨¡æ¿",
                    icon: "ğŸ“ˆ",
                    description: "é€‚ç”¨äºå·²æœ‰ä¸šåŠ¡çš„è§„æ¨¡åŒ–å‘å±•é˜¶æ®µ",
                    milestones: {
                        month1: [
                            "åˆ†æç°æœ‰ä¸šåŠ¡æ•°æ®å’Œå¸‚åœºæœºä¼š",
                            "åˆ¶å®šå¢é•¿ç­–ç•¥å’Œå…³é”®æŒ‡æ ‡",
                            "ä¼˜åŒ–ç°æœ‰äº§å“å’ŒæœåŠ¡æµç¨‹",
                            "æ‰©å¤§è¥é”€æ¸ é“å’Œå®¢æˆ·è§¦è¾¾",
                            "å»ºç«‹æ•°æ®è¿½è¸ªå’Œåˆ†æä½“ç³»"
                        ],
                        month2: [
                            "å®æ–½å…³é”®çš„å¢é•¿å®éªŒå’Œæµ‹è¯•",
                            "æ‰©å¤§å›¢é˜Ÿè§„æ¨¡å’Œèƒ½åŠ›å»ºè®¾",
                            "æ·±åŒ–å®¢æˆ·å…³ç³»å’Œæå‡æ»¡æ„åº¦",
                            "å¼€å‘æ–°çš„äº§å“åŠŸèƒ½æˆ–æœåŠ¡",
                            "å»ºç«‹åˆä½œä¼™ä¼´å’Œæ¸ é“å…³ç³»"
                        ],
                        month3: [
                            "è¯„ä¼°å¢é•¿ç­–ç•¥çš„æ•ˆæœå’ŒROI",
                            "æ‰©å¤§æˆåŠŸå®éªŒçš„è§„æ¨¡å’Œå½±å“",
                            "å»ºç«‹å¯æŒç»­çš„å¢é•¿æœºåˆ¶",
                            "å‡†å¤‡ä¸‹ä¸€é˜¶æ®µçš„å‘å±•è®¡åˆ’",
                            "åˆ†äº«æˆåŠŸç»éªŒå’Œæœ€ä½³å®è·µ"
                        ]
                    }
                },
                optimization: {
                    name: "æµç¨‹ä¼˜åŒ–æ¨¡æ¿",
                    icon: "âš™ï¸",
                    description: "é€‚ç”¨äºæå‡æ•ˆç‡å’Œä¼˜åŒ–ç°æœ‰æµç¨‹",
                    milestones: {
                        month1: [
                            "è¯†åˆ«å’Œåˆ†æç°æœ‰æµç¨‹çš„ç“¶é¢ˆ",
                            "åˆ¶å®šæµç¨‹ä¼˜åŒ–å’Œæ”¹è¿›æ–¹æ¡ˆ",
                            "å»ºç«‹æµç¨‹ç›‘æ§å’Œæµ‹é‡æŒ‡æ ‡",
                            "åŸ¹è®­å›¢é˜Ÿä½¿ç”¨æ–°çš„å·¥å…·å’Œæ–¹æ³•",
                            "å¼€å§‹å®æ–½å°è§„æ¨¡çš„æ”¹è¿›è¯•ç‚¹"
                        ],
                        month2: [
                            "æ¨å¹¿æˆåŠŸçš„æ”¹è¿›æªæ–½åˆ°å…¨å›¢é˜Ÿ",
                            "å®æ–½è‡ªåŠ¨åŒ–å’ŒæŠ€æœ¯ä¼˜åŒ–æ–¹æ¡ˆ",
                            "å»ºç«‹æŒç»­æ”¹è¿›çš„æ–‡åŒ–å’Œæœºåˆ¶",
                            "æ”¶é›†å’Œåˆ†ææµç¨‹æ”¹è¿›çš„æ•ˆæœ",
                            "è°ƒæ•´å’Œä¼˜åŒ–æ”¹è¿›æ–¹æ¡ˆ"
                        ],
                        month3: [
                            "è¯„ä¼°æ•´ä½“ä¼˜åŒ–æ•ˆæœå’Œæ”¶ç›Š",
                            "å»ºç«‹æ ‡å‡†åŒ–çš„æµç¨‹æ–‡æ¡£",
                            "åŸ¹è®­å’Œæ¨å¹¿æœ€ä½³å®è·µ",
                            "å»ºç«‹é•¿æœŸçš„æµç¨‹ç»´æŠ¤æœºåˆ¶",
                            "è§„åˆ’ä¸‹ä¸€è½®çš„ä¼˜åŒ–é‡ç‚¹"
                        ]
                    }
                },
                learning: {
                    name: "å­¦ä¹ å‘å±•æ¨¡æ¿",
                    icon: "ğŸ“š",
                    description: "é€‚ç”¨äºæŠ€èƒ½æå‡å’ŒçŸ¥è¯†ä½“ç³»å»ºè®¾",
                    milestones: {
                        month1: [
                            "è¯„ä¼°å½“å‰æŠ€èƒ½æ°´å¹³å’Œå‘å±•éœ€æ±‚",
                            "åˆ¶å®šä¸ªäººæˆ–å›¢é˜Ÿå­¦ä¹ è®¡åˆ’",
                            "é€‰æ‹©åˆé€‚çš„å­¦ä¹ èµ„æºå’Œè¯¾ç¨‹",
                            "å»ºç«‹å­¦ä¹ è¿›åº¦è·Ÿè¸ªæœºåˆ¶",
                            "å¼€å§‹æ ¸å¿ƒæŠ€èƒ½çš„åŸºç¡€å­¦ä¹ "
                        ],
                        month2: [
                            "æ·±å…¥å­¦ä¹ å…³é”®æŠ€èƒ½å’ŒçŸ¥è¯†ç‚¹",
                            "å‚ä¸å®è·µé¡¹ç›®å’Œæ¡ˆä¾‹å­¦ä¹ ",
                            "ä¸ä¸“å®¶å’ŒåŒè¡Œè¿›è¡Œäº¤æµåˆ†äº«",
                            "å»ºç«‹ä¸ªäººçŸ¥è¯†ç®¡ç†ä½“ç³»",
                            "è¿›è¡Œå­¦ä¹ æˆæœçš„æ€»ç»“å’Œåæ€"
                        ],
                        month3: [
                            "åº”ç”¨æ‰€å­¦çŸ¥è¯†è§£å†³å®é™…é—®é¢˜",
                            "åˆ†äº«å­¦ä¹ æˆæœå’Œæœ€ä½³å®è·µ",
                            "å»ºç«‹æŒç»­å­¦ä¹ çš„ä¹ æƒ¯å’Œæœºåˆ¶",
                            "è¯„ä¼°å­¦ä¹ æ•ˆæœå’Œèƒ½åŠ›æå‡",
                            "è§„åˆ’ä¸‹ä¸€é˜¶æ®µçš„å­¦ä¹ é‡ç‚¹"
                        ]
                    }
                }
            };

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ“… æœˆåº¦é‡Œç¨‹ç¢‘æ¨¡æ¿</h4>
                    <p style="color: #666;">é€‰æ‹©é€‚åˆçš„æ¨¡æ¿å¿«é€Ÿè§„åˆ’æ‚¨çš„æœˆåº¦æ‰§è¡Œé‡Œç¨‹ç¢‘ï¼š</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    ${Object.entries(templates).map(([key, template]) => `
                        <div class="milestone-template-card" style="background: white; border: 2px solid #e0e0e0; border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s ease;" onclick="applyMilestoneTemplate('${key}')">
                            <div style="text-align: center; margin-bottom: 16px;">
                                <div style="font-size: 2.5em; margin-bottom: 8px;">${template.icon}</div>
                                <div style="font-weight: 600; color: var(--theme-color); margin-bottom: 8px;">${template.name}</div>
                                <div style="color: #666; font-size: 0.9em; line-height: 1.4;">${template.description}</div>
                            </div>
                            
                            <div style="background: rgba(25, 118, 210, 0.05); padding: 12px; border-radius: 8px; margin-bottom: 12px;">
                                <div style="font-size: 0.9em; color: #666; margin-bottom: 8px;">æ¯æœˆåŒ…å«5ä¸ªé‡Œç¨‹ç¢‘</div>
                                <div style="font-size: 0.8em; color: #999;">ç¬¬1ä¸ªæœˆ: ${template.milestones.month1[0]}...</div>
                            </div>
                            
                            <div style="text-align: center;">
                                <button class="btn-small" onclick="event.stopPropagation(); previewMilestoneTemplate('${key}')" style="margin-right: 8px;">ğŸ‘ï¸ é¢„è§ˆ</button>
                                <button class="btn-small" onclick="event.stopPropagation(); applyMilestoneTemplate('${key}')">âœ… åº”ç”¨</button>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div style="background: rgba(255, 193, 7, 0.1); padding: 16px; border-radius: 8px; border-left: 4px solid #ffc107; margin-bottom: 20px;">
                    <h5 style="color: #856404; margin: 0 0 8px 0;">ğŸ’¡ ä½¿ç”¨å»ºè®®</h5>
                    <ul style="margin: 0; padding-left: 20px; color: #856404; line-height: 1.6;">
                        <li>é€‰æ‹©æœ€ç¬¦åˆæ‚¨å½“å‰ä¸šåŠ¡é˜¶æ®µçš„æ¨¡æ¿</li>
                        <li>åº”ç”¨æ¨¡æ¿åå¯æ ¹æ®å…·ä½“æƒ…å†µè¿›è¡Œè°ƒæ•´</li>
                        <li>å»ºè®®ç»“åˆOKRç›®æ ‡åˆ¶å®šå…·ä½“çš„é‡Œç¨‹ç¢‘</li>
                    </ul>
                </div>

                <div style="text-align: center;">
                    <button class="btn-main" onclick="clearAllMilestones()" style="margin-right: 12px;">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰</button>
                    <button class="btn-main" onclick="closeModal()">å…³é—­</button>
                </div>

                <style>
                    .milestone-template-card:hover {
                        border-color: var(--theme-color);
                        transform: translateY(-2px);
                        box-shadow: 0 6px 20px rgba(0,0,0,0.1);
                    }
                    .btn-small {
                        padding: 6px 12px;
                        border: 1px solid var(--theme-color);
                        background: white;
                        color: var(--theme-color);
                        border-radius: 6px;
                        cursor: pointer;
                        font-size: 0.8em;
                        transition: all 0.3s ease;
                    }
                    .btn-small:hover {
                        background: var(--theme-color);
                        color: white;
                    }
                </style>
            `;

            ModalUtils.show('æœˆåº¦é‡Œç¨‹ç¢‘æ¨¡æ¿', content, 'large');
        }

        // é¢„è§ˆé‡Œç¨‹ç¢‘æ¨¡æ¿
        function previewMilestoneTemplate(templateKey) {
            const templates = {
                startup: {
                    name: "é¡¹ç›®å¯åŠ¨æ¨¡æ¿",
                    milestones: {
                        month1: [
                            "å®Œæˆé¡¹ç›®ç«‹é¡¹å’Œéœ€æ±‚åˆ†æ",
                            "ç»„å»ºæ ¸å¿ƒå›¢é˜Ÿå¹¶æ˜ç¡®è§’è‰²åˆ†å·¥", 
                            "åˆ¶å®šè¯¦ç»†çš„é¡¹ç›®è®¡åˆ’å’Œæ—¶é—´è¡¨",
                            "å®ŒæˆæŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡",
                            "å»ºç«‹é¡¹ç›®ç®¡ç†å’Œæ²Ÿé€šæœºåˆ¶"
                        ],
                        month2: [
                            "å®Œæˆæ ¸å¿ƒåŠŸèƒ½çš„åŸå‹å¼€å‘",
                            "è¿›è¡Œç¬¬ä¸€è½®ç”¨æˆ·æµ‹è¯•å’Œåé¦ˆæ”¶é›†",
                            "ä¼˜åŒ–äº§å“è®¾è®¡å’Œç”¨æˆ·ä½“éªŒ",
                            "å»ºç«‹åŸºç¡€çš„è¿è¥å’Œæ”¯æŒä½“ç³»",
                            "å‡†å¤‡å¸‚åœºæ¨å¹¿å’Œå®£ä¼ ææ–™"
                        ],
                        month3: [
                            "å®Œæˆäº§å“çš„å®Œæ•´åŠŸèƒ½å¼€å‘",
                            "è¿›è¡Œå…¨é¢çš„è´¨é‡æµ‹è¯•å’Œä¼˜åŒ–",
                            "æ­£å¼å‘å¸ƒå¹¶å¼€å§‹å¸‚åœºæ¨å¹¿",
                            "å»ºç«‹ç”¨æˆ·åé¦ˆå’ŒæŒç»­æ”¹è¿›æœºåˆ¶",
                            "æ€»ç»“é¡¹ç›®ç»éªŒå¹¶è§„åˆ’ä¸‹ä¸€é˜¶æ®µ"
                        ]
                    }
                },
                growth: {
                    name: "ä¸šåŠ¡å¢é•¿æ¨¡æ¿",
                    milestones: {
                        month1: [
                            "åˆ†æç°æœ‰ä¸šåŠ¡æ•°æ®å’Œå¸‚åœºæœºä¼š",
                            "åˆ¶å®šå¢é•¿ç­–ç•¥å’Œå…³é”®æŒ‡æ ‡",
                            "ä¼˜åŒ–ç°æœ‰äº§å“å’ŒæœåŠ¡æµç¨‹",
                            "æ‰©å¤§è¥é”€æ¸ é“å’Œå®¢æˆ·è§¦è¾¾",
                            "å»ºç«‹æ•°æ®è¿½è¸ªå’Œåˆ†æä½“ç³»"
                        ],
                        month2: [
                            "å®æ–½å…³é”®çš„å¢é•¿å®éªŒå’Œæµ‹è¯•",
                            "æ‰©å¤§å›¢é˜Ÿè§„æ¨¡å’Œèƒ½åŠ›å»ºè®¾",
                            "æ·±åŒ–å®¢æˆ·å…³ç³»å’Œæå‡æ»¡æ„åº¦",
                            "å¼€å‘æ–°çš„äº§å“åŠŸèƒ½æˆ–æœåŠ¡",
                            "å»ºç«‹åˆä½œä¼™ä¼´å’Œæ¸ é“å…³ç³»"
                        ],
                        month3: [
                            "è¯„ä¼°å¢é•¿ç­–ç•¥çš„æ•ˆæœå’ŒROI",
                            "æ‰©å¤§æˆåŠŸå®éªŒçš„è§„æ¨¡å’Œå½±å“",
                            "å»ºç«‹å¯æŒç»­çš„å¢é•¿æœºåˆ¶",
                            "å‡†å¤‡ä¸‹ä¸€é˜¶æ®µçš„å‘å±•è®¡åˆ’",
                            "åˆ†äº«æˆåŠŸç»éªŒå’Œæœ€ä½³å®è·µ"
                        ]
                    }
                },
                optimization: {
                    name: "æµç¨‹ä¼˜åŒ–æ¨¡æ¿",
                    milestones: {
                        month1: [
                            "è¯†åˆ«å’Œåˆ†æç°æœ‰æµç¨‹çš„ç“¶é¢ˆ",
                            "åˆ¶å®šæµç¨‹ä¼˜åŒ–å’Œæ”¹è¿›æ–¹æ¡ˆ",
                            "å»ºç«‹æµç¨‹ç›‘æ§å’Œæµ‹é‡æŒ‡æ ‡",
                            "åŸ¹è®­å›¢é˜Ÿä½¿ç”¨æ–°çš„å·¥å…·å’Œæ–¹æ³•",
                            "å¼€å§‹å®æ–½å°è§„æ¨¡çš„æ”¹è¿›è¯•ç‚¹"
                        ],
                        month2: [
                            "æ¨å¹¿æˆåŠŸçš„æ”¹è¿›æªæ–½åˆ°å…¨å›¢é˜Ÿ",
                            "å®æ–½è‡ªåŠ¨åŒ–å’ŒæŠ€æœ¯ä¼˜åŒ–æ–¹æ¡ˆ",
                            "å»ºç«‹æŒç»­æ”¹è¿›çš„æ–‡åŒ–å’Œæœºåˆ¶",
                            "æ”¶é›†å’Œåˆ†ææµç¨‹æ”¹è¿›çš„æ•ˆæœ",
                            "è°ƒæ•´å’Œä¼˜åŒ–æ”¹è¿›æ–¹æ¡ˆ"
                        ],
                        month3: [
                            "è¯„ä¼°æ•´ä½“ä¼˜åŒ–æ•ˆæœå’Œæ”¶ç›Š",
                            "å»ºç«‹æ ‡å‡†åŒ–çš„æµç¨‹æ–‡æ¡£",
                            "åŸ¹è®­å’Œæ¨å¹¿æœ€ä½³å®è·µ",
                            "å»ºç«‹é•¿æœŸçš„æµç¨‹ç»´æŠ¤æœºåˆ¶",
                            "è§„åˆ’ä¸‹ä¸€è½®çš„ä¼˜åŒ–é‡ç‚¹"
                        ]
                    }
                },
                learning: {
                    name: "å­¦ä¹ å‘å±•æ¨¡æ¿",
                    milestones: {
                        month1: [
                            "è¯„ä¼°å½“å‰æŠ€èƒ½æ°´å¹³å’Œå‘å±•éœ€æ±‚",
                            "åˆ¶å®šä¸ªäººæˆ–å›¢é˜Ÿå­¦ä¹ è®¡åˆ’",
                            "é€‰æ‹©åˆé€‚çš„å­¦ä¹ èµ„æºå’Œè¯¾ç¨‹",
                            "å»ºç«‹å­¦ä¹ è¿›åº¦è·Ÿè¸ªæœºåˆ¶",
                            "å¼€å§‹æ ¸å¿ƒæŠ€èƒ½çš„åŸºç¡€å­¦ä¹ "
                        ],
                        month2: [
                            "æ·±å…¥å­¦ä¹ å…³é”®æŠ€èƒ½å’ŒçŸ¥è¯†ç‚¹",
                            "å‚ä¸å®è·µé¡¹ç›®å’Œæ¡ˆä¾‹å­¦ä¹ ",
                            "ä¸ä¸“å®¶å’ŒåŒè¡Œè¿›è¡Œäº¤æµåˆ†äº«",
                            "å»ºç«‹ä¸ªäººçŸ¥è¯†ç®¡ç†ä½“ç³»",
                            "è¿›è¡Œå­¦ä¹ æˆæœçš„æ€»ç»“å’Œåæ€"
                        ],
                        month3: [
                            "åº”ç”¨æ‰€å­¦çŸ¥è¯†è§£å†³å®é™…é—®é¢˜",
                            "åˆ†äº«å­¦ä¹ æˆæœå’Œæœ€ä½³å®è·µ",
                            "å»ºç«‹æŒç»­å­¦ä¹ çš„ä¹ æƒ¯å’Œæœºåˆ¶",
                            "è¯„ä¼°å­¦ä¹ æ•ˆæœå’Œèƒ½åŠ›æå‡",
                            "è§„åˆ’ä¸‹ä¸€é˜¶æ®µçš„å­¦ä¹ é‡ç‚¹"
                        ]
                    }
                }
            };

            const template = templates[templateKey];
            if (!template) return;

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">${template.name} - è¯¦ç»†é¢„è§ˆ</h4>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px;">
                    <div style="background: rgba(33, 150, 243, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #2196f3;">
                        <h5 style="color: #2196f3; margin: 0 0 16px 0;">ç¬¬ä¸€ä¸ªæœˆ</h5>
                        <ul style="margin: 0; padding-left: 16px; color: #333; line-height: 1.8;">
                            ${template.milestones.month1.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>

                    <div style="background: rgba(76, 175, 80, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #4caf50;">
                        <h5 style="color: #4caf50; margin: 0 0 16px 0;">ç¬¬äºŒä¸ªæœˆ</h5>
                        <ul style="margin: 0; padding-left: 16px; color: #333; line-height: 1.8;">
                            ${template.milestones.month2.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>

                    <div style="background: rgba(255, 152, 0, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #ff9800;">
                        <h5 style="color: #ff9800; margin: 0 0 16px 0;">ç¬¬ä¸‰ä¸ªæœˆ</h5>
                        <ul style="margin: 0; padding-left: 16px; color: #333; line-height: 1.8;">
                            ${template.milestones.month3.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-main" onclick="closeModal(); applyMilestoneTemplate('${templateKey}')" style="margin-right: 12px;">âœ… åº”ç”¨æ­¤æ¨¡æ¿</button>
                    <button class="btn-main" onclick="closeModal()">å…³é—­</button>
                </div>
            `;

            ModalUtils.show(`${template.name} - é¢„è§ˆ`, content, 'large');
        }

        // åº”ç”¨é‡Œç¨‹ç¢‘æ¨¡æ¿
        function applyMilestoneTemplate(templateKey) {
            const templates = {
                startup: {
                    milestones: {
                        month1_milestones: [
                            "å®Œæˆé¡¹ç›®ç«‹é¡¹å’Œéœ€æ±‚åˆ†æ",
                            "ç»„å»ºæ ¸å¿ƒå›¢é˜Ÿå¹¶æ˜ç¡®è§’è‰²åˆ†å·¥",
                            "åˆ¶å®šè¯¦ç»†çš„é¡¹ç›®è®¡åˆ’å’Œæ—¶é—´è¡¨", 
                            "å®ŒæˆæŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡",
                            "å»ºç«‹é¡¹ç›®ç®¡ç†å’Œæ²Ÿé€šæœºåˆ¶"
                        ],
                        month2_milestones: [
                            "å®Œæˆæ ¸å¿ƒåŠŸèƒ½çš„åŸå‹å¼€å‘",
                            "è¿›è¡Œç¬¬ä¸€è½®ç”¨æˆ·æµ‹è¯•å’Œåé¦ˆæ”¶é›†",
                            "ä¼˜åŒ–äº§å“è®¾è®¡å’Œç”¨æˆ·ä½“éªŒ",
                            "å»ºç«‹åŸºç¡€çš„è¿è¥å’Œæ”¯æŒä½“ç³»",
                            "å‡†å¤‡å¸‚åœºæ¨å¹¿å’Œå®£ä¼ ææ–™"
                        ],
                        month3_milestones: [
                            "å®Œæˆäº§å“çš„å®Œæ•´åŠŸèƒ½å¼€å‘",
                            "è¿›è¡Œå…¨é¢çš„è´¨é‡æµ‹è¯•å’Œä¼˜åŒ–",
                            "æ­£å¼å‘å¸ƒå¹¶å¼€å§‹å¸‚åœºæ¨å¹¿",
                            "å»ºç«‹ç”¨æˆ·åé¦ˆå’ŒæŒç»­æ”¹è¿›æœºåˆ¶",
                            "æ€»ç»“é¡¹ç›®ç»éªŒå¹¶è§„åˆ’ä¸‹ä¸€é˜¶æ®µ"
                        ]
                    }
                },
                growth: {
                    milestones: {
                        month1_milestones: [
                            "åˆ†æç°æœ‰ä¸šåŠ¡æ•°æ®å’Œå¸‚åœºæœºä¼š",
                            "åˆ¶å®šå¢é•¿ç­–ç•¥å’Œå…³é”®æŒ‡æ ‡",
                            "ä¼˜åŒ–ç°æœ‰äº§å“å’ŒæœåŠ¡æµç¨‹",
                            "æ‰©å¤§è¥é”€æ¸ é“å’Œå®¢æˆ·è§¦è¾¾",
                            "å»ºç«‹æ•°æ®è¿½è¸ªå’Œåˆ†æä½“ç³»"
                        ],
                        month2_milestones: [
                            "å®æ–½å…³é”®çš„å¢é•¿å®éªŒå’Œæµ‹è¯•",
                            "æ‰©å¤§å›¢é˜Ÿè§„æ¨¡å’Œèƒ½åŠ›å»ºè®¾",
                            "æ·±åŒ–å®¢æˆ·å…³ç³»å’Œæå‡æ»¡æ„åº¦",
                            "å¼€å‘æ–°çš„äº§å“åŠŸèƒ½æˆ–æœåŠ¡",
                            "å»ºç«‹åˆä½œä¼™ä¼´å’Œæ¸ é“å…³ç³»"
                        ],
                        month3_milestones: [
                            "è¯„ä¼°å¢é•¿ç­–ç•¥çš„æ•ˆæœå’ŒROI",
                            "æ‰©å¤§æˆåŠŸå®éªŒçš„è§„æ¨¡å’Œå½±å“",
                            "å»ºç«‹å¯æŒç»­çš„å¢é•¿æœºåˆ¶",
                            "å‡†å¤‡ä¸‹ä¸€é˜¶æ®µçš„å‘å±•è®¡åˆ’",
                            "åˆ†äº«æˆåŠŸç»éªŒå’Œæœ€ä½³å®è·µ"
                        ]
                    }
                },
                optimization: {
                    milestones: {
                        month1_milestones: [
                            "è¯†åˆ«å’Œåˆ†æç°æœ‰æµç¨‹çš„ç“¶é¢ˆ",
                            "åˆ¶å®šæµç¨‹ä¼˜åŒ–å’Œæ”¹è¿›æ–¹æ¡ˆ",
                            "å»ºç«‹æµç¨‹ç›‘æ§å’Œæµ‹é‡æŒ‡æ ‡",
                            "åŸ¹è®­å›¢é˜Ÿä½¿ç”¨æ–°çš„å·¥å…·å’Œæ–¹æ³•",
                            "å¼€å§‹å®æ–½å°è§„æ¨¡çš„æ”¹è¿›è¯•ç‚¹"
                        ],
                        month2_milestones: [
                            "æ¨å¹¿æˆåŠŸçš„æ”¹è¿›æªæ–½åˆ°å…¨å›¢é˜Ÿ",
                            "å®æ–½è‡ªåŠ¨åŒ–å’ŒæŠ€æœ¯ä¼˜åŒ–æ–¹æ¡ˆ",
                            "å»ºç«‹æŒç»­æ”¹è¿›çš„æ–‡åŒ–å’Œæœºåˆ¶",
                            "æ”¶é›†å’Œåˆ†ææµç¨‹æ”¹è¿›çš„æ•ˆæœ",
                            "è°ƒæ•´å’Œä¼˜åŒ–æ”¹è¿›æ–¹æ¡ˆ"
                        ],
                        month3_milestones: [
                            "è¯„ä¼°æ•´ä½“ä¼˜åŒ–æ•ˆæœå’Œæ”¶ç›Š",
                            "å»ºç«‹æ ‡å‡†åŒ–çš„æµç¨‹æ–‡æ¡£",
                            "åŸ¹è®­å’Œæ¨å¹¿æœ€ä½³å®è·µ",
                            "å»ºç«‹é•¿æœŸçš„æµç¨‹ç»´æŠ¤æœºåˆ¶",
                            "è§„åˆ’ä¸‹ä¸€è½®çš„ä¼˜åŒ–é‡ç‚¹"
                        ]
                    }
                },
                learning: {
                    milestones: {
                        month1_milestones: [
                            "è¯„ä¼°å½“å‰æŠ€èƒ½æ°´å¹³å’Œå‘å±•éœ€æ±‚",
                            "åˆ¶å®šä¸ªäººæˆ–å›¢é˜Ÿå­¦ä¹ è®¡åˆ’",
                            "é€‰æ‹©åˆé€‚çš„å­¦ä¹ èµ„æºå’Œè¯¾ç¨‹",
                            "å»ºç«‹å­¦ä¹ è¿›åº¦è·Ÿè¸ªæœºåˆ¶",
                            "å¼€å§‹æ ¸å¿ƒæŠ€èƒ½çš„åŸºç¡€å­¦ä¹ "
                        ],
                        month2_milestones: [
                            "æ·±å…¥å­¦ä¹ å…³é”®æŠ€èƒ½å’ŒçŸ¥è¯†ç‚¹",
                            "å‚ä¸å®è·µé¡¹ç›®å’Œæ¡ˆä¾‹å­¦ä¹ ",
                            "ä¸ä¸“å®¶å’ŒåŒè¡Œè¿›è¡Œäº¤æµåˆ†äº«",
                            "å»ºç«‹ä¸ªäººçŸ¥è¯†ç®¡ç†ä½“ç³»",
                            "è¿›è¡Œå­¦ä¹ æˆæœçš„æ€»ç»“å’Œåæ€"
                        ],
                        month3_milestones: [
                            "åº”ç”¨æ‰€å­¦çŸ¥è¯†è§£å†³å®é™…é—®é¢˜",
                            "åˆ†äº«å­¦ä¹ æˆæœå’Œæœ€ä½³å®è·µ",
                            "å»ºç«‹æŒç»­å­¦ä¹ çš„ä¹ æƒ¯å’Œæœºåˆ¶",
                            "è¯„ä¼°å­¦ä¹ æ•ˆæœå’Œèƒ½åŠ›æå‡",
                            "è§„åˆ’ä¸‹ä¸€é˜¶æ®µçš„å­¦ä¹ é‡ç‚¹"
                        ]
                    }
                }
            };

            const template = templates[templateKey];
            if (!template) return;

            // åº”ç”¨é‡Œç¨‹ç¢‘åˆ°å„ä¸ªæœˆä»½
            Object.keys(template.milestones).forEach(containerId => {
                const container = document.getElementById(containerId);
                if (container) {
                    const milestones = template.milestones[containerId];
                    const content = milestones.map(item => `[ ] ${item}`).join('\n');
                    container.textContent = content;
                    TodoUtils.renderTodos(container);
                }
            });

            MessageUtils.success('é‡Œç¨‹ç¢‘æ¨¡æ¿å·²åº”ç”¨æˆåŠŸï¼');
            
            // å…³é—­æ¨¡æ€æ¡†
            const modal = document.querySelector('.modal-mask');
            if (modal) {
                ModalUtils.hide(modal);
            }
        }

        // æ¸…ç©ºæ‰€æœ‰é‡Œç¨‹ç¢‘
        function clearAllMilestones() {
            const confirmed = confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æœˆåº¦é‡Œç¨‹ç¢‘å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚');
            if (!confirmed) return;

            const containers = ['month1_milestones', 'month2_milestones', 'month3_milestones'];
            containers.forEach(containerId => {
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = '';
                    container.textContent = '';
                }
            });

            MessageUtils.success('æ‰€æœ‰æœˆåº¦é‡Œç¨‹ç¢‘å·²æ¸…ç©º');
            
            // å…³é—­æ¨¡æ€æ¡†
            const modal = document.querySelector('.modal-mask');
            if (modal) {
                ModalUtils.hide(modal);
            }
        }

        // æ˜¾ç¤ºå­£åº¦å›é¡¾æ¨¡æ¿
        function showReviewTemplates() {
            const templates = {
                comprehensive: {
                    name: "å…¨é¢å›é¡¾æ¨¡æ¿",
                    icon: "ğŸ“Š",
                    description: "æ¶µç›–OKRã€æˆæœã€æŒ‘æˆ˜ã€å­¦ä¹ çš„å®Œæ•´å›é¡¾",
                    content: `ğŸ¯ **OKRå®Œæˆæƒ…å†µè¯„ä¼°**

ç›®æ ‡å®Œæˆåº¦ï¼š
â€¢ ç›®æ ‡1: [å®Œæˆåº¦%] - [å…·ä½“æè¿°å®Œæˆæƒ…å†µ]
â€¢ ç›®æ ‡2: [å®Œæˆåº¦%] - [å…·ä½“æè¿°å®Œæˆæƒ…å†µ]
â€¢ ç›®æ ‡3: [å®Œæˆåº¦%] - [å…·ä½“æè¿°å®Œæˆæƒ…å†µ]

å…³é”®ç»“æœè¾¾æˆï¼š
â€¢ KR1: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]
â€¢ KR2: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]
â€¢ KR3: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]

ğŸ† **é‡è¦æˆæœå’Œçªç ´**

æ ¸å¿ƒæˆæœï¼š
â€¢ [æˆæœ1] - [å…·ä½“æ•°æ®å’Œå½±å“]
â€¢ [æˆæœ2] - [å…·ä½“æ•°æ®å’Œå½±å“]
â€¢ [æˆæœ3] - [å…·ä½“æ•°æ®å’Œå½±å“]

æ„å¤–æ”¶è·ï¼š
â€¢ [æ”¶è·1] - [å¯¹ä¸šåŠ¡çš„ç§¯æå½±å“]
â€¢ [æ”¶è·2] - [å¯¹å›¢é˜Ÿçš„ç§¯æå½±å“]

ğŸ› ï¸ **é‡åˆ°çš„æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆ**

ä¸»è¦æŒ‘æˆ˜ï¼š
â€¢ æŒ‘æˆ˜1: [é—®é¢˜æè¿°] â†’ [è§£å†³æ–¹æ¡ˆ] â†’ [ç»“æœ]
â€¢ æŒ‘æˆ˜2: [é—®é¢˜æè¿°] â†’ [è§£å†³æ–¹æ¡ˆ] â†’ [ç»“æœ]
â€¢ æŒ‘æˆ˜3: [é—®é¢˜æè¿°] â†’ [è§£å†³æ–¹æ¡ˆ] â†’ [ç»“æœ]

æœªå®Œå…¨è§£å†³çš„é—®é¢˜ï¼š
â€¢ [é—®é¢˜æè¿°] - [å½“å‰çŠ¶æ€] - [ä¸‹æ­¥è®¡åˆ’]

ğŸ‘¥ **å›¢é˜Ÿåä½œå’Œä¸ªäººæˆé•¿**

å›¢é˜Ÿåä½œï¼š
â€¢ å›¢é˜Ÿæ•ˆç‡æå‡ï¼š[å…·ä½“æ”¹è¿›]
â€¢ æ²Ÿé€šæœºåˆ¶ä¼˜åŒ–ï¼š[å…·ä½“å˜åŒ–]
â€¢ å›¢é˜Ÿèƒ½åŠ›å»ºè®¾ï¼š[åŸ¹è®­/å­¦ä¹ æˆæœ]

ä¸ªäººæˆé•¿ï¼š
â€¢ æ–°æŒæ¡çš„æŠ€èƒ½ï¼š[æŠ€èƒ½åˆ—è¡¨]
â€¢ é¢†å¯¼åŠ›æå‡ï¼š[å…·ä½“ä½“ç°]
â€¢ ä¸ªäººæ•ˆç‡æ”¹è¿›ï¼š[æ–¹æ³•å’Œæ•ˆæœ]

ğŸ“ˆ **ä¸‹å­£åº¦æ”¹è¿›è®¡åˆ’**

éœ€è¦è°ƒæ•´çš„ç­–ç•¥ï¼š
â€¢ [ç­–ç•¥1] - [è°ƒæ•´åŸå› ] - [æ–°æ–¹æ³•]
â€¢ [ç­–ç•¥2] - [è°ƒæ•´åŸå› ] - [æ–°æ–¹æ³•]

é‡ç‚¹æå‡é¢†åŸŸï¼š
â€¢ [é¢†åŸŸ1] - [å…·ä½“è¡ŒåŠ¨è®¡åˆ’]
â€¢ [é¢†åŸŸ2] - [å…·ä½“è¡ŒåŠ¨è®¡åˆ’]

èµ„æºéœ€æ±‚ï¼š
â€¢ äººå‘˜éœ€æ±‚ï¼š[å…·ä½“éœ€æ±‚]
â€¢ å·¥å…·/ç³»ç»Ÿéœ€æ±‚ï¼š[å…·ä½“éœ€æ±‚]
â€¢ åŸ¹è®­éœ€æ±‚ï¼š[å…·ä½“éœ€æ±‚]`
                },
                result_focused: {
                    name: "æˆæœå¯¼å‘æ¨¡æ¿",
                    icon: "ğŸ†",
                    description: "é‡ç‚¹å…³æ³¨æˆæœè¾¾æˆå’Œä»·å€¼åˆ›é€ ",
                    content: `ğŸ“Š **æ ¸å¿ƒæŒ‡æ ‡è¾¾æˆæƒ…å†µ**

ä¸šåŠ¡æŒ‡æ ‡ï¼š
â€¢ [æŒ‡æ ‡1]: ç›®æ ‡å€¼ vs å®é™…å€¼ - [è¾¾æˆç‡%]
â€¢ [æŒ‡æ ‡2]: ç›®æ ‡å€¼ vs å®é™…å€¼ - [è¾¾æˆç‡%]
â€¢ [æŒ‡æ ‡3]: ç›®æ ‡å€¼ vs å®é™…å€¼ - [è¾¾æˆç‡%]

è´¨é‡æŒ‡æ ‡ï¼š
â€¢ [è´¨é‡æŒ‡æ ‡1]: [å®é™…è¡¨ç°]
â€¢ [è´¨é‡æŒ‡æ ‡2]: [å®é™…è¡¨ç°]

ğŸ¯ **å…³é”®æˆæœè¯¦è¿°**

æœ€é‡è¦çš„3ä¸ªæˆæœï¼š
1. [æˆæœåç§°]
   â€¢ èƒŒæ™¯ï¼š[ä¸ºä»€ä¹ˆé‡è¦]
   â€¢ è¿‡ç¨‹ï¼š[å¦‚ä½•å®ç°]
   â€¢ å½±å“ï¼š[å¸¦æ¥çš„ä»·å€¼]
   â€¢ æ•°æ®ï¼š[å…·ä½“æ•°æ®æ”¯æ’‘]

2. [æˆæœåç§°]
   â€¢ èƒŒæ™¯ï¼š[ä¸ºä»€ä¹ˆé‡è¦]
   â€¢ è¿‡ç¨‹ï¼š[å¦‚ä½•å®ç°]
   â€¢ å½±å“ï¼š[å¸¦æ¥çš„ä»·å€¼]
   â€¢ æ•°æ®ï¼š[å…·ä½“æ•°æ®æ”¯æ’‘]

3. [æˆæœåç§°]
   â€¢ èƒŒæ™¯ï¼š[ä¸ºä»€ä¹ˆé‡è¦]
   â€¢ è¿‡ç¨‹ï¼š[å¦‚ä½•å®ç°]
   â€¢ å½±å“ï¼š[å¸¦æ¥çš„ä»·å€¼]
   â€¢ æ•°æ®ï¼š[å…·ä½“æ•°æ®æ”¯æ’‘]

ğŸ’¡ **æˆåŠŸå› ç´ åˆ†æ**

å…³é”®æˆåŠŸè¦ç´ ï¼š
â€¢ [è¦ç´ 1] - [ä¸ºä»€ä¹ˆæ˜¯å…³é”®å› ç´ ]
â€¢ [è¦ç´ 2] - [ä¸ºä»€ä¹ˆæ˜¯å…³é”®å› ç´ ]
â€¢ [è¦ç´ 3] - [ä¸ºä»€ä¹ˆæ˜¯å…³é”®å› ç´ ]

å¯å¤ç”¨çš„æ–¹æ³•ï¼š
â€¢ [æ–¹æ³•1] - [åº”ç”¨åœºæ™¯]
â€¢ [æ–¹æ³•2] - [åº”ç”¨åœºæ™¯]

âš ï¸ **é£é™©ç®¡æ§æ€»ç»“**

å·²è§„é¿çš„é£é™©ï¼š
â€¢ [é£é™©1] - [è§„é¿æªæ–½] - [æ•ˆæœ]
â€¢ [é£é™©2] - [è§„é¿æªæ–½] - [æ•ˆæœ]

æ–°è¯†åˆ«çš„é£é™©ï¼š
â€¢ [æ–°é£é™©1] - [å½±å“è¯„ä¼°] - [åº”å¯¹è®¡åˆ’]
â€¢ [æ–°é£é™©2] - [å½±å“è¯„ä¼°] - [åº”å¯¹è®¡åˆ’]

ğŸš€ **ä»·å€¼åˆ›é€ æ€»ç»“**

å¯¹ä¸šåŠ¡çš„ä»·å€¼ï¼š
â€¢ [ä»·å€¼1] - [é‡åŒ–æè¿°]
â€¢ [ä»·å€¼2] - [é‡åŒ–æè¿°]

å¯¹å›¢é˜Ÿçš„ä»·å€¼ï¼š
â€¢ [ä»·å€¼1] - [å…·ä½“ä½“ç°]
â€¢ [ä»·å€¼2] - [å…·ä½“ä½“ç°]

å¯¹ä¸ªäººçš„ä»·å€¼ï¼š
â€¢ [ä»·å€¼1] - [æˆé•¿ä½“ç°]
â€¢ [ä»·å€¼2] - [æˆé•¿ä½“ç°]`
                },
                learning_focused: {
                    name: "å­¦ä¹ åæ€æ¨¡æ¿",
                    icon: "ğŸ“",
                    description: "å¼ºè°ƒå­¦ä¹ æ€»ç»“å’Œç»éªŒæ²‰æ·€",
                    content: `ğŸ§  **å…³é”®å­¦ä¹ å’Œæ´å¯Ÿ**

ä¸šåŠ¡ç†è§£æ·±åŒ–ï¼š
â€¢ [æ´å¯Ÿ1] - [å¦‚ä½•è·å¾—] - [å¯¹æœªæ¥çš„æŒ‡å¯¼æ„ä¹‰]
â€¢ [æ´å¯Ÿ2] - [å¦‚ä½•è·å¾—] - [å¯¹æœªæ¥çš„æŒ‡å¯¼æ„ä¹‰]
â€¢ [æ´å¯Ÿ3] - [å¦‚ä½•è·å¾—] - [å¯¹æœªæ¥çš„æŒ‡å¯¼æ„ä¹‰]

å¸‚åœº/ç”¨æˆ·æ´å¯Ÿï¼š
â€¢ [å¸‚åœºæ´å¯Ÿ] - [æ•°æ®æ¥æº] - [æˆ˜ç•¥æ„ä¹‰]
â€¢ [ç”¨æˆ·æ´å¯Ÿ] - [è°ƒç ”æ–¹æ³•] - [äº§å“ä¼˜åŒ–æ–¹å‘]

ğŸ“š **æŠ€èƒ½å’Œèƒ½åŠ›æå‡**

æ–°æŒæ¡çš„æŠ€èƒ½ï¼š
â€¢ [æŠ€èƒ½1] - [å­¦ä¹ æ–¹å¼] - [åº”ç”¨åœºæ™¯] - [ç†Ÿç»ƒåº¦]
â€¢ [æŠ€èƒ½2] - [å­¦ä¹ æ–¹å¼] - [åº”ç”¨åœºæ™¯] - [ç†Ÿç»ƒåº¦]
â€¢ [æŠ€èƒ½3] - [å­¦ä¹ æ–¹å¼] - [åº”ç”¨åœºæ™¯] - [ç†Ÿç»ƒåº¦]

èƒ½åŠ›æå‡é¢†åŸŸï¼š
â€¢ åˆ†æèƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]
â€¢ å†³ç­–èƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]
â€¢ æ²Ÿé€šèƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]
â€¢ ç®¡ç†èƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]

ğŸ”„ **æœ€ä½³å®è·µæ€»ç»“**

æˆåŠŸçš„åšæ³•ï¼š
â€¢ [å®è·µ1] - [åº”ç”¨åœºæ™¯] - [æ•ˆæœ] - [æ¨å¹¿ä»·å€¼]
â€¢ [å®è·µ2] - [åº”ç”¨åœºæ™¯] - [æ•ˆæœ] - [æ¨å¹¿ä»·å€¼]
â€¢ [å®è·µ3] - [åº”ç”¨åœºæ™¯] - [æ•ˆæœ] - [æ¨å¹¿ä»·å€¼]

å¯ä¼˜åŒ–çš„æµç¨‹ï¼š
â€¢ [æµç¨‹1] - [å½“å‰é—®é¢˜] - [æ”¹è¿›æ–¹æ¡ˆ]
â€¢ [æµç¨‹2] - [å½“å‰é—®é¢˜] - [æ”¹è¿›æ–¹æ¡ˆ]

âŒ **å¤±è´¥ç»éªŒå’Œæ•™è®­**

å¤±è´¥æ¡ˆä¾‹åˆ†æï¼š
â€¢ [å¤±è´¥æ¡ˆä¾‹1]
  - å¤±è´¥åŸå› ï¼š[æ ¹æœ¬åŸå› åˆ†æ]
  - æ•™è®­ï¼š[æ ¸å¿ƒæ•™è®­]
  - é¢„é˜²æªæ–½ï¼š[æœªæ¥å¦‚ä½•é¿å…]

â€¢ [å¤±è´¥æ¡ˆä¾‹2]
  - å¤±è´¥åŸå› ï¼š[æ ¹æœ¬åŸå› åˆ†æ]
  - æ•™è®­ï¼š[æ ¸å¿ƒæ•™è®­]
  - é¢„é˜²æªæ–½ï¼š[æœªæ¥å¦‚ä½•é¿å…]

é¿å‘æŒ‡å—ï¼š
â€¢ [å‘ç‚¹1] - [è¯†åˆ«æ–¹æ³•] - [é¿å…ç­–ç•¥]
â€¢ [å‘ç‚¹2] - [è¯†åˆ«æ–¹æ³•] - [é¿å…ç­–ç•¥]

ğŸ”® **æœªæ¥å±•æœ›å’Œè§„åˆ’**

è¶‹åŠ¿åˆ¤æ–­ï¼š
â€¢ [è¶‹åŠ¿1] - [åˆ¤æ–­ä¾æ®] - [å¯¹ç­–]
â€¢ [è¶‹åŠ¿2] - [åˆ¤æ–­ä¾æ®] - [å¯¹ç­–]

èƒ½åŠ›å»ºè®¾é‡ç‚¹ï¼š
â€¢ [èƒ½åŠ›1] - [é‡è¦æ€§] - [å»ºè®¾è®¡åˆ’]
â€¢ [èƒ½åŠ›2] - [é‡è¦æ€§] - [å»ºè®¾è®¡åˆ’]

çŸ¥è¯†ä½“ç³»å®Œå–„ï¼š
â€¢ [çŸ¥è¯†é¢†åŸŸ1] - [å­¦ä¹ è®¡åˆ’] - [æ—¶é—´å®‰æ’]
â€¢ [çŸ¥è¯†é¢†åŸŸ2] - [å­¦ä¹ è®¡åˆ’] - [æ—¶é—´å®‰æ’]`
                },
                team_focused: {
                    name: "å›¢é˜Ÿåä½œæ¨¡æ¿",
                    icon: "ğŸ‘¥", 
                    description: "èšç„¦å›¢é˜Ÿå»ºè®¾å’Œåä½œæ•ˆæœ",
                    content: `ğŸ‘¥ **å›¢é˜Ÿè¡¨ç°è¯„ä¼°**

å›¢é˜Ÿæ•´ä½“è¡¨ç°ï¼š
â€¢ ç›®æ ‡è¾¾æˆç‡ï¼š[ç™¾åˆ†æ¯”] - [å…·ä½“æŒ‡æ ‡]
â€¢ åä½œæ•ˆç‡ï¼š[è¯„åˆ†] - [æ”¹è¿›å¹…åº¦]
â€¢ å›¢é˜Ÿæ»¡æ„åº¦ï¼š[è¯„åˆ†] - [è°ƒç ”ç»“æœ]

ä¸ªäººè´¡çŒ®äº®ç‚¹ï¼š
â€¢ [æˆå‘˜1]: [ä¸»è¦è´¡çŒ®] - [äº®ç‚¹è¡¨ç°]
â€¢ [æˆå‘˜2]: [ä¸»è¦è´¡çŒ®] - [äº®ç‚¹è¡¨ç°]
â€¢ [æˆå‘˜3]: [ä¸»è¦è´¡çŒ®] - [äº®ç‚¹è¡¨ç°]

ğŸ¤ **åä½œæœºåˆ¶ä¼˜åŒ–**

æ²Ÿé€šæ”¹è¿›ï¼š
â€¢ ä¼šè®®æ•ˆç‡ï¼š[æ”¹è¿›æªæ–½] - [æ•ˆæœ]
â€¢ ä¿¡æ¯åŒæ­¥ï¼š[æ–°æœºåˆ¶] - [æ•ˆæœ]
â€¢ è·¨éƒ¨é—¨åä½œï¼š[ä¼˜åŒ–æ–¹æ¡ˆ] - [æ•ˆæœ]

å·¥ä½œæµç¨‹ä¼˜åŒ–ï¼š
â€¢ [æµç¨‹1]: [åŸé—®é¢˜] â†’ [æ”¹è¿›æ–¹æ¡ˆ] â†’ [æ–°æ•ˆæœ]
â€¢ [æµç¨‹2]: [åŸé—®é¢˜] â†’ [æ”¹è¿›æ–¹æ¡ˆ] â†’ [æ–°æ•ˆæœ]

å·¥å…·å’Œæ–¹æ³•ï¼š
â€¢ æ–°å¼•å…¥å·¥å…·ï¼š[å·¥å…·å] - [è§£å†³é—®é¢˜] - [ä½¿ç”¨æ•ˆæœ]
â€¢ æ–¹æ³•ä¼˜åŒ–ï¼š[æ–¹æ³•å] - [æ”¹è¿›å†…å®¹] - [æ•ˆç‡æå‡]

ğŸŒ± **å›¢é˜Ÿæˆé•¿å’Œå‘å±•**

æŠ€èƒ½å»ºè®¾ï¼š
â€¢ å›¢é˜ŸåŸ¹è®­ï¼š[åŸ¹è®­å†…å®¹] - [å‚ä¸åº¦] - [åº”ç”¨æ•ˆæœ]
â€¢ çŸ¥è¯†åˆ†äº«ï¼š[åˆ†äº«æ¬¡æ•°] - [ä¸»é¢˜] - [æ”¶ç›Š]
â€¢ å®è·µç»ƒä¹ ï¼š[ç»ƒä¹ é¡¹ç›®] - [æŠ€èƒ½æå‡]

æ–‡åŒ–å»ºè®¾ï¼š
â€¢ ä»·å€¼è§‚ä½“ç°ï¼š[å…·ä½“æ¡ˆä¾‹] - [å›¢é˜Ÿè®¤åŒåº¦]
â€¢ å­¦ä¹ æ°›å›´ï¼š[è¥é€ æªæ–½] - [æ•ˆæœè¡¨ç°]
â€¢ åˆ›æ–°é¼“åŠ±ï¼š[æ¿€åŠ±æœºåˆ¶] - [åˆ›æ–°æˆæœ]

âš¡ **å›¢é˜Ÿæ•ˆèƒ½åˆ†æ**

æ•ˆç‡æŒ‡æ ‡ï¼š
â€¢ ä»»åŠ¡å®Œæˆé€Ÿåº¦ï¼š[å¯¹æ¯”æ•°æ®]
â€¢ è´¨é‡æ°´å¹³ï¼š[è´¨é‡æŒ‡æ ‡]
â€¢ å“åº”é€Ÿåº¦ï¼š[å“åº”æ—¶é—´æ”¹è¿›]

åä½œè´¨é‡ï¼š
â€¢ å†…éƒ¨é…åˆï¼š[é…åˆæ•ˆæœè¯„ä¼°]
â€¢ å¤–éƒ¨åä½œï¼š[è·¨å›¢é˜Ÿåä½œæ•ˆæœ]
â€¢ å†²çªå¤„ç†ï¼š[å†²çªè§£å†³æ•ˆç‡]

ğŸ¯ **å›¢é˜Ÿå»ºè®¾è§„åˆ’**

çŸ­æœŸæ”¹è¿›è®¡åˆ’ï¼š
â€¢ [æ”¹è¿›ç‚¹1] - [å…·ä½“æªæ–½] - [é¢„æœŸæ•ˆæœ] - [æ—¶é—´å®‰æ’]
â€¢ [æ”¹è¿›ç‚¹2] - [å…·ä½“æªæ–½] - [é¢„æœŸæ•ˆæœ] - [æ—¶é—´å®‰æ’]

é•¿æœŸå‘å±•ç›®æ ‡ï¼š
â€¢ å›¢é˜Ÿèƒ½åŠ›ç›®æ ‡ï¼š[èƒ½åŠ›æ–¹å‘] - [å»ºè®¾è·¯å¾„]
â€¢ æ–‡åŒ–å»ºè®¾ç›®æ ‡ï¼š[æ–‡åŒ–ç‰¹è‰²] - [åŸ¹å…»æ–¹æ³•]

äººå‘˜å‘å±•è®¡åˆ’ï¼š
â€¢ [æˆå‘˜1]: [å‘å±•æ–¹å‘] - [æ”¯æŒæªæ–½]
â€¢ [æˆå‘˜2]: [å‘å±•æ–¹å‘] - [æ”¯æŒæªæ–½]
â€¢ [æˆå‘˜3]: [å‘å±•æ–¹å‘] - [æ”¯æŒæªæ–½]`
                }
            };

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">ğŸ“ å­£åº¦å›é¡¾æ¨¡æ¿</h4>
                    <p style="color: #666;">é€‰æ‹©é€‚åˆçš„æ¨¡æ¿ç»“æ„åŒ–åœ°è¿›è¡Œå­£åº¦å›é¡¾å’Œæ€»ç»“ï¼š</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    ${Object.entries(templates).map(([key, template]) => `
                        <div class="review-template-card" style="background: white; border: 2px solid #e0e0e0; border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s ease;">
                            <div style="text-align: center; margin-bottom: 16px;">
                                <div style="font-size: 2.5em; margin-bottom: 8px;">${template.icon}</div>
                                <div style="font-weight: 600; color: var(--theme-color); margin-bottom: 8px;">${template.name}</div>
                                <div style="color: #666; font-size: 0.9em; line-height: 1.4; min-height: 40px;">${template.description}</div>
                            </div>
                            
                            <div style="background: rgba(25, 118, 210, 0.05); padding: 12px; border-radius: 8px; margin-bottom: 16px;">
                                <div style="font-size: 0.9em; color: #666; margin-bottom: 8px;">åŒ…å«å®Œæ•´çš„å›é¡¾æ¡†æ¶</div>
                                <div style="font-size: 0.8em; color: #999; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                    ${template.content.split('\n')[0].replace(/[*#]/g, '').trim()}...
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                                <button class="btn-small" onclick="previewReviewTemplate('${key}')" style="width: 100%;">ğŸ‘ï¸ é¢„è§ˆ</button>
                                <button class="btn-small" onclick="applyReviewTemplate('${key}')" style="width: 100%;">âœ… åº”ç”¨</button>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div style="background: rgba(76, 175, 80, 0.1); padding: 16px; border-radius: 8px; border-left: 4px solid #4caf50; margin-bottom: 20px;">
                    <h5 style="color: #2e7d32; margin: 0 0 8px 0;">ğŸ’¡ å›é¡¾å»ºè®®</h5>
                    <ul style="margin: 0; padding-left: 20px; color: #2e7d32; line-height: 1.6;">
                        <li>é€‰æ‹©æœ€ç¬¦åˆæ‚¨å›é¡¾é‡ç‚¹çš„æ¨¡æ¿ç»“æ„</li>
                        <li>å›é¡¾æ—¶è¦å®¢è§‚è¯šå®ï¼Œæ—¢çœ‹æˆæœä¹Ÿçœ‹é—®é¢˜</li>
                        <li>é‡ç‚¹æ€»ç»“å¯å¤ç”¨çš„ç»éªŒå’Œæ•™è®­</li>
                        <li>ä¸ºä¸‹å­£åº¦è§„åˆ’æä¾›æ¸…æ™°çš„æ”¹è¿›æ–¹å‘</li>
                    </ul>
                </div>

                <div style="text-align: center;">
                    <button class="btn-main" onclick="clearReview()" style="margin-right: 12px;">ğŸ—‘ï¸ æ¸…ç©ºå›é¡¾</button>
                    <button class="btn-main" onclick="closeModal()">å…³é—­</button>
                </div>

                <style>
                    .review-template-card:hover {
                        border-color: var(--theme-color);
                        transform: translateY(-2px);
                        box-shadow: 0 6px 20px rgba(0,0,0,0.1);
                    }
                </style>
            `;

            ModalUtils.show('å­£åº¦å›é¡¾æ¨¡æ¿', content, 'large');
        }

        // é¢„è§ˆå›é¡¾æ¨¡æ¿
        function previewReviewTemplate(templateKey) {
            const templates = {
                comprehensive: {
                    name: "å…¨é¢å›é¡¾æ¨¡æ¿",
                    content: `ğŸ¯ **OKRå®Œæˆæƒ…å†µè¯„ä¼°**

ç›®æ ‡å®Œæˆåº¦ï¼š
â€¢ ç›®æ ‡1: [å®Œæˆåº¦%] - [å…·ä½“æè¿°å®Œæˆæƒ…å†µ]
â€¢ ç›®æ ‡2: [å®Œæˆåº¦%] - [å…·ä½“æè¿°å®Œæˆæƒ…å†µ]
â€¢ ç›®æ ‡3: [å®Œæˆåº¦%] - [å…·ä½“æè¿°å®Œæˆæƒ…å†µ]

å…³é”®ç»“æœè¾¾æˆï¼š
â€¢ KR1: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]
â€¢ KR2: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]
â€¢ KR3: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]

ğŸ† **é‡è¦æˆæœå’Œçªç ´**

æ ¸å¿ƒæˆæœï¼š
â€¢ [æˆæœ1] - [å…·ä½“æ•°æ®å’Œå½±å“]
â€¢ [æˆæœ2] - [å…·ä½“æ•°æ®å’Œå½±å“]
â€¢ [æˆæœ3] - [å…·ä½“æ•°æ®å’Œå½±å“]

æ„å¤–æ”¶è·ï¼š
â€¢ [æ”¶è·1] - [å¯¹ä¸šåŠ¡çš„ç§¯æå½±å“]
â€¢ [æ”¶è·2] - [å¯¹å›¢é˜Ÿçš„ç§¯æå½±å“]

ğŸ› ï¸ **é‡åˆ°çš„æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆ**

ä¸»è¦æŒ‘æˆ˜ï¼š
â€¢ æŒ‘æˆ˜1: [é—®é¢˜æè¿°] â†’ [è§£å†³æ–¹æ¡ˆ] â†’ [ç»“æœ]
â€¢ æŒ‘æˆ˜2: [é—®é¢˜æè¿°] â†’ [è§£å†³æ–¹æ¡ˆ] â†’ [ç»“æœ]
â€¢ æŒ‘æˆ˜3: [é—®é¢˜æè¿°] â†’ [è§£å†³æ–¹æ¡ˆ] â†’ [ç»“æœ]

æœªå®Œå…¨è§£å†³çš„é—®é¢˜ï¼š
â€¢ [é—®é¢˜æè¿°] - [å½“å‰çŠ¶æ€] - [ä¸‹æ­¥è®¡åˆ’]

ğŸ‘¥ **å›¢é˜Ÿåä½œå’Œä¸ªäººæˆé•¿**

å›¢é˜Ÿåä½œï¼š
â€¢ å›¢é˜Ÿæ•ˆç‡æå‡ï¼š[å…·ä½“æ”¹è¿›]
â€¢ æ²Ÿé€šæœºåˆ¶ä¼˜åŒ–ï¼š[å…·ä½“å˜åŒ–]
â€¢ å›¢é˜Ÿèƒ½åŠ›å»ºè®¾ï¼š[åŸ¹è®­/å­¦ä¹ æˆæœ]

ä¸ªäººæˆé•¿ï¼š
â€¢ æ–°æŒæ¡çš„æŠ€èƒ½ï¼š[æŠ€èƒ½åˆ—è¡¨]
â€¢ é¢†å¯¼åŠ›æå‡ï¼š[å…·ä½“ä½“ç°]
â€¢ ä¸ªäººæ•ˆç‡æ”¹è¿›ï¼š[æ–¹æ³•å’Œæ•ˆæœ]

ğŸ“ˆ **ä¸‹å­£åº¦æ”¹è¿›è®¡åˆ’**

éœ€è¦è°ƒæ•´çš„ç­–ç•¥ï¼š
â€¢ [ç­–ç•¥1] - [è°ƒæ•´åŸå› ] - [æ–°æ–¹æ³•]
â€¢ [ç­–ç•¥2] - [è°ƒæ•´åŸå› ] - [æ–°æ–¹æ³•]

é‡ç‚¹æå‡é¢†åŸŸï¼š
â€¢ [é¢†åŸŸ1] - [å…·ä½“è¡ŒåŠ¨è®¡åˆ’]
â€¢ [é¢†åŸŸ2] - [å…·ä½“è¡ŒåŠ¨è®¡åˆ’]

èµ„æºéœ€æ±‚ï¼š
â€¢ äººå‘˜éœ€æ±‚ï¼š[å…·ä½“éœ€æ±‚]
â€¢ å·¥å…·/ç³»ç»Ÿéœ€æ±‚ï¼š[å…·ä½“éœ€æ±‚]
â€¢ åŸ¹è®­éœ€æ±‚ï¼š[å…·ä½“éœ€æ±‚]`
                },
                result_focused: {
                    name: "æˆæœå¯¼å‘æ¨¡æ¿",
                    content: `ğŸ“Š **æ ¸å¿ƒæŒ‡æ ‡è¾¾æˆæƒ…å†µ**

ä¸šåŠ¡æŒ‡æ ‡ï¼š
â€¢ [æŒ‡æ ‡1]: ç›®æ ‡å€¼ vs å®é™…å€¼ - [è¾¾æˆç‡%]
â€¢ [æŒ‡æ ‡2]: ç›®æ ‡å€¼ vs å®é™…å€¼ - [è¾¾æˆç‡%]
â€¢ [æŒ‡æ ‡3]: ç›®æ ‡å€¼ vs å®é™…å€¼ - [è¾¾æˆç‡%]

è´¨é‡æŒ‡æ ‡ï¼š
â€¢ [è´¨é‡æŒ‡æ ‡1]: [å®é™…è¡¨ç°]
â€¢ [è´¨é‡æŒ‡æ ‡2]: [å®é™…è¡¨ç°]

ğŸ¯ **å…³é”®æˆæœè¯¦è¿°**

æœ€é‡è¦çš„3ä¸ªæˆæœï¼š
1. [æˆæœåç§°]
   â€¢ èƒŒæ™¯ï¼š[ä¸ºä»€ä¹ˆé‡è¦]
   â€¢ è¿‡ç¨‹ï¼š[å¦‚ä½•å®ç°]
   â€¢ å½±å“ï¼š[å¸¦æ¥çš„ä»·å€¼]
   â€¢ æ•°æ®ï¼š[å…·ä½“æ•°æ®æ”¯æ’‘]

2. [æˆæœåç§°]
   â€¢ èƒŒæ™¯ï¼š[ä¸ºä»€ä¹ˆé‡è¦]
   â€¢ è¿‡ç¨‹ï¼š[å¦‚ä½•å®ç°]
   â€¢ å½±å“ï¼š[å¸¦æ¥çš„ä»·å€¼]
   â€¢ æ•°æ®ï¼š[å…·ä½“æ•°æ®æ”¯æ’‘]

3. [æˆæœåç§°]
   â€¢ èƒŒæ™¯ï¼š[ä¸ºä»€ä¹ˆé‡è¦]
   â€¢ è¿‡ç¨‹ï¼š[å¦‚ä½•å®ç°]
   â€¢ å½±å“ï¼š[å¸¦æ¥çš„ä»·å€¼]
   â€¢ æ•°æ®ï¼š[å…·ä½“æ•°æ®æ”¯æ’‘]

ğŸ’¡ **æˆåŠŸå› ç´ åˆ†æ**

å…³é”®æˆåŠŸè¦ç´ ï¼š
â€¢ [è¦ç´ 1] - [ä¸ºä»€ä¹ˆæ˜¯å…³é”®å› ç´ ]
â€¢ [è¦ç´ 2] - [ä¸ºä»€ä¹ˆæ˜¯å…³é”®å› ç´ ]
â€¢ [è¦ç´ 3] - [ä¸ºä»€ä¹ˆæ˜¯å…³é”®å› ç´ ]

å¯å¤ç”¨çš„æ–¹æ³•ï¼š
â€¢ [æ–¹æ³•1] - [åº”ç”¨åœºæ™¯]
â€¢ [æ–¹æ³•2] - [åº”ç”¨åœºæ™¯]

âš ï¸ **é£é™©ç®¡æ§æ€»ç»“**

å·²è§„é¿çš„é£é™©ï¼š
â€¢ [é£é™©1] - [è§„é¿æªæ–½] - [æ•ˆæœ]
â€¢ [é£é™©2] - [è§„é¿æªæ–½] - [æ•ˆæœ]

æ–°è¯†åˆ«çš„é£é™©ï¼š
â€¢ [æ–°é£é™©1] - [å½±å“è¯„ä¼°] - [åº”å¯¹è®¡åˆ’]
â€¢ [æ–°é£é™©2] - [å½±å“è¯„ä¼°] - [åº”å¯¹è®¡åˆ’]

ğŸš€ **ä»·å€¼åˆ›é€ æ€»ç»“**

å¯¹ä¸šåŠ¡çš„ä»·å€¼ï¼š
â€¢ [ä»·å€¼1] - [é‡åŒ–æè¿°]
â€¢ [ä»·å€¼2] - [é‡åŒ–æè¿°]

å¯¹å›¢é˜Ÿçš„ä»·å€¼ï¼š
â€¢ [ä»·å€¼1] - [å…·ä½“ä½“ç°]
â€¢ [ä»·å€¼2] - [å…·ä½“ä½“ç°]

å¯¹ä¸ªäººçš„ä»·å€¼ï¼š
â€¢ [ä»·å€¼1] - [æˆé•¿ä½“ç°]
â€¢ [ä»·å€¼2] - [æˆé•¿ä½“ç°]`
                },
                learning_focused: {
                    name: "å­¦ä¹ åæ€æ¨¡æ¿",
                    content: `ğŸ§  **å…³é”®å­¦ä¹ å’Œæ´å¯Ÿ**

ä¸šåŠ¡ç†è§£æ·±åŒ–ï¼š
â€¢ [æ´å¯Ÿ1] - [å¦‚ä½•è·å¾—] - [å¯¹æœªæ¥çš„æŒ‡å¯¼æ„ä¹‰]
â€¢ [æ´å¯Ÿ2] - [å¦‚ä½•è·å¾—] - [å¯¹æœªæ¥çš„æŒ‡å¯¼æ„ä¹‰]
â€¢ [æ´å¯Ÿ3] - [å¦‚ä½•è·å¾—] - [å¯¹æœªæ¥çš„æŒ‡å¯¼æ„ä¹‰]

å¸‚åœº/ç”¨æˆ·æ´å¯Ÿï¼š
â€¢ [å¸‚åœºæ´å¯Ÿ] - [æ•°æ®æ¥æº] - [æˆ˜ç•¥æ„ä¹‰]
â€¢ [ç”¨æˆ·æ´å¯Ÿ] - [è°ƒç ”æ–¹æ³•] - [äº§å“ä¼˜åŒ–æ–¹å‘]

ğŸ“š **æŠ€èƒ½å’Œèƒ½åŠ›æå‡**

æ–°æŒæ¡çš„æŠ€èƒ½ï¼š
â€¢ [æŠ€èƒ½1] - [å­¦ä¹ æ–¹å¼] - [åº”ç”¨åœºæ™¯] - [ç†Ÿç»ƒåº¦]
â€¢ [æŠ€èƒ½2] - [å­¦ä¹ æ–¹å¼] - [åº”ç”¨åœºæ™¯] - [ç†Ÿç»ƒåº¦]
â€¢ [æŠ€èƒ½3] - [å­¦ä¹ æ–¹å¼] - [åº”ç”¨åœºæ™¯] - [ç†Ÿç»ƒåº¦]

èƒ½åŠ›æå‡é¢†åŸŸï¼š
â€¢ åˆ†æèƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]
â€¢ å†³ç­–èƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]
â€¢ æ²Ÿé€šèƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]
â€¢ ç®¡ç†èƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]

ğŸ”„ **æœ€ä½³å®è·µæ€»ç»“**

æˆåŠŸçš„åšæ³•ï¼š
â€¢ [å®è·µ1] - [åº”ç”¨åœºæ™¯] - [æ•ˆæœ] - [æ¨å¹¿ä»·å€¼]
â€¢ [å®è·µ2] - [åº”ç”¨åœºæ™¯] - [æ•ˆæœ] - [æ¨å¹¿ä»·å€¼]
â€¢ [å®è·µ3] - [åº”ç”¨åœºæ™¯] - [æ•ˆæœ] - [æ¨å¹¿ä»·å€¼]

å¯ä¼˜åŒ–çš„æµç¨‹ï¼š
â€¢ [æµç¨‹1] - [å½“å‰é—®é¢˜] - [æ”¹è¿›æ–¹æ¡ˆ]
â€¢ [æµç¨‹2] - [å½“å‰é—®é¢˜] - [æ”¹è¿›æ–¹æ¡ˆ]

âŒ **å¤±è´¥ç»éªŒå’Œæ•™è®­**

å¤±è´¥æ¡ˆä¾‹åˆ†æï¼š
â€¢ [å¤±è´¥æ¡ˆä¾‹1]
  - å¤±è´¥åŸå› ï¼š[æ ¹æœ¬åŸå› åˆ†æ]
  - æ•™è®­ï¼š[æ ¸å¿ƒæ•™è®­]
  - é¢„é˜²æªæ–½ï¼š[æœªæ¥å¦‚ä½•é¿å…]

â€¢ [å¤±è´¥æ¡ˆä¾‹2]
  - å¤±è´¥åŸå› ï¼š[æ ¹æœ¬åŸå› åˆ†æ]
  - æ•™è®­ï¼š[æ ¸å¿ƒæ•™è®­]
  - é¢„é˜²æªæ–½ï¼š[æœªæ¥å¦‚ä½•é¿å…]

é¿å‘æŒ‡å—ï¼š
â€¢ [å‘ç‚¹1] - [è¯†åˆ«æ–¹æ³•] - [é¿å…ç­–ç•¥]
â€¢ [å‘ç‚¹2] - [è¯†åˆ«æ–¹æ³•] - [é¿å…ç­–ç•¥]

ğŸ”® **æœªæ¥å±•æœ›å’Œè§„åˆ’**

è¶‹åŠ¿åˆ¤æ–­ï¼š
â€¢ [è¶‹åŠ¿1] - [åˆ¤æ–­ä¾æ®] - [å¯¹ç­–]
â€¢ [è¶‹åŠ¿2] - [åˆ¤æ–­ä¾æ®] - [å¯¹ç­–]

èƒ½åŠ›å»ºè®¾é‡ç‚¹ï¼š
â€¢ [èƒ½åŠ›1] - [é‡è¦æ€§] - [å»ºè®¾è®¡åˆ’]
â€¢ [èƒ½åŠ›2] - [é‡è¦æ€§] - [å»ºè®¾è®¡åˆ’]

çŸ¥è¯†ä½“ç³»å®Œå–„ï¼š
â€¢ [çŸ¥è¯†é¢†åŸŸ1] - [å­¦ä¹ è®¡åˆ’] - [æ—¶é—´å®‰æ’]
â€¢ [çŸ¥è¯†é¢†åŸŸ2] - [å­¦ä¹ è®¡åˆ’] - [æ—¶é—´å®‰æ’]`
                },
                team_focused: {
                    name: "å›¢é˜Ÿåä½œæ¨¡æ¿",
                    content: `ğŸ‘¥ **å›¢é˜Ÿè¡¨ç°è¯„ä¼°**

å›¢é˜Ÿæ•´ä½“è¡¨ç°ï¼š
â€¢ ç›®æ ‡è¾¾æˆç‡ï¼š[ç™¾åˆ†æ¯”] - [å…·ä½“æŒ‡æ ‡]
â€¢ åä½œæ•ˆç‡ï¼š[è¯„åˆ†] - [æ”¹è¿›å¹…åº¦]
â€¢ å›¢é˜Ÿæ»¡æ„åº¦ï¼š[è¯„åˆ†] - [è°ƒç ”ç»“æœ]

ä¸ªäººè´¡çŒ®äº®ç‚¹ï¼š
â€¢ [æˆå‘˜1]: [ä¸»è¦è´¡çŒ®] - [äº®ç‚¹è¡¨ç°]
â€¢ [æˆå‘˜2]: [ä¸»è¦è´¡çŒ®] - [äº®ç‚¹è¡¨ç°]
â€¢ [æˆå‘˜3]: [ä¸»è¦è´¡çŒ®] - [äº®ç‚¹è¡¨ç°]

ğŸ¤ **åä½œæœºåˆ¶ä¼˜åŒ–**

æ²Ÿé€šæ”¹è¿›ï¼š
â€¢ ä¼šè®®æ•ˆç‡ï¼š[æ”¹è¿›æªæ–½] - [æ•ˆæœ]
â€¢ ä¿¡æ¯åŒæ­¥ï¼š[æ–°æœºåˆ¶] - [æ•ˆæœ]
â€¢ è·¨éƒ¨é—¨åä½œï¼š[ä¼˜åŒ–æ–¹æ¡ˆ] - [æ•ˆæœ]

å·¥ä½œæµç¨‹ä¼˜åŒ–ï¼š
â€¢ [æµç¨‹1]: [åŸé—®é¢˜] â†’ [æ”¹è¿›æ–¹æ¡ˆ] â†’ [æ–°æ•ˆæœ]
â€¢ [æµç¨‹2]: [åŸé—®é¢˜] â†’ [æ”¹è¿›æ–¹æ¡ˆ] â†’ [æ–°æ•ˆæœ]

å·¥å…·å’Œæ–¹æ³•ï¼š
â€¢ æ–°å¼•å…¥å·¥å…·ï¼š[å·¥å…·å] - [è§£å†³é—®é¢˜] - [ä½¿ç”¨æ•ˆæœ]
â€¢ æ–¹æ³•ä¼˜åŒ–ï¼š[æ–¹æ³•å] - [æ”¹è¿›å†…å®¹] - [æ•ˆç‡æå‡]

ğŸŒ± **å›¢é˜Ÿæˆé•¿å’Œå‘å±•**

æŠ€èƒ½å»ºè®¾ï¼š
â€¢ å›¢é˜ŸåŸ¹è®­ï¼š[åŸ¹è®­å†…å®¹] - [å‚ä¸åº¦] - [åº”ç”¨æ•ˆæœ]
â€¢ çŸ¥è¯†åˆ†äº«ï¼š[åˆ†äº«æ¬¡æ•°] - [ä¸»é¢˜] - [æ”¶ç›Š]
â€¢ å®è·µç»ƒä¹ ï¼š[ç»ƒä¹ é¡¹ç›®] - [æŠ€èƒ½æå‡]

æ–‡åŒ–å»ºè®¾ï¼š
â€¢ ä»·å€¼è§‚ä½“ç°ï¼š[å…·ä½“æ¡ˆä¾‹] - [å›¢é˜Ÿè®¤åŒåº¦]
â€¢ å­¦ä¹ æ°›å›´ï¼š[è¥é€ æªæ–½] - [æ•ˆæœè¡¨ç°]
â€¢ åˆ›æ–°é¼“åŠ±ï¼š[æ¿€åŠ±æœºåˆ¶] - [åˆ›æ–°æˆæœ]

âš¡ **å›¢é˜Ÿæ•ˆèƒ½åˆ†æ**

æ•ˆç‡æŒ‡æ ‡ï¼š
â€¢ ä»»åŠ¡å®Œæˆé€Ÿåº¦ï¼š[å¯¹æ¯”æ•°æ®]
â€¢ è´¨é‡æ°´å¹³ï¼š[è´¨é‡æŒ‡æ ‡]
â€¢ å“åº”é€Ÿåº¦ï¼š[å“åº”æ—¶é—´æ”¹è¿›]

åä½œè´¨é‡ï¼š
â€¢ å†…éƒ¨é…åˆï¼š[é…åˆæ•ˆæœè¯„ä¼°]
â€¢ å¤–éƒ¨åä½œï¼š[è·¨å›¢é˜Ÿåä½œæ•ˆæœ]
â€¢ å†²çªå¤„ç†ï¼š[å†²çªè§£å†³æ•ˆç‡]

ğŸ¯ **å›¢é˜Ÿå»ºè®¾è§„åˆ’**

çŸ­æœŸæ”¹è¿›è®¡åˆ’ï¼š
â€¢ [æ”¹è¿›ç‚¹1] - [å…·ä½“æªæ–½] - [é¢„æœŸæ•ˆæœ] - [æ—¶é—´å®‰æ’]
â€¢ [æ”¹è¿›ç‚¹2] - [å…·ä½“æªæ–½] - [é¢„æœŸæ•ˆæœ] - [æ—¶é—´å®‰æ’]

é•¿æœŸå‘å±•ç›®æ ‡ï¼š
â€¢ å›¢é˜Ÿèƒ½åŠ›ç›®æ ‡ï¼š[èƒ½åŠ›æ–¹å‘] - [å»ºè®¾è·¯å¾„]
â€¢ æ–‡åŒ–å»ºè®¾ç›®æ ‡ï¼š[æ–‡åŒ–ç‰¹è‰²] - [åŸ¹å…»æ–¹æ³•]

äººå‘˜å‘å±•è®¡åˆ’ï¼š
â€¢ [æˆå‘˜1]: [å‘å±•æ–¹å‘] - [æ”¯æŒæªæ–½]
â€¢ [æˆå‘˜2]: [å‘å±•æ–¹å‘] - [æ”¯æŒæªæ–½]
â€¢ [æˆå‘˜3]: [å‘å±•æ–¹å‘] - [æ”¯æŒæªæ–½]`
                }
            };

            const template = templates[templateKey];
            if (!template) return;

            const content = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--theme-color); margin-bottom: 16px;">${template.name} - è¯¦ç»†é¢„è§ˆ</h4>
                </div>

                <div style="max-height: 600px; overflow-y: auto; background: rgba(248, 249, 250, 1); padding: 20px; border-radius: 12px; border: 1px solid #e0e0e0;">
                    <pre style="white-space: pre-wrap; font-family: 'Microsoft YaHei', Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; font-size: 14px;">${template.content}</pre>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-main" onclick="closeModal(); applyReviewTemplate('${templateKey}')" style="margin-right: 12px;">âœ… åº”ç”¨æ­¤æ¨¡æ¿</button>
                    <button class="btn-main" onclick="closeModal()">å…³é—­</button>
                </div>
            `;

            ModalUtils.show(`${template.name} - é¢„è§ˆ`, content, 'large');
        }

        // åº”ç”¨å›é¡¾æ¨¡æ¿
        function applyReviewTemplate(templateKey) {
            const templates = {
                comprehensive: `ğŸ¯ **OKRå®Œæˆæƒ…å†µè¯„ä¼°**

ç›®æ ‡å®Œæˆåº¦ï¼š
â€¢ ç›®æ ‡1: [å®Œæˆåº¦%] - [å…·ä½“æè¿°å®Œæˆæƒ…å†µ]
â€¢ ç›®æ ‡2: [å®Œæˆåº¦%] - [å…·ä½“æè¿°å®Œæˆæƒ…å†µ]
â€¢ ç›®æ ‡3: [å®Œæˆåº¦%] - [å…·ä½“æè¿°å®Œæˆæƒ…å†µ]

å…³é”®ç»“æœè¾¾æˆï¼š
â€¢ KR1: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]
â€¢ KR2: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]
â€¢ KR3: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]

ğŸ† **é‡è¦æˆæœå’Œçªç ´**

æ ¸å¿ƒæˆæœï¼š
â€¢ [æˆæœ1] - [å…·ä½“æ•°æ®å’Œå½±å“]
â€¢ [æˆæœ2] - [å…·ä½“æ•°æ®å’Œå½±å“]
â€¢ [æˆæœ3] - [å…·ä½“æ•°æ®å’Œå½±å“]

æ„å¤–æ”¶è·ï¼š
â€¢ [æ”¶è·1] - [å¯¹ä¸šåŠ¡çš„ç§¯æå½±å“]
â€¢ [æ”¶è·2] - [å¯¹å›¢é˜Ÿçš„ç§¯æå½±å“]

ğŸ› ï¸ **é‡åˆ°çš„æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆ**

ä¸»è¦æŒ‘æˆ˜ï¼š
â€¢ æŒ‘æˆ˜1: [é—®é¢˜æè¿°] â†’ [è§£å†³æ–¹æ¡ˆ] â†’ [ç»“æœ]
â€¢ æŒ‘æˆ˜2: [é—®é¢˜æè¿°] â†’ [è§£å†³æ–¹æ¡ˆ] â†’ [ç»“æœ]
â€¢ æŒ‘æˆ˜3: [é—®é¢˜æè¿°] â†’ [è§£å†³æ–¹æ¡ˆ] â†’ [ç»“æœ]

æœªå®Œå…¨è§£å†³çš„é—®é¢˜ï¼š
â€¢ [é—®é¢˜æè¿°] - [å½“å‰çŠ¶æ€] - [ä¸‹æ­¥è®¡åˆ’]

ğŸ‘¥ **å›¢é˜Ÿåä½œå’Œä¸ªäººæˆé•¿**

å›¢é˜Ÿåä½œï¼š
â€¢ å›¢é˜Ÿæ•ˆç‡æå‡ï¼š[å…·ä½“æ”¹è¿›]
â€¢ æ²Ÿé€šæœºåˆ¶ä¼˜åŒ–ï¼š[å…·ä½“å˜åŒ–]
â€¢ å›¢é˜Ÿèƒ½åŠ›å»ºè®¾ï¼š[åŸ¹è®­/å­¦ä¹ æˆæœ]

ä¸ªäººæˆé•¿ï¼š
â€¢ æ–°æŒæ¡çš„æŠ€èƒ½ï¼š[æŠ€èƒ½åˆ—è¡¨]
â€¢ é¢†å¯¼åŠ›æå‡ï¼š[å…·ä½“ä½“ç°]
â€¢ ä¸ªäººæ•ˆç‡æ”¹è¿›ï¼š[æ–¹æ³•å’Œæ•ˆæœ]

ğŸ“ˆ **ä¸‹å­£åº¦æ”¹è¿›è®¡åˆ’**

éœ€è¦è°ƒæ•´çš„ç­–ç•¥ï¼š
â€¢ [ç­–ç•¥1] - [è°ƒæ•´åŸå› ] - [æ–°æ–¹æ³•]
â€¢ [ç­–ç•¥2] - [è°ƒæ•´åŸå› ] - [æ–°æ–¹æ³•]

é‡ç‚¹æå‡é¢†åŸŸï¼š
â€¢ [é¢†åŸŸ1] - [å…·ä½“è¡ŒåŠ¨è®¡åˆ’]
â€¢ [é¢†åŸŸ2] - [å…·ä½“è¡ŒåŠ¨è®¡åˆ’]

èµ„æºéœ€æ±‚ï¼š
â€¢ äººå‘˜éœ€æ±‚ï¼š[å…·ä½“éœ€æ±‚]
â€¢ å·¥å…·/ç³»ç»Ÿéœ€æ±‚ï¼š[å…·ä½“éœ€æ±‚]
â€¢ åŸ¹è®­éœ€æ±‚ï¼š[å…·ä½“éœ€æ±‚]`,

                result_focused: `ğŸ“Š **æ ¸å¿ƒæŒ‡æ ‡è¾¾æˆæƒ…å†µ**

ä¸šåŠ¡æŒ‡æ ‡ï¼š
â€¢ [æŒ‡æ ‡1]: ç›®æ ‡å€¼ vs å®é™…å€¼ - [è¾¾æˆç‡%]
â€¢ [æŒ‡æ ‡2]: ç›®æ ‡å€¼ vs å®é™…å€¼ - [è¾¾æˆç‡%]
â€¢ [æŒ‡æ ‡3]: ç›®æ ‡å€¼ vs å®é™…å€¼ - [è¾¾æˆç‡%]

è´¨é‡æŒ‡æ ‡ï¼š
â€¢ [è´¨é‡æŒ‡æ ‡1]: [å®é™…è¡¨ç°]
â€¢ [è´¨é‡æŒ‡æ ‡2]: [å®é™…è¡¨ç°]

ğŸ¯ **å…³é”®æˆæœè¯¦è¿°**

æœ€é‡è¦çš„3ä¸ªæˆæœï¼š
1. [æˆæœåç§°]
   â€¢ èƒŒæ™¯ï¼š[ä¸ºä»€ä¹ˆé‡è¦]
   â€¢ è¿‡ç¨‹ï¼š[å¦‚ä½•å®ç°]
   â€¢ å½±å“ï¼š[å¸¦æ¥çš„ä»·å€¼]
   â€¢ æ•°æ®ï¼š[å…·ä½“æ•°æ®æ”¯æ’‘]

2. [æˆæœåç§°]
   â€¢ èƒŒæ™¯ï¼š[ä¸ºä»€ä¹ˆé‡è¦]
   â€¢ è¿‡ç¨‹ï¼š[å¦‚ä½•å®ç°]
   â€¢ å½±å“ï¼š[å¸¦æ¥çš„ä»·å€¼]
   â€¢ æ•°æ®ï¼š[å…·ä½“æ•°æ®æ”¯æ’‘]

3. [æˆæœåç§°]
   â€¢ èƒŒæ™¯ï¼š[ä¸ºä»€ä¹ˆé‡è¦]
   â€¢ è¿‡ç¨‹ï¼š[å¦‚ä½•å®ç°]
   â€¢ å½±å“ï¼š[å¸¦æ¥çš„ä»·å€¼]
   â€¢ æ•°æ®ï¼š[å…·ä½“æ•°æ®æ”¯æ’‘]

ğŸ’¡ **æˆåŠŸå› ç´ åˆ†æ**

å…³é”®æˆåŠŸè¦ç´ ï¼š
â€¢ [è¦ç´ 1] - [ä¸ºä»€ä¹ˆæ˜¯å…³é”®å› ç´ ]
â€¢ [è¦ç´ 2] - [ä¸ºä»€ä¹ˆæ˜¯å…³é”®å› ç´ ]
â€¢ [è¦ç´ 3] - [ä¸ºä»€ä¹ˆæ˜¯å…³é”®å› ç´ ]

å¯å¤ç”¨çš„æ–¹æ³•ï¼š
â€¢ [æ–¹æ³•1] - [åº”ç”¨åœºæ™¯]
â€¢ [æ–¹æ³•2] - [åº”ç”¨åœºæ™¯]

âš ï¸ **é£é™©ç®¡æ§æ€»ç»“**

å·²è§„é¿çš„é£é™©ï¼š
â€¢ [é£é™©1] - [è§„é¿æªæ–½] - [æ•ˆæœ]
â€¢ [é£é™©2] - [è§„é¿æªæ–½] - [æ•ˆæœ]

æ–°è¯†åˆ«çš„é£é™©ï¼š
â€¢ [æ–°é£é™©1] - [å½±å“è¯„ä¼°] - [åº”å¯¹è®¡åˆ’]
â€¢ [æ–°é£é™©2] - [å½±å“è¯„ä¼°] - [åº”å¯¹è®¡åˆ’]

ğŸš€ **ä»·å€¼åˆ›é€ æ€»ç»“**

å¯¹ä¸šåŠ¡çš„ä»·å€¼ï¼š
â€¢ [ä»·å€¼1] - [é‡åŒ–æè¿°]
â€¢ [ä»·å€¼2] - [é‡åŒ–æè¿°]

å¯¹å›¢é˜Ÿçš„ä»·å€¼ï¼š
â€¢ [ä»·å€¼1] - [å…·ä½“ä½“ç°]
â€¢ [ä»·å€¼2] - [å…·ä½“ä½“ç°]

å¯¹ä¸ªäººçš„ä»·å€¼ï¼š
â€¢ [ä»·å€¼1] - [æˆé•¿ä½“ç°]
â€¢ [ä»·å€¼2] - [æˆé•¿ä½“ç°]`,

                learning_focused: `ğŸ§  **å…³é”®å­¦ä¹ å’Œæ´å¯Ÿ**

ä¸šåŠ¡ç†è§£æ·±åŒ–ï¼š
â€¢ [æ´å¯Ÿ1] - [å¦‚ä½•è·å¾—] - [å¯¹æœªæ¥çš„æŒ‡å¯¼æ„ä¹‰]
â€¢ [æ´å¯Ÿ2] - [å¦‚ä½•è·å¾—] - [å¯¹æœªæ¥çš„æŒ‡å¯¼æ„ä¹‰]
â€¢ [æ´å¯Ÿ3] - [å¦‚ä½•è·å¾—] - [å¯¹æœªæ¥çš„æŒ‡å¯¼æ„ä¹‰]

å¸‚åœº/ç”¨æˆ·æ´å¯Ÿï¼š
â€¢ [å¸‚åœºæ´å¯Ÿ] - [æ•°æ®æ¥æº] - [æˆ˜ç•¥æ„ä¹‰]
â€¢ [ç”¨æˆ·æ´å¯Ÿ] - [è°ƒç ”æ–¹æ³•] - [äº§å“ä¼˜åŒ–æ–¹å‘]

ğŸ“š **æŠ€èƒ½å’Œèƒ½åŠ›æå‡**

æ–°æŒæ¡çš„æŠ€èƒ½ï¼š
â€¢ [æŠ€èƒ½1] - [å­¦ä¹ æ–¹å¼] - [åº”ç”¨åœºæ™¯] - [ç†Ÿç»ƒåº¦]
â€¢ [æŠ€èƒ½2] - [å­¦ä¹ æ–¹å¼] - [åº”ç”¨åœºæ™¯] - [ç†Ÿç»ƒåº¦]
â€¢ [æŠ€èƒ½3] - [å­¦ä¹ æ–¹å¼] - [åº”ç”¨åœºæ™¯] - [ç†Ÿç»ƒåº¦]

èƒ½åŠ›æå‡é¢†åŸŸï¼š
â€¢ åˆ†æèƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]
â€¢ å†³ç­–èƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]
â€¢ æ²Ÿé€šèƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]
â€¢ ç®¡ç†èƒ½åŠ›ï¼š[å…·ä½“æå‡] - [è¯æ®/æ¡ˆä¾‹]

ğŸ”„ **æœ€ä½³å®è·µæ€»ç»“**

æˆåŠŸçš„åšæ³•ï¼š
â€¢ [å®è·µ1] - [åº”ç”¨åœºæ™¯] - [æ•ˆæœ] - [æ¨å¹¿ä»·å€¼]
â€¢ [å®è·µ2] - [åº”ç”¨åœºæ™¯] - [æ•ˆæœ] - [æ¨å¹¿ä»·å€¼]
â€¢ [å®è·µ3] - [åº”ç”¨åœºæ™¯] - [æ•ˆæœ] - [æ¨å¹¿ä»·å€¼]

å¯ä¼˜åŒ–çš„æµç¨‹ï¼š
â€¢ [æµç¨‹1] - [å½“å‰é—®é¢˜] - [æ”¹è¿›æ–¹æ¡ˆ]
â€¢ [æµç¨‹2] - [å½“å‰é—®é¢˜] - [æ”¹è¿›æ–¹æ¡ˆ]

âŒ **å¤±è´¥ç»éªŒå’Œæ•™è®­**

å¤±è´¥æ¡ˆä¾‹åˆ†æï¼š
â€¢ [å¤±è´¥æ¡ˆä¾‹1]
  - å¤±è´¥åŸå› ï¼š[æ ¹æœ¬åŸå› åˆ†æ]
  - æ•™è®­ï¼š[æ ¸å¿ƒæ•™è®­]
  - é¢„é˜²æªæ–½ï¼š[æœªæ¥å¦‚ä½•é¿å…]

â€¢ [å¤±è´¥æ¡ˆä¾‹2]
  - å¤±è´¥åŸå› ï¼š[æ ¹æœ¬åŸå› åˆ†æ]
  - æ•™è®­ï¼š[æ ¸å¿ƒæ•™è®­]
  - é¢„é˜²æªæ–½ï¼š[æœªæ¥å¦‚ä½•é¿å…]

é¿å‘æŒ‡å—ï¼š
â€¢ [å‘ç‚¹1] - [è¯†åˆ«æ–¹æ³•] - [é¿å…ç­–ç•¥]
â€¢ [å‘ç‚¹2] - [è¯†åˆ«æ–¹æ³•] - [é¿å…ç­–ç•¥]

ğŸ”® **æœªæ¥å±•æœ›å’Œè§„åˆ’**

è¶‹åŠ¿åˆ¤æ–­ï¼š
â€¢ [è¶‹åŠ¿1] - [åˆ¤æ–­ä¾æ®] - [å¯¹ç­–]
â€¢ [è¶‹åŠ¿2] - [åˆ¤æ–­ä¾æ®] - [å¯¹ç­–]

èƒ½åŠ›å»ºè®¾é‡ç‚¹ï¼š
â€¢ [èƒ½åŠ›1] - [é‡è¦æ€§] - [å»ºè®¾è®¡åˆ’]
â€¢ [èƒ½åŠ›2] - [é‡è¦æ€§] - [å»ºè®¾è®¡åˆ’]

çŸ¥è¯†ä½“ç³»å®Œå–„ï¼š
â€¢ [çŸ¥è¯†é¢†åŸŸ1] - [å­¦ä¹ è®¡åˆ’] - [æ—¶é—´å®‰æ’]
â€¢ [çŸ¥è¯†é¢†åŸŸ2] - [å­¦ä¹ è®¡åˆ’] - [æ—¶é—´å®‰æ’]`,

                team_focused: `ğŸ‘¥ **å›¢é˜Ÿè¡¨ç°è¯„ä¼°**

å›¢é˜Ÿæ•´ä½“è¡¨ç°ï¼š
â€¢ ç›®æ ‡è¾¾æˆç‡ï¼š[ç™¾åˆ†æ¯”] - [å…·ä½“æŒ‡æ ‡]
â€¢ åä½œæ•ˆç‡ï¼š[è¯„åˆ†] - [æ”¹è¿›å¹…åº¦]
â€¢ å›¢é˜Ÿæ»¡æ„åº¦ï¼š[è¯„åˆ†] - [è°ƒç ”ç»“æœ]

ä¸ªäººè´¡çŒ®äº®ç‚¹ï¼š
â€¢ [æˆå‘˜1]: [ä¸»è¦è´¡çŒ®] - [äº®ç‚¹è¡¨ç°]
â€¢ [æˆå‘˜2]: [ä¸»è¦è´¡çŒ®] - [äº®ç‚¹è¡¨ç°]
â€¢ [æˆå‘˜3]: [ä¸»è¦è´¡çŒ®] - [äº®ç‚¹è¡¨ç°]

ğŸ¤ **åä½œæœºåˆ¶ä¼˜åŒ–**

æ²Ÿé€šæ”¹è¿›ï¼š
â€¢ ä¼šè®®æ•ˆç‡ï¼š[æ”¹è¿›æªæ–½] - [æ•ˆæœ]
â€¢ ä¿¡æ¯åŒæ­¥ï¼š[æ–°æœºåˆ¶] - [æ•ˆæœ]
â€¢ è·¨éƒ¨é—¨åä½œï¼š[ä¼˜åŒ–æ–¹æ¡ˆ] - [æ•ˆæœ]

å·¥ä½œæµç¨‹ä¼˜åŒ–ï¼š
â€¢ [æµç¨‹1]: [åŸé—®é¢˜] â†’ [æ”¹è¿›æ–¹æ¡ˆ] â†’ [æ–°æ•ˆæœ]
â€¢ [æµç¨‹2]: [åŸé—®é¢˜] â†’ [æ”¹è¿›æ–¹æ¡ˆ] â†’ [æ–°æ•ˆæœ]

å·¥å…·å’Œæ–¹æ³•ï¼š
â€¢ æ–°å¼•å…¥å·¥å…·ï¼š[å·¥å…·å] - [è§£å†³é—®é¢˜] - [ä½¿ç”¨æ•ˆæœ]
â€¢ æ–¹æ³•ä¼˜åŒ–ï¼š[æ–¹æ³•å] - [æ”¹è¿›å†…å®¹] - [æ•ˆç‡æå‡]

ğŸŒ± **å›¢é˜Ÿæˆé•¿å’Œå‘å±•**

æŠ€èƒ½å»ºè®¾ï¼š
â€¢ å›¢é˜ŸåŸ¹è®­ï¼š[åŸ¹è®­å†…å®¹] - [å‚ä¸åº¦] - [åº”ç”¨æ•ˆæœ]
â€¢ çŸ¥è¯†åˆ†äº«ï¼š[åˆ†äº«æ¬¡æ•°] - [ä¸»é¢˜] - [æ”¶ç›Š]
â€¢ å®è·µç»ƒä¹ ï¼š[ç»ƒä¹ é¡¹ç›®] - [æŠ€èƒ½æå‡]

æ–‡åŒ–å»ºè®¾ï¼š
â€¢ ä»·å€¼è§‚ä½“ç°ï¼š[å…·ä½“æ¡ˆä¾‹] - [å›¢é˜Ÿè®¤åŒåº¦]
â€¢ å­¦ä¹ æ°›å›´ï¼š[è¥é€ æªæ–½] - [æ•ˆæœè¡¨ç°]
â€¢ åˆ›æ–°é¼“åŠ±ï¼š[æ¿€åŠ±æœºåˆ¶] - [åˆ›æ–°æˆæœ]

âš¡ **å›¢é˜Ÿæ•ˆèƒ½åˆ†æ**

æ•ˆç‡æŒ‡æ ‡ï¼š
â€¢ ä»»åŠ¡å®Œæˆé€Ÿåº¦ï¼š[å¯¹æ¯”æ•°æ®]
â€¢ è´¨é‡æ°´å¹³ï¼š[è´¨é‡æŒ‡æ ‡]
â€¢ å“åº”é€Ÿåº¦ï¼š[å“åº”æ—¶é—´æ”¹è¿›]

åä½œè´¨é‡ï¼š
â€¢ å†…éƒ¨é…åˆï¼š[é…åˆæ•ˆæœè¯„ä¼°]
â€¢ å¤–éƒ¨åä½œï¼š[è·¨å›¢é˜Ÿåä½œæ•ˆæœ]
â€¢ å†²çªå¤„ç†ï¼š[å†²çªè§£å†³æ•ˆç‡]

ğŸ¯ **å›¢é˜Ÿå»ºè®¾è§„åˆ’**

çŸ­æœŸæ”¹è¿›è®¡åˆ’ï¼š
â€¢ [æ”¹è¿›ç‚¹1] - [å…·ä½“æªæ–½] - [é¢„æœŸæ•ˆæœ] - [æ—¶é—´å®‰æ’]
â€¢ [æ”¹è¿›ç‚¹2] - [å…·ä½“æªæ–½] - [é¢„æœŸæ•ˆæœ] - [æ—¶é—´å®‰æ’]

é•¿æœŸå‘å±•ç›®æ ‡ï¼š
â€¢ å›¢é˜Ÿèƒ½åŠ›ç›®æ ‡ï¼š[èƒ½åŠ›æ–¹å‘] - [å»ºè®¾è·¯å¾„]
â€¢ æ–‡åŒ–å»ºè®¾ç›®æ ‡ï¼š[æ–‡åŒ–ç‰¹è‰²] - [åŸ¹å…»æ–¹æ³•]

äººå‘˜å‘å±•è®¡åˆ’ï¼š
â€¢ [æˆå‘˜1]: [å‘å±•æ–¹å‘] - [æ”¯æŒæªæ–½]
â€¢ [æˆå‘˜2]: [å‘å±•æ–¹å‘] - [æ”¯æŒæªæ–½]
â€¢ [æˆå‘˜3]: [å‘å±•æ–¹å‘] - [æ”¯æŒæªæ–½]`
            };

            const template = templates[templateKey];
            if (!template) return;

            // åº”ç”¨æ¨¡æ¿åˆ°å­£åº¦å›é¡¾å­—æ®µ
            const reviewField = document.getElementById('quarter_review');
            const currentContent = reviewField.value.trim();
            
            if (currentContent && !confirm('å½“å‰å›é¡¾å†…å®¹å°†è¢«æ›¿æ¢ï¼Œç¡®å®šè¦åº”ç”¨æ¨¡æ¿å—ï¼Ÿ')) {
                return;
            }

            reviewField.value = template;
            MessageUtils.success('å›é¡¾æ¨¡æ¿å·²åº”ç”¨æˆåŠŸï¼');
            
            // å…³é—­æ¨¡æ€æ¡†
            const modal = document.querySelector('.modal-mask');
            if (modal) {
                ModalUtils.hide(modal);
            }
        }

        // æ¸…ç©ºå›é¡¾
        function clearReview() {
            const confirmed = confirm('ç¡®å®šè¦æ¸…ç©ºå­£åº¦å›é¡¾å†…å®¹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚');
            if (!confirmed) return;

            document.getElementById('quarter_review').value = '';
            MessageUtils.success('å­£åº¦å›é¡¾å·²æ¸…ç©º');
            
            // å…³é—­æ¨¡æ€æ¡†
            const modal = document.querySelector('.modal-mask');
            if (modal) {
                ModalUtils.hide(modal);
            }
        }

        // å­£åº¦è®¡åˆ’æ¨¡æ¿æ•°æ®
        const quarterTemplates = {
            okr_focused: {
                name: "ğŸ¯ OKRç›®æ ‡å¯¼å‘",
                description: "åŸºäºOKRæ–¹æ³•è®ºçš„å­£åº¦è®¡åˆ’æ¨¡æ¿",
                data: {
                    objectives: `å­£åº¦æ ¸å¿ƒç›®æ ‡ (Objectives)ï¼š
â€¢ æå‡å›¢é˜Ÿæ•´ä½“å·¥ä½œæ•ˆç‡å’Œåä½œè´¨é‡
â€¢ å¢å¼ºä¸ªäººä¸“ä¸šæŠ€èƒ½å’Œæ ¸å¿ƒç«äº‰åŠ›
â€¢ æ”¹å–„äº§å“ç”¨æˆ·ä½“éªŒå’Œå¸‚åœºè¡¨ç°
â€¢ å»ºç«‹å¯æŒç»­çš„ä¸šåŠ¡å¢é•¿æ¨¡å¼`,
                    keyResults: `[ ] å›¢é˜Ÿé¡¹ç›®æŒ‰æ—¶äº¤ä»˜ç‡è¾¾åˆ°95%ä»¥ä¸Š
[ ] å®Œæˆ3ä¸ªæ ¸å¿ƒæŠ€èƒ½è®¤è¯æˆ–åŸ¹è®­
[ ] ç”¨æˆ·æ»¡æ„åº¦è¯„åˆ†æå‡è‡³4.5åˆ†ä»¥ä¸Š
[ ] å­£åº¦è¥æ”¶å¢é•¿20%æˆ–è¾¾æˆè®¾å®šç›®æ ‡`,
                    month1: `[ ] åˆ¶å®šè¯¦ç»†çš„OKRåˆ†è§£è®¡åˆ’
[ ] å»ºç«‹å›¢é˜Ÿåä½œå’Œæ²Ÿé€šæœºåˆ¶
[ ] å¯åŠ¨æ ¸å¿ƒé¡¹ç›®å’Œå…³é”®ä»»åŠ¡
[ ] å®ŒæˆåŸºç¡€æŠ€èƒ½åŸ¹è®­å’Œå­¦ä¹ `,
                    month2: `[ ] æ¨è¿›å…³é”®é¡¹ç›®åˆ°ä¸­æœŸé‡Œç¨‹ç¢‘
[ ] è¿›è¡ŒOKRä¸­æœŸæ£€æŸ¥å’Œè°ƒæ•´
[ ] å®Œæˆé‡è¦æŠ€èƒ½è®¤è¯æˆ–è€ƒè¯•
[ ] æ”¶é›†ç”¨æˆ·åé¦ˆå¹¶ä¼˜åŒ–äº§å“`,
                    month3: `[ ] å®Œæˆå­£åº¦æ ¸å¿ƒç›®æ ‡
[ ] è¿›è¡ŒOKRæœ€ç»ˆè¯„ä¼°å’Œæ€»ç»“
[ ] å‡†å¤‡ä¸‹å­£åº¦è§„åˆ’å’Œç›®æ ‡è®¾å®š
[ ] æ•´ç†ç»éªŒæ•™è®­å’Œæœ€ä½³å®è·µ`,
                    review: `OKRå­£åº¦å›é¡¾ï¼š

ğŸ¯ **ç›®æ ‡å®Œæˆæƒ…å†µ**
â€¢ ç›®æ ‡1å®Œæˆåº¦ï¼š[%] - [å…·ä½“æè¿°]
â€¢ ç›®æ ‡2å®Œæˆåº¦ï¼š[%] - [å…·ä½“æè¿°]  
â€¢ ç›®æ ‡3å®Œæˆåº¦ï¼š[%] - [å…·ä½“æè¿°]

ğŸ“Š **å…³é”®ç»“æœè¾¾æˆ**
â€¢ KR1: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]
â€¢ KR2: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]
â€¢ KR3: [è¾¾æˆæƒ…å†µ] - [æ•°æ®æ”¯æ’‘]

ğŸ† **é‡è¦æˆæœå’Œçªç ´**
â€¢ [åˆ—å‡ºæœ¬å­£åº¦çš„é‡è¦æˆæœ]

ğŸ¤” **æŒ‘æˆ˜å’Œå­¦ä¹ **
â€¢ [é‡åˆ°çš„ä¸»è¦æŒ‘æˆ˜åŠè§£å†³æ–¹æ¡ˆ]
â€¢ [è·å¾—çš„é‡è¦ç»éªŒå’Œæ•™è®­]

ğŸ“ˆ **ä¸‹å­£åº¦æ”¹è¿›æ–¹å‘**
â€¢ [åŸºäºæœ¬å­£åº¦ç»éªŒçš„æ”¹è¿›è®¡åˆ’]`
                }
            },
            business_growth: {
                name: "ğŸ“ˆ ä¸šåŠ¡å‘å±•æ¨¡æ¿",
                description: "ä¸“æ³¨äºä¸šåŠ¡å¢é•¿å’Œå¸‚åœºæ‹“å±•çš„å­£åº¦è§„åˆ’",
                data: {
                    objectives: `å­£åº¦ä¸šåŠ¡å‘å±•ç›®æ ‡ï¼š
â€¢ æ‰©å¤§å¸‚åœºä»½é¢å’Œå®¢æˆ·åŸºç¡€
â€¢ æå‡äº§å“ç«äº‰åŠ›å’ŒæœåŠ¡è´¨é‡
â€¢ ä¼˜åŒ–ä¸šåŠ¡æµç¨‹å’Œè¿è¥æ•ˆç‡
â€¢ å»ºç«‹å¯æŒç»­çš„ç›ˆåˆ©å¢é•¿æ¨¡å¼`,
                    keyResults: `[ ] æ–°å®¢æˆ·è·å–æ•°é‡å¢é•¿30%
[ ] å®¢æˆ·æ»¡æ„åº¦ä¿æŒåœ¨90%ä»¥ä¸Š
[ ] äº§å“æ ¸å¿ƒåŠŸèƒ½å®Œæˆé‡å¤§å‡çº§
[ ] è¿è¥æˆæœ¬é™ä½15%`,
                    month1: `[ ] åˆ¶å®šå¸‚åœºæ‹“å±•å’Œè¥é”€ç­–ç•¥
[ ] å¯åŠ¨äº§å“æ”¹è¿›å’ŒåŠŸèƒ½å¼€å‘
[ ] å»ºç«‹å®¢æˆ·æœåŠ¡å’Œæ”¯æŒä½“ç³»
[ ] ä¼˜åŒ–ä¸šåŠ¡æµç¨‹å’Œå·¥ä½œæ•ˆç‡`,
                    month2: `[ ] æ‰§è¡Œè¥é”€æ¨å¹¿å’Œå®¢æˆ·è·å–
[ ] æ¨è¿›äº§å“å¼€å‘åˆ°æµ‹è¯•é˜¶æ®µ
[ ] åŠ å¼ºå®¢æˆ·å…³ç³»ç»´æŠ¤å’ŒæœåŠ¡
[ ] åˆ†æä¸šåŠ¡æ•°æ®å¹¶è°ƒæ•´ç­–ç•¥`,
                    month3: `[ ] å®Œæˆå­£åº¦è¥æ”¶å’Œå®¢æˆ·ç›®æ ‡
[ ] å‘å¸ƒäº§å“æ–°ç‰ˆæœ¬æˆ–åŠŸèƒ½
[ ] è¿›è¡Œå­£åº¦ä¸šåŠ¡å›é¡¾å’Œåˆ†æ
[ ] åˆ¶å®šä¸‹å­£åº¦å‘å±•è§„åˆ’`,
                    review: `ä¸šåŠ¡å‘å±•å­£åº¦å›é¡¾ï¼š

ğŸ“Š **ä¸šåŠ¡æŒ‡æ ‡è¾¾æˆæƒ…å†µ**
â€¢ è¥æ”¶å¢é•¿ï¼š[å…·ä½“æ•°æ®å’Œç™¾åˆ†æ¯”]
â€¢ å®¢æˆ·å¢é•¿ï¼š[æ–°å¢å®¢æˆ·æ•°é‡å’Œè´¨é‡]
â€¢ å¸‚åœºä»½é¢ï¼š[å¸‚åœºè¡¨ç°å’Œç«äº‰åœ°ä½]

ğŸ¯ **äº§å“å’ŒæœåŠ¡æ”¹è¿›**
â€¢ [äº§å“åŠŸèƒ½å’Œæ€§èƒ½æå‡]
â€¢ [å®¢æˆ·æœåŠ¡è´¨é‡æ”¹å–„]

ğŸ’¡ **è¿è¥æ•ˆç‡ä¼˜åŒ–**
â€¢ [æµç¨‹æ”¹è¿›å’Œæˆæœ¬æ§åˆ¶æˆæœ]
â€¢ [å›¢é˜Ÿæ•ˆç‡å’Œåä½œæå‡]

ğŸ” **å¸‚åœºæ´å¯Ÿå’Œæœºä¼š**
â€¢ [å¸‚åœºè¶‹åŠ¿åˆ†æå’Œæœºä¼šè¯†åˆ«]
â€¢ [ç«äº‰å¯¹æ‰‹åˆ†æå’Œåº”å¯¹ç­–ç•¥]`
                }
            },
            personal_development: {
                name: "ğŸŒ± ä¸ªäººæˆé•¿æ¨¡æ¿",
                description: "ä¸“æ³¨äºä¸ªäººæŠ€èƒ½æå‡å’ŒèŒä¸šå‘å±•çš„è§„åˆ’",
                data: {
                    objectives: `å­£åº¦ä¸ªäººå‘å±•ç›®æ ‡ï¼š
â€¢ æå‡æ ¸å¿ƒä¸“ä¸šæŠ€èƒ½å’ŒçŸ¥è¯†æ°´å¹³
â€¢ æ‰©å±•èŒä¸šç½‘ç»œå’Œå½±å“åŠ›
â€¢ æ”¹å–„å·¥ä½œæ•ˆç‡å’Œæ—¶é—´ç®¡ç†
â€¢ ä¿æŒèº«å¿ƒå¥åº·å’Œç”Ÿæ´»å¹³è¡¡`,
                    keyResults: `[ ] å®Œæˆ2-3ä¸ªé‡è¦æŠ€èƒ½è®¤è¯æˆ–è¯¾ç¨‹
[ ] å»ºç«‹10ä¸ªä»¥ä¸Šæœ‰ä»·å€¼çš„èŒä¸šè”ç³»
[ ] å·¥ä½œæ•ˆç‡æå‡25%ä»¥ä¸Š
[ ] ä¿æŒæ¯å‘¨3æ¬¡ä»¥ä¸Šçš„è¿åŠ¨ä¹ æƒ¯`,
                    month1: `[ ] åˆ¶å®šè¯¦ç»†çš„å­¦ä¹ å’Œå‘å±•è®¡åˆ’
[ ] å¼€å§‹æ ¸å¿ƒæŠ€èƒ½è¯¾ç¨‹å­¦ä¹ 
[ ] å‚åŠ è¡Œä¸šæ´»åŠ¨å’Œç½‘ç»œå»ºè®¾
[ ] å»ºç«‹å¥åº·çš„ç”Ÿæ´»å’Œå·¥ä½œä¹ æƒ¯`,
                    month2: `[ ] æ·±å…¥å­¦ä¹ ä¸“ä¸šçŸ¥è¯†å’ŒæŠ€èƒ½
[ ] å®Œæˆé‡è¦é¡¹ç›®å’Œå·¥ä½œä»»åŠ¡
[ ] æ‰©å±•äººè„‰ç½‘ç»œå’Œåˆä½œå…³ç³»
[ ] ä¼˜åŒ–æ—¶é—´ç®¡ç†å’Œå·¥ä½œæ–¹æ³•`,
                    month3: `[ ] å®ŒæˆæŠ€èƒ½è®¤è¯å’Œå­¦ä¹ ç›®æ ‡
[ ] æ€»ç»“ä¸ªäººæˆé•¿å’Œèƒ½åŠ›æå‡
[ ] å»ºç«‹é•¿æœŸçš„èŒä¸šå‘å±•è§„åˆ’
[ ] åˆ†äº«ç»éªŒå’Œå¸®åŠ©ä»–äººæˆé•¿`,
                    review: `ä¸ªäººå‘å±•å­£åº¦å›é¡¾ï¼š

ğŸ“š **æŠ€èƒ½å­¦ä¹ å’Œæå‡**
â€¢ [å®Œæˆçš„è¯¾ç¨‹å’Œè®¤è¯]
â€¢ [æŒæ¡çš„æ–°æŠ€èƒ½å’ŒçŸ¥è¯†]
â€¢ [èƒ½åŠ›æå‡çš„å…·ä½“è¡¨ç°]

ğŸ¤ **äººè„‰ç½‘ç»œå»ºè®¾**
â€¢ [å»ºç«‹çš„é‡è¦èŒä¸šè”ç³»]
â€¢ [å‚ä¸çš„è¡Œä¸šæ´»åŠ¨å’Œç¤¾ç¾¤]

âš¡ **æ•ˆç‡å’Œä¹ æƒ¯æ”¹å–„**
â€¢ [å·¥ä½œæ•ˆç‡æå‡çš„å…·ä½“æªæ–½]
â€¢ [å»ºç«‹çš„è‰¯å¥½ä¹ æƒ¯å’Œä½œæ¯]

ğŸ¯ **èŒä¸šå‘å±•è¿›å±•**
â€¢ [èŒä¸šç›®æ ‡çš„æ¨è¿›æƒ…å†µ]
â€¢ [è·å¾—çš„æœºä¼šå’Œè®¤å¯]`
                }
            },
            balanced_life: {
                name: "âš–ï¸ å¹³è¡¡ç”Ÿæ´»æ¨¡æ¿",
                description: "è¿½æ±‚å·¥ä½œç”Ÿæ´»å¹³è¡¡çš„ç»¼åˆå‘å±•è§„åˆ’",
                data: {
                    objectives: `å­£åº¦å¹³è¡¡å‘å±•ç›®æ ‡ï¼š
â€¢ åœ¨å·¥ä½œä¸­å®ç°é‡è¦ç›®æ ‡å’Œçªç ´
â€¢ ä¿æŒèº«å¿ƒå¥åº·å’Œè‰¯å¥½ç”Ÿæ´»çŠ¶æ€
â€¢ ç»´æŠ¤å’Œå‘å±•é‡è¦çš„äººé™…å…³ç³»
â€¢ åŸ¹å…»ä¸ªäººå…´è¶£å’Œç”Ÿæ´»å“è´¨`,
                    keyResults: `[ ] å®Œæˆå·¥ä½œæ ¸å¿ƒç›®æ ‡å’Œé¡¹ç›®
[ ] ä¿æŒæ¯å‘¨3æ¬¡ä»¥ä¸Šè§„å¾‹è¿åŠ¨
[ ] ä¸å®¶äººæœ‹å‹ä¿æŒè‰¯å¥½äº’åŠ¨
[ ] åŸ¹å…»1-2ä¸ªæ–°çš„å…´è¶£çˆ±å¥½`,
                    month1: `[ ] åˆ¶å®šå·¥ä½œå’Œç”Ÿæ´»å¹³è¡¡è®¡åˆ’
[ ] å»ºç«‹å¥åº·çš„ä½œæ¯å’Œè¿åŠ¨ä¹ æƒ¯
[ ] å®‰æ’å®¶åº­å’Œæœ‹å‹èšä¼šæ—¶é—´
[ ] å¼€å§‹æ¢ç´¢æ–°çš„å…´è¶£çˆ±å¥½`,
                    month2: `[ ] æ¨è¿›å·¥ä½œé¡¹ç›®å’Œç›®æ ‡
[ ] åšæŒå¥åº·ç”Ÿæ´»æ–¹å¼
[ ] åŠ å¼ºäººé™…å…³ç³»ç»´æŠ¤
[ ] æ·±å…¥å‘å±•ä¸ªäººå…´è¶£`,
                    month3: `[ ] å®Œæˆå·¥ä½œå­£åº¦ç›®æ ‡
[ ] è¯„ä¼°å¥åº·å’Œç”Ÿæ´»çŠ¶æ€
[ ] æ€»ç»“äººé™…å…³ç³»å‘å±•
[ ] è§„åˆ’ä¸‹å­£åº¦å¹³è¡¡è®¡åˆ’`,
                    review: `å¹³è¡¡ç”Ÿæ´»å­£åº¦å›é¡¾ï¼š

ğŸ’¼ **å·¥ä½œæˆæœè¯„ä¼°**
â€¢ [å·¥ä½œç›®æ ‡å®Œæˆæƒ…å†µ]
â€¢ [èŒä¸šå‘å±•å’Œèƒ½åŠ›æå‡]

ğŸƒ **å¥åº·ç”Ÿæ´»çŠ¶å†µ**
â€¢ [è¿åŠ¨ä¹ æƒ¯å’Œèº«ä½“çŠ¶å†µ]
â€¢ [ä½œæ¯è§„å¾‹å’Œç²¾ç¥çŠ¶æ€]

ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **äººé™…å…³ç³»ç»´æŠ¤**
â€¢ [å®¶åº­å…³ç³»å’Œäº’åŠ¨è´¨é‡]
â€¢ [æœ‹å‹å…³ç³»å’Œç¤¾äº¤æ´»åŠ¨]

ğŸ¨ **ä¸ªäººå…´è¶£å‘å±•**
â€¢ [å…´è¶£çˆ±å¥½çš„åŸ¹å…»æƒ…å†µ]
â€¢ [ç”Ÿæ´»å“è´¨å’Œæ»¡è¶³æ„Ÿ]`
                }
            }
        };

        // æ˜¾ç¤ºå­£åº¦è®¡åˆ’æ¨¡æ¿é€‰æ‹©å™¨
        function showQuarterTemplateSelector() {
            const templateList = Object.keys(quarterTemplates).map(key => {
                const template = quarterTemplates[key];
                return `
                    <div class="template-card" onclick="selectQuarterTemplate('${key}')" style="
                        border: 2px solid #e0e0e0;
                        border-radius: 12px;
                        padding: 16px;
                        margin-bottom: 12px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        background: white;
                    " onmouseover="this.style.borderColor='var(--theme-color)'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.1)';" onmouseout="this.style.borderColor='#e0e0e0'; this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                        <h4 style="margin: 0 0 8px 0; color: var(--theme-color); font-size: 1.1em;">${template.name}</h4>
                        <p style="margin: 0; color: #666; font-size: 0.9em; line-height: 1.4;">${template.description}</p>
                    </div>
                `;
            }).join('');

            const content = `
                <div style="max-height: 500px; overflow-y: auto;">
                    <p style="margin-bottom: 20px; color: #666; text-align: center;">é€‰æ‹©ä¸€ä¸ªé€‚åˆæ‚¨çš„å­£åº¦è®¡åˆ’æ¨¡æ¿ï¼Œå¿«é€Ÿå¼€å§‹åˆ¶å®šè®¡åˆ’</p>
                    ${templateList}
                    <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                        <button class="btn-main" onclick="ModalUtils.hide(document.querySelector('.modal-mask'))" style="background: #666;">å–æ¶ˆ</button>
                    </div>
                </div>
            `;

            ModalUtils.show('é€‰æ‹©å­£åº¦è®¡åˆ’æ¨¡æ¿', content, 'large');
        }

        // é€‰æ‹©å¹¶åº”ç”¨å­£åº¦è®¡åˆ’æ¨¡æ¿
        function selectQuarterTemplate(templateKey) {
            const template = quarterTemplates[templateKey];
            if (!template) {
                MessageUtils.error('æ¨¡æ¿ä¸å­˜åœ¨ï¼');
                return;
            }

            // ç¡®è®¤å¯¹è¯æ¡†
            const confirmContent = `
                <div style="text-align: center; padding: 20px 0;">
                    <div style="font-size: 3em; margin-bottom: 16px;">âš ï¸</div>
                    <h3 style="margin: 0 0 16px 0; color: #f44336;">ç¡®è®¤åº”ç”¨æ¨¡æ¿</h3>
                    <p style="margin-bottom: 20px; color: #666; line-height: 1.6;">
                        åº”ç”¨æ¨¡æ¿ <strong style="color: var(--theme-color);">${template.name}</strong> å°†ä¼šè¦†ç›–å½“å‰é¡µé¢çš„æ‰€æœ‰å†…å®¹ã€‚
                        <br>è¯·ç¡®ä¿æ‚¨å·²ç»ä¿å­˜äº†é‡è¦çš„å†…å®¹ã€‚
                    </p>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button class="btn-main" onclick="applyQuarterTemplate('${templateKey}')" style="background: #f44336;">ç¡®è®¤åº”ç”¨</button>
                        <button class="btn-main" onclick="ModalUtils.hide(document.querySelector('.modal-mask'))" style="background: #666;">å–æ¶ˆ</button>
                    </div>
                </div>
            `;

            ModalUtils.show('ç¡®è®¤åº”ç”¨æ¨¡æ¿', confirmContent, 'medium');
        }

        // åº”ç”¨å­£åº¦è®¡åˆ’æ¨¡æ¿åˆ°é¡µé¢
        function applyQuarterTemplate(templateKey) {
            const template = quarterTemplates[templateKey];
            if (!template) return;

            // å…³é—­æ¨¡æ€æ¡†
            const modal = document.querySelector('.modal-mask');
            if (modal) ModalUtils.hide(modal);

            // åº”ç”¨æ¨¡æ¿å†…å®¹
            document.getElementById('quarter_objectives').value = template.data.objectives;
            document.getElementById('quarter_review').value = template.data.review;

            // åº”ç”¨å¾…åŠäº‹é¡¹æ¨¡æ¿
            applyQuarterTemplateToTodoContainer('quarter_key_results', template.data.keyResults);
            applyQuarterTemplateToTodoContainer('month1_milestones', template.data.month1);
            applyQuarterTemplateToTodoContainer('month2_milestones', template.data.month2);
            applyQuarterTemplateToTodoContainer('month3_milestones', template.data.month3);

            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            MessageUtils.success(`å·²æˆåŠŸåº”ç”¨æ¨¡æ¿ï¼š${template.name}`);

            // è‡ªåŠ¨ä¿å­˜
            setTimeout(() => {
                saveQuarterPlan();
            }, 500);
        }

        // å°†æ¨¡æ¿å†…å®¹åº”ç”¨åˆ°å¾…åŠäº‹é¡¹å®¹å™¨
        function applyQuarterTemplateToTodoContainer(containerId, content) {
            const container = document.getElementById(containerId);
            if (container && content) {
                container.textContent = content;
                TodoUtils.renderTodos(container);
            }
        }
    </script>
    
    <!-- åŒæ­¥æœåŠ¡ -->
    <script src="sync-service.js"></script>
    <script src="sync-providers.js"></script>
    <!-- é€šç”¨è‡ªåŠ¨åŒæ­¥åŠŸèƒ½ -->
    <script src="universal-auto-sync.js"></script>
    <script src="add-ai-to-all-pages.js"></script>
    <script src="ai-fix-universal.js"></script>  <!-- AIåˆ†æåŠŸèƒ½ä¿®å¤ -->
    <script src="universal-button-fix.js"></script>  <!-- é€šç”¨æŒ‰é’®ä¿®å¤ -->
</body>

</html>

