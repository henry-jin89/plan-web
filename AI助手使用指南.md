# 🤖 AI 智能助手使用指南

## 📋 功能概述

plan-web 现已集成 **Gemini 2.5 Pro AI 智能助手**，可以自动分析您的所有计划数据，并提供个性化的建议和洞察。

---

## ✨ 核心功能

### 1. 数据收集
AI 助手会自动收集以下数据：
- ✅ **计划类**：日/周/月/季度/半年/年计划
- ✅ **功能类**：习惯追踪、心情记录、感恩日记、反思模板、月度日程

### 2. 智能分析
使用 Google Gemini 2.5 Pro 提供：
- 📊 **整体评估**：分析您的计划习惯和执行情况
- 🔍 **关键洞察**：发现模式、趋势和潜在问题
- 💡 **具体建议**：5-7条实用的改进建议
- 🎯 **行动计划**：3-5条可立即执行的步骤

### 3. 数据持久化
- 💾 自动保存到 localStorage
- ☁️ 通过 Firebase 云端同步
- 📱 手机和电脑无缝访问
- 📚 保留最近10条历史记录

---

## 🎯 使用方法

### 方法 1：主页快捷按钮
1. 访问主页：`https://henry-jin89.github.io/plan-web/`
2. 点击顶部的 **🤖 AI智能分析** 按钮（紫色渐变）
3. 等待 10-20 秒，AI 分析完成
4. 查看个性化建议

### 方法 2：悬浮按钮
1. 在任意计划页面（日计划、周计划等）
2. 点击右下角的 **🤖** 悬浮按钮
3. 启动 AI 分析
4. 查看建议

---

## 📱 界面说明

### 主页按钮
```
┌─────────────────────────────────┐
│  🤖 AI智能分析  📅 今日计划  ... │
└─────────────────────────────────┘
```
- 位置：主页顶部，快捷操作区
- 样式：紫色渐变，醒目突出
- 功能：一键启动 AI 分析

### 悬浮按钮
```
                              🤖
                              ↑
                    右下角悬浮按钮
```
- 位置：所有页面右下角
- 样式：圆形，脉动动画
- 功能：随时启动 AI 分析

### 分析界面
```
┌───────────────────────────────────┐
│ 🤖 AI 智能分析中...                │
├───────────────────────────────────┤
│   ⏳                               │
│   正在收集您的计划数据...          │
│   这可能需要10-20秒，请耐心等待    │
└───────────────────────────────────┘
```

### 结果展示
```
┌───────────────────────────────────┐
│ 🤖 AI 智能分析与建议          ✕   │
├───────────────────────────────────┤
│ 分析时间: 2025-01-01 12:00:00     │
│                                   │
│ ## 1. 整体评估                    │
│ 您的计划习惯...                   │
│                                   │
│ ## 2. 关键洞察                    │
│ - 洞察1...                        │
│ - 洞察2...                        │
│                                   │
│ ## 3. 具体建议                    │
│ ...                               │
├───────────────────────────────────┤
│ [查看历史建议]     [知道了]       │
└───────────────────────────────────┘
```

---

## 💡 使用技巧

### 1. 首次使用
- ✅ 先在至少 2-3 个页面填写内容
- ✅ 内容越丰富，AI 分析越准确
- ✅ 建议填写：日计划 + 周计划 + 习惯追踪

### 2. 最佳实践
- 📅 **定期使用**：建议每周分析一次
- 📝 **填写详细**：提供更多上下文信息
- 🎯 **行动落实**：根据建议制定具体行动
- 📊 **对比观察**：查看历史建议，观察进步

### 3. 历史记录
- 点击 "查看历史建议" 查看过往分析
- 每条记录都有时间戳
- 点击任意记录可查看完整内容
- 自动同步到云端，手机可查看

---

## 🔧 技术细节

### API 配置
- **模型**：Gemini 2.5 Pro (gemini-2.0-flash-exp)
- **API Key**：已内置（可在 `gemini-ai-assistant.js` 中修改）
- **限制**：每次分析约 10-20 秒

### 数据存储
```javascript
// localStorage 结构
{
  "gemini_ai_suggestions": [
    {
      "success": true,
      "suggestion": "AI 建议内容（Markdown格式）",
      "timestamp": "2025-01-01T12:00:00.000Z",
      "planData": { /* 收集的计划数据 */ }
    }
  ],
  "last_ai_analysis_time": "2025-01-01T12:00:00.000Z"
}
```

### Firebase 同步
- 建议数据保存在 localStorage
- 通过现有的 Firebase 同步机制自动上传
- 使用共享用户ID：`shared-plan-web-user`

---

## ❓ 常见问题

### Q1: 点击按钮没反应？
**A**: 请等待页面完全加载（约 3-5 秒），AI 脚本正在初始化。

### Q2: 提示"暂无计划数据"？
**A**: 请先在计划页面填写一些内容，然后再使用 AI 分析。

### Q3: 分析时间太长？
**A**: 首次分析可能需要 15-20 秒，这是正常的。请耐心等待。

### Q4: 手机能用吗？
**A**: 完全支持！所有功能在手机端都可以正常使用，界面已优化。

### Q5: 建议会丢失吗？
**A**: 不会。建议保存在 localStorage 和 Firebase，跨设备同步。

### Q6: 可以修改 API Key 吗？
**A**: 可以。编辑 `gemini-ai-assistant.js` 第 7 行，替换为您的 API Key。

---

## 🎨 界面截图说明

### 主页 AI 按钮
- 紫色渐变背景
- 醒目的 🤖 图标
- 悬停时有放大效果

### 悬浮按钮
- 右下角圆形按钮
- 持续的脉动动画
- 悬停时旋转并放大

### 分析模态框
- 毛玻璃背景
- 滑入动画
- Markdown 格式渲染
- 美观的排版

---

## 📊 AI 分析示例

### 输入数据
```
日计划：
- 2025-01-01: 完成项目文档、健身1小时
- 2025-01-02: 团队会议、学习新技术

习惯追踪：
- 早起: 7/7 天完成
- 阅读: 5/7 天完成
```

### AI 输出（示例）
```markdown
## 🎯 整体评估

您展现出了良好的计划习惯！持续7天的早起记录非常棒，
显示出强大的自律能力。计划内容涵盖工作和个人成长，
体现了全面发展的意识。

## 🔍 关键洞察

1. **强项**：早起习惯已养成，执行力100%
2. **改进空间**：阅读习惯完成率71%，有提升空间
3. **模式发现**：工作日计划更详细，周末较简单
4. **平衡性**：工作与生活安排较为均衡

## 💡 具体建议

1. **固定阅读时间**：建议每天晚上9点固定阅读30分钟
2. **周末规划**：增加周末的计划深度，避免放松过度
3. **目标量化**：将"学习新技术"细化为具体内容
4. **休息平衡**：确保每天有1小时的放松时间
5. **回顾机制**：每周日回顾本周完成情况

## 🎯 行动计划

1. 📱 今天开始：设置9点阅读提醒
2. 📝 本周末：制定详细的下周计划
3. 🎯 本月内：完成1个完整的技术学习项目
```

---

## 🚀 更新日志

### v1.0.0 (2025-01-01)
- ✅ 集成 Gemini 2.5 Pro API
- ✅ 支持所有12个页面
- ✅ 自动数据收集和分析
- ✅ 历史记录保存
- ✅ Firebase 云端同步
- ✅ 精美的 UI 设计

---

## 📞 支持

如有问题或建议，请通过以下方式联系：
- GitHub Issues
- 项目仓库：https://github.com/henry-jin89/plan-web

---

## 📄 许可证

本项目采用 MIT 许可证。

---

**祝您使用愉快！让 AI 助力您的计划管理！** 🎉
