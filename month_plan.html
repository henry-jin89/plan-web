<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <script src="config.js"></script>
    
    <!-- Firebaseé…ç½® -->
    <script src="firebase-config.js"></script>
    
    <!-- åŒæ­¥ä¿®å¤å·¥å…· -->
    <script src="sync-fix.js"></script>
    
    <!-- Firebaseæ•°æ®åº“åŒæ­¥ -->
    <script src="firebase-database-sync.js"></script>
    <script src="gemini-ai-assistant.js"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æœˆè®¡åˆ’ - æ™ºèƒ½è®¡åˆ’ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="ai-assistant-styles.css">
</head>

<body>
    <div class="container">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <div class="page-header">
            <a href="index.html" class="back-to-home">â† è¿”å›ä¸»é¡µ</a>
            <h1 class="page-title">ğŸ“ˆ æœˆè®¡åˆ’ç®¡ç†</h1>
            <div style="display: flex; gap: 8px;">
                <a href="week_plan.html" class="btn-main" style="font-size: 0.9em;">å‘¨è®¡åˆ’</a>
                <a href="quarter_plan.html" class="btn-main" style="font-size: 0.9em;">å­£åº¦è®¡åˆ’</a>
            </div>
        </div>

        <!-- AIæ™ºèƒ½åˆ†æåŒºåŸŸ - æ”¾åœ¨æœ€é¡¶éƒ¨ -->
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; padding: 24px; margin-bottom: 24px; box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);">
            <div style="display: flex; align-items: center; justify-content: space-between; gap: 20px;">
                <div style="flex: 1;">
                    <h3 style="color: white; margin: 0 0 8px 0; font-size: 1.4em; display: flex; align-items: center; gap: 10px;">
                        ğŸ¤– AI æ™ºèƒ½åˆ†æ
                        <span style="font-size: 0.5em; background: rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 12px;">Gemini 2.5 Pro</span>
                    </h3>
                    <p style="color: rgba(255,255,255,0.95); margin: 0; font-size: 1em; line-height: 1.6;">
                        è®© AI åˆ†ææ‚¨çš„æœˆè®¡åˆ’ï¼Œæä¾›ä¸“ä¸šå»ºè®®å’Œä¼˜åŒ–æ–¹æ¡ˆ
                    </p>
                </div>
                <button type="button" onclick="startAIAnalysis()" style="background: white; color: #667eea; border: none; padding: 16px 40px; border-radius: 12px; font-size: 1.1em; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: all 0.3s ease; white-space: nowrap;">
                    ğŸš€ å¼€å§‹åˆ†æ
                </button>
            </div>
        </div>

        <!-- æ™ºèƒ½æ§åˆ¶æ  -->
        <div class="plan-smartbar">
            <div class="progress-bar" style="flex: 1;">
                <div style="background:#eee;border-radius:8px;height:18px;overflow:hidden;">
                    <div id="month-progress-inner" class="progress-inner" style="width: 0%;"></div>
                </div>
                <div style="font-size:0.9em;color:#666;margin-top:3px;">
                    <span id="month-progress-text">æœ¬æœˆè¿›åº¦ 0%</span>
                </div>
            </div>
            
            <button type="button" id="month-prev">â†</button>
            <input type="month" id="month_date" style="width:150px;padding:4px;">
            <button type="button" id="month-next">â†’</button>
        </div>

        <!-- æ“ä½œæ  -->
        <div class="save-bar">
            <button type="button" class="save-btn" data-type="month">ğŸ’¾ ä¿å­˜è®¡åˆ’</button>
            <button type="button" class="save-view-btn" data-type="month">ğŸ“š å†å²è®°å½•</button>
            <button type="button" id="month-analytics-btn">ğŸ“Š æœˆåº¦åˆ†æ</button>
            <button type="button" id="month-template-btn">ğŸ“‹ æ¨¡æ¿æ’å…¥</button>
            <button type="button" id="month-carry-over-btn" style="background: #fff3e0; color: #ef6c00;" title="å°†æœ¬æœˆæœªå®Œæˆçš„ä»»åŠ¡ç»“è½¬åˆ°ä¸‹æœˆé¢„è§ˆ">ğŸ“‹ ç»“è½¬ä»»åŠ¡</button>
        </div>

        <!-- æœˆåº¦ç›®æ ‡ -->
        <div class="plan-item-header">
            <label>ğŸ¯ æœˆåº¦æ ¸å¿ƒç›®æ ‡</label>
        </div>
        <textarea id="month_goals" placeholder="è®¾å®šæœ¬æœˆè¦è¾¾æˆçš„ä¸»è¦ç›®æ ‡...

ä¾‹å¦‚ï¼š
â€¢ å®Œæˆé‡è¦é¡¹ç›®é‡Œç¨‹ç¢‘
â€¢ å­¦ä¹ æ–°æŠ€èƒ½å¹¶è¾¾åˆ°ç‰¹å®šæ°´å¹³
â€¢ æ”¹å–„å·¥ä½œæˆ–ç”Ÿæ´»ä¹ æƒ¯
â€¢ å»ºç«‹æ–°çš„äººé™…å…³ç³»æˆ–åˆä½œ" style="min-height: 120px;"></textarea>

        <!-- é‡Œç¨‹ç¢‘è§„åˆ’ -->
        <div class="plan-item-header">
            <label>ğŸ é‡è¦é‡Œç¨‹ç¢‘</label>
        </div>
        <div id="month_milestones" class="todo-list-container" data-placeholder="[ ] æœ¬æœˆçš„é‡è¦é‡Œç¨‹ç¢‘å’Œå…³é”®èŠ‚ç‚¹..."></div>

        <!-- ä¹ æƒ¯åŸ¹å…» -->
        <div class="plan-item-header">
            <label>ğŸ”„ ä¹ æƒ¯åŸ¹å…»è®¡åˆ’</label>
        </div>
        <div id="month_habits" class="todo-list-container" data-placeholder="[ ] æœ¬æœˆè¦åŸ¹å…»æˆ–æ”¹å–„çš„ä¹ æƒ¯..."></div>

        <!-- å­¦ä¹ æˆé•¿ -->
        <div class="plan-item-header">
            <label>ğŸ“š å­¦ä¹ æˆé•¿è§„åˆ’</label>
        </div>
        <textarea id="month_learning" placeholder="æœ¬æœˆçš„å­¦ä¹ å’Œæˆé•¿è®¡åˆ’...

å¯ä»¥åŒ…æ‹¬ï¼š
â€¢ ä¸“ä¸šæŠ€èƒ½æå‡
â€¢ æ–°çŸ¥è¯†é¢†åŸŸæ¢ç´¢
â€¢ è¯»ä¹¦å­¦ä¹ ç›®æ ‡
â€¢ åŸ¹è®­è¯¾ç¨‹å®‰æ’" style="min-height: 100px;"></textarea>

        <!-- æœˆåº¦åæ€ -->
        <div class="plan-item-header">
            <label>ğŸ“ æœˆåº¦æ€»ç»“ä¸åæ€</label>
        </div>
        <textarea id="month_reflection" placeholder="æœˆåº¦æ€»ç»“ä¸åæ€...

å›é¡¾å†…å®¹ï¼š
â€¢ æœ¬æœˆè¾¾æˆçš„é‡è¦ç›®æ ‡
â€¢ é‡åˆ°çš„æŒ‘æˆ˜å’Œå­¦åˆ°çš„ç»éªŒ
â€¢ ä¸ªäººæˆé•¿å’Œè¿›æ­¥
â€¢ ä¸‹æœˆéœ€è¦æ”¹è¿›çš„æ–¹å‘" style="min-height: 120px;"></textarea>

        <!-- ä¸‹æœˆé¢„è§ˆ -->
        <div class="plan-item-header">
            <label>ğŸ”® ä¸‹æœˆé¢„è§ˆè§„åˆ’</label>
        </div>
        <textarea id="next_month_preview" placeholder="ä¸‹æœˆè®¡åˆ’é¢„è§ˆå’Œå‡†å¤‡...

å¯ä»¥åŒ…æ‹¬ï¼š
â€¢ ä»æœ¬æœˆç»“è½¬çš„æœªå®Œæˆä»»åŠ¡
â€¢ ä¸‹æœˆçš„é‡è¦ç›®æ ‡å’Œè®¡åˆ’
â€¢ éœ€è¦æå‰å‡†å¤‡çš„äº‹é¡¹
â€¢ æ–°çš„æœºä¼šå’ŒæŒ‘æˆ˜" style="min-height: 150px;"></textarea>
    </div>

    <script src="common.js"></script>
    <script>
        // æœˆè®¡åˆ’ç®€åŒ–å®ç°
        let currentMonth = new Date().toISOString().slice(0, 7);

        document.addEventListener('DOMContentLoaded', function() {
            initMonthPlan();
        });

        function initMonthPlan() {
            document.getElementById('month_date').value = currentMonth;
            
            // å¯ç”¨å¾…åŠäº‹é¡¹åŠŸèƒ½
            const containers = document.querySelectorAll('.todo-list-container');
            containers.forEach(container => {
                TodoUtils.enableTodoFunctionality(container);
            });
            
            // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
            document.getElementById('month-prev').addEventListener('click', () => navigateMonth(-1));
            document.getElementById('month-next').addEventListener('click', () => navigateMonth(1));
            document.getElementById('month_date').addEventListener('change', handleMonthChange);
            document.querySelector('.save-btn').addEventListener('click', saveMonthPlan);
            document.querySelector('.save-view-btn').addEventListener('click', showMonthHistory);
            document.getElementById('month-analytics-btn').addEventListener('click', showMonthAnalytics);
            document.getElementById('month-template-btn').addEventListener('click', showTemplateSelector);
            document.getElementById('month-carry-over-btn').addEventListener('click', carryOverMonthTasks);
            
            loadMonthPlan();
            updateProgress();
        }

        function navigateMonth(months) {
            const date = new Date(currentMonth + '-01');
            date.setMonth(date.getMonth() + months);
            currentMonth = date.toISOString().slice(0, 7);
            document.getElementById('month_date').value = currentMonth;
            loadMonthPlan();
            updateProgress();
        }

        function handleMonthChange() {
            currentMonth = document.getElementById('month_date').value;
            loadMonthPlan();
            updateProgress();
        }

        function saveMonthPlan() {
            const data = {
                goals: document.getElementById('month_goals').value,
                milestones: getTodoContent('month_milestones'),
                habits: getTodoContent('month_habits'),
                learning: document.getElementById('month_learning').value,
                reflection: document.getElementById('month_reflection').value,
                nextMonthPreview: document.getElementById('next_month_preview').value
            };

            const success = StorageUtils.savePlan('month', currentMonth, data);
            if (success) {
                MessageUtils.success('æœˆè®¡åˆ’ä¿å­˜æˆåŠŸï¼');
            }
        }

        function loadMonthPlan() {
            const data = StorageUtils.loadPlan('month', currentMonth);
            if (data) {
                document.getElementById('month_goals').value = data.goals || '';
                document.getElementById('month_learning').value = data.learning || '';
                document.getElementById('month_reflection').value = data.reflection || '';
                document.getElementById('next_month_preview').value = data.nextMonthPreview || '';
                
                loadTodoContent('month_milestones', data.milestones);
                loadTodoContent('month_habits', data.habits);
            } else {
                clearFields();
            }
        }

        function clearFields() {
            document.getElementById('month_goals').value = '';
            document.getElementById('month_learning').value = '';
            document.getElementById('month_reflection').value = '';
            document.getElementById('next_month_preview').value = '';
            document.getElementById('month_milestones').innerHTML = '';
            document.getElementById('month_habits').innerHTML = '';
        }

        function loadTodoContent(containerId, content) {
            const container = document.getElementById(containerId);
            if (container && content) {
                container.textContent = content;
                TodoUtils.renderTodos(container);
            }
        }

        function getTodoContent(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return '';
            
            const tasks = container.querySelectorAll('.task-item');
            const lines = [];
            
            tasks.forEach(task => {
                const checkbox = task.querySelector('.custom-checkbox');
                const text = task.querySelector('.task-text').textContent;
                const isChecked = checkbox.classList.contains('checked');
                lines.push(`[${isChecked ? 'x' : ' '}] ${text}`);
            });
            
            return lines.join('\n');
        }

        function updateProgress() {
            const progress = ProgressUtils.calculateMonthProgress();
            document.getElementById('month-progress-inner').style.width = `${progress}%`;
            document.getElementById('month-progress-text').textContent = `æœ¬æœˆè¿›åº¦ ${progress}%`;
        }

        function showMonthHistory() {
            MessageUtils.info('æœˆè®¡åˆ’å†å²è®°å½•åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
        }

        function showMonthAnalytics() {
            const goals = document.getElementById('month_goals').value;
            const learning = document.getElementById('month_learning').value;
            const reflection = document.getElementById('month_reflection').value;
            const nextMonthPreview = document.getElementById('next_month_preview').value;
            const milestones = getTodoContent('month_milestones');
            const habits = getTodoContent('month_habits');

            // è®¡ç®—ç»Ÿè®¡æ•°æ®
            const stats = calculateMonthStats(goals, learning, reflection, nextMonthPreview, milestones, habits);
            
            // åˆ›å»ºåˆ†æå†…å®¹
            const analysisContent = createAnalysisContent(stats);
            
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            ModalUtils.show('ğŸ“Š æœˆåº¦åˆ†ææŠ¥å‘Š', analysisContent, 'large');
        }

        function calculateMonthStats(goals, learning, reflection, nextMonthPreview, milestones, habits) {
            const milestoneLines = milestones.split('\n').filter(line => line.trim());
            const habitLines = habits.split('\n').filter(line => line.trim());
            
            const milestoneCompleted = milestoneLines.filter(line => line.includes('[x]')).length;
            const habitCompleted = habitLines.filter(line => line.includes('[x]')).length;
            
            const totalWords = (goals + learning + reflection + nextMonthPreview).split(/\s+/).filter(word => word.trim()).length;
            
            return {
                totalMilestones: milestoneLines.length,
                completedMilestones: milestoneCompleted,
                milestoneProgress: milestoneLines.length > 0 ? Math.round((milestoneCompleted / milestoneLines.length) * 100) : 0,
                totalHabits: habitLines.length,
                completedHabits: habitCompleted,
                habitProgress: habitLines.length > 0 ? Math.round((habitCompleted / habitLines.length) * 100) : 0,
                wordCount: totalWords,
                hasGoals: goals.trim().length > 0,
                hasLearning: learning.trim().length > 0,
                hasReflection: reflection.trim().length > 0,
                hasNextMonthPreview: nextMonthPreview.trim().length > 0,
                monthProgress: ProgressUtils.calculateMonthProgress(),
                month: document.getElementById('month_date').value
            };
        }

        function createAnalysisContent(stats) {
            const monthName = new Date(stats.month + '-01').toLocaleDateString('zh-CN', { year: 'numeric', month: 'long' });
            
            return `
                <div style="padding: 20px; line-height: 1.6;">
                    <h4 style="color: #1976d2; margin-bottom: 20px;">ğŸ—“ï¸ ${monthName} åˆ†ææŠ¥å‘Š</h4>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px;">
                        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #1976d2;">${stats.milestoneProgress}%</div>
                            <div style="color: #666; margin-top: 5px;">é‡Œç¨‹ç¢‘å®Œæˆç‡</div>
                            <div style="font-size: 0.9em; color: #888;">${stats.completedMilestones}/${stats.totalMilestones} é¡¹</div>
                        </div>
                        
                        <div style="background: #e8f5e9; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #2e7d32;">${stats.habitProgress}%</div>
                            <div style="color: #666; margin-top: 5px;">ä¹ æƒ¯å®Œæˆç‡</div>
                            <div style="font-size: 0.9em; color: #888;">${stats.completedHabits}/${stats.totalHabits} é¡¹</div>
                        </div>
                        
                        <div style="background: #fff3e0; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #f57c00;">${stats.monthProgress}%</div>
                            <div style="color: #666; margin-top: 5px;">æœˆä»½è¿›åº¦</div>
                            <div style="font-size: 0.9em; color: #888;">æ—¶é—´è¿›åº¦</div>
                        </div>
                        
                        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #7b1fa2;">${stats.wordCount}</div>
                            <div style="color: #666; margin-top: 5px;">æ€»å­—æ•°</div>
                            <div style="font-size: 0.9em; color: #888;">è®¡åˆ’å†…å®¹</div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h5 style="color: #333; margin-bottom: 10px;">ğŸ“‹ è®¡åˆ’å®Œæ•´æ€§</h5>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <span style="padding: 4px 8px; border-radius: 4px; font-size: 0.9em; ${stats.hasGoals ? 'background: #c8e6c9; color: #2e7d32;' : 'background: #ffcdd2; color: #c62828;'}">
                                ${stats.hasGoals ? 'âœ…' : 'âŒ'} æœˆåº¦ç›®æ ‡
                            </span>
                            <span style="padding: 4px 8px; border-radius: 4px; font-size: 0.9em; ${stats.hasLearning ? 'background: #c8e6c9; color: #2e7d32;' : 'background: #ffcdd2; color: #c62828;'}">
                                ${stats.hasLearning ? 'âœ…' : 'âŒ'} å­¦ä¹ è®¡åˆ’
                            </span>
                            <span style="padding: 4px 8px; border-radius: 4px; font-size: 0.9em; ${stats.hasReflection ? 'background: #c8e6c9; color: #2e7d32;' : 'background: #ffcdd2; color: #c62828;'}">
                                ${stats.hasReflection ? 'âœ…' : 'âŒ'} åæ€æ€»ç»“
                            </span>
                            <span style="padding: 4px 8px; border-radius: 4px; font-size: 0.9em; ${stats.hasNextMonthPreview ? 'background: #c8e6c9; color: #2e7d32;' : 'background: #ffcdd2; color: #c62828;'}">
                                ${stats.hasNextMonthPreview ? 'âœ…' : 'âŒ'} ä¸‹æœˆé¢„è§ˆ
                            </span>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h5 style="color: #333; margin-bottom: 10px;">ğŸ’¡ æ™ºèƒ½å»ºè®®</h5>
                        <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; border-left: 4px solid #1976d2;">
                            ${generateMonthSuggestions(stats)}
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button onclick="exportMonthData()" style="background: #1976d2; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">
                            ğŸ“„ å¯¼å‡ºåˆ†ææŠ¥å‘Š
                        </button>
                    </div>
                </div>
            `;
        }

        function generateMonthSuggestions(stats) {
            const suggestions = [];
            
            if (stats.milestoneProgress < 50) {
                suggestions.push('â€¢ å»ºè®®é‡æ–°è¯„ä¼°é‡Œç¨‹ç¢‘çš„éš¾åº¦å’Œæ—¶é—´å®‰æ’ï¼Œå°†å¤§ç›®æ ‡åˆ†è§£ä¸ºæ›´å°çš„æ­¥éª¤');
            }
            
            if (stats.habitProgress < 70) {
                suggestions.push('â€¢ è€ƒè™‘å‡å°‘ä¹ æƒ¯æ•°é‡ï¼Œä¸“æ³¨äºæœ€é‡è¦çš„2-3ä¸ªä¹ æƒ¯');
            }
            
            if (!stats.hasGoals) {
                suggestions.push('â€¢ è®¾å®šæ˜ç¡®çš„æœˆåº¦ç›®æ ‡ï¼Œå¸®åŠ©æŒ‡å¯¼æ—¥å¸¸è¡ŒåŠ¨');
            }
            
            if (!stats.hasLearning) {
                suggestions.push('â€¢ åˆ¶å®šå­¦ä¹ è®¡åˆ’ï¼ŒæŒç»­æå‡ä¸ªäººèƒ½åŠ›');
            }
            
            if (stats.monthProgress > 80 && stats.milestoneProgress > 80) {
                suggestions.push('â€¢ æ­å–œï¼æœ¬æœˆæ‰§è¡Œæƒ…å†µè‰¯å¥½ï¼Œå¯ä»¥è€ƒè™‘é€‚å½“å¢åŠ æŒ‘æˆ˜éš¾åº¦');
            }
            
            if (suggestions.length === 0) {
                suggestions.push('â€¢ è®¡åˆ’æ‰§è¡Œæƒ…å†µè‰¯å¥½ï¼Œç»§ç»­ä¿æŒç°æœ‰èŠ‚å¥');
            }
            
            return suggestions.join('<br>');
        }

        function exportMonthData() {
            const data = {
                month: document.getElementById('month_date').value,
                goals: document.getElementById('month_goals').value,
                milestones: getTodoContent('month_milestones'),
                habits: getTodoContent('month_habits'),
                learning: document.getElementById('month_learning').value,
                reflection: document.getElementById('month_reflection').value,
                nextMonthPreview: document.getElementById('next_month_preview').value,
                exportTime: new Date().toISOString()
            };
            
            const filename = `æœˆè®¡åˆ’_${data.month}.json`;
            ExportUtils.exportToJSON(data, filename);
            MessageUtils.success('æœˆè®¡åˆ’æ•°æ®å·²å¯¼å‡ºï¼');
        }

        // æœˆåº¦è®¡åˆ’æ¨¡æ¿æ•°æ®
        const monthTemplates = {
            comprehensive: {
                name: "ğŸ“ˆ å…¨é¢å‘å±•è®¡åˆ’",
                description: "é€‚åˆè¿½æ±‚å…¨æ–¹ä½æˆé•¿çš„ç”¨æˆ·",
                data: {
                    goals: `æœ¬æœˆæ ¸å¿ƒç›®æ ‡ï¼š
â€¢ å®Œæˆé‡è¦é¡¹ç›®çš„å…³é”®é‡Œç¨‹ç¢‘
â€¢ æå‡ä¸ªäººæŠ€èƒ½æ°´å¹³
â€¢ æ”¹å–„ç”Ÿæ´»è´¨é‡å’Œå·¥ä½œæ•ˆç‡
â€¢ å»ºç«‹å¥åº·çš„ç”Ÿæ´»ä¹ æƒ¯`,
                    milestones: `[ ] å®Œæˆé¡¹ç›®ç¬¬ä¸€é˜¶æ®µå¼€å‘
[ ] é€šè¿‡é‡è¦è€ƒè¯•æˆ–è®¤è¯
[ ] å®Œæˆæœˆåº¦KPIæŒ‡æ ‡
[ ] å»ºç«‹æ–°çš„åˆä½œå…³ç³»`,
                    habits: `[ ] æ¯å¤©é˜…è¯»30åˆ†é’Ÿ
[ ] æ¯å‘¨è¿åŠ¨3æ¬¡ä»¥ä¸Š
[ ] æ¯å¤©è®°å½•æ„Ÿæ©æ—¥è®°
[ ] æ¯å‘¨è¿›è¡Œä¸€æ¬¡å¤ç›˜`,
                    learning: `å­¦ä¹ æˆé•¿è®¡åˆ’ï¼š
â€¢ ä¸“ä¸šæŠ€èƒ½ï¼šæ·±å…¥å­¦ä¹ ç›¸å…³é¢†åŸŸçš„æ–°æŠ€æœ¯æˆ–æ–¹æ³•
â€¢ è½¯æŠ€èƒ½ï¼šæå‡æ²Ÿé€šè¡¨è¾¾å’Œå›¢é˜Ÿåä½œèƒ½åŠ›
â€¢ è¯»ä¹¦è®¡åˆ’ï¼šå®Œæˆ2-3æœ¬ä¸“ä¸šæˆ–æˆé•¿ç±»ä¹¦ç±
â€¢ åœ¨çº¿è¯¾ç¨‹ï¼šå‚ä¸ç›¸å…³åŸ¹è®­æˆ–è®²åº§`,
                    reflection: `æœˆåº¦åæ€æ¨¡æ¿ï¼š
â€¢ æœ¬æœˆæœ€å¤§çš„æˆå°±å’Œçªç ´
â€¢ é‡åˆ°çš„ä¸»è¦æŒ‘æˆ˜åŠè§£å†³æ–¹æ¡ˆ
â€¢ ä¸ªäººæˆé•¿å’Œèƒ½åŠ›æå‡æƒ…å†µ
â€¢ ä¸‹æœˆéœ€è¦é‡ç‚¹å…³æ³¨çš„é¢†åŸŸ`,
                    nextMonthPreview: `ä¸‹æœˆè®¡åˆ’é¢„è§ˆï¼š
â€¢ ç»§ç»­æ¨è¿›æœªå®Œæˆçš„é‡è¦é¡¹ç›®
â€¢ æ–°çš„å­¦ä¹ ç›®æ ‡å’ŒæŠ€èƒ½æå‡è®¡åˆ’
â€¢ é‡è¦çš„æ—¶é—´èŠ‚ç‚¹å’Œé‡Œç¨‹ç¢‘å®‰æ’
â€¢ éœ€è¦æå‰å‡†å¤‡çš„èµ„æºå’Œæ¡ä»¶`
                }
            },
            career: {
                name: "ğŸ’¼ èŒä¸šå‘å±•è®¡åˆ’",
                description: "ä¸“æ³¨äºèŒä¸šæˆé•¿å’ŒæŠ€èƒ½æå‡",
                data: {
                    goals: `èŒä¸šå‘å±•ç›®æ ‡ï¼š
â€¢ å®Œæˆé‡è¦é¡¹ç›®äº¤ä»˜
â€¢ æå‡æ ¸å¿ƒèŒä¸šæŠ€èƒ½
â€¢ æ‰©å±•èŒä¸šç½‘ç»œ
â€¢ è·å¾—è®¤å¯å’Œæ™‹å‡æœºä¼š`,
                    milestones: `[ ] å®Œæˆå­£åº¦é¡¹ç›®ç›®æ ‡
[ ] è·å¾—æ–°æŠ€èƒ½è®¤è¯
[ ] å‚åŠ è¡Œä¸šä¼šè®®æˆ–åŸ¹è®­
[ ] å®ŒæˆèŒä¸šå‘å±•è¯„ä¼°`,
                    habits: `[ ] æ¯å¤©å­¦ä¹ æ–°æŠ€èƒ½1å°æ—¶
[ ] æ¯å‘¨å†™æŠ€æœ¯åšå®¢æˆ–æ€»ç»“
[ ] æ¯æœˆå‚åŠ 1æ¬¡è¡Œä¸šæ´»åŠ¨
[ ] å®šæœŸä¸å¯¼å¸ˆæˆ–åŒäº‹äº¤æµ`,
                    learning: `èŒä¸šæŠ€èƒ½æå‡ï¼š
â€¢ æ ¸å¿ƒæŠ€æœ¯ï¼šæ·±å…¥å­¦ä¹ å·¥ä½œç›¸å…³çš„ä¸“ä¸šæŠ€èƒ½
â€¢ ç®¡ç†èƒ½åŠ›ï¼šå­¦ä¹ é¡¹ç›®ç®¡ç†å’Œå›¢é˜Ÿé¢†å¯¼
â€¢ è¡Œä¸šæ´å¯Ÿï¼šå…³æ³¨è¡Œä¸šè¶‹åŠ¿å’Œæœ€ä½³å®è·µ
â€¢ è½¯æŠ€èƒ½ï¼šæå‡æ¼”è®²ã€å†™ä½œå’Œæ²Ÿé€šèƒ½åŠ›`,
                    reflection: `èŒä¸šå‘å±•åæ€ï¼š
â€¢ æœ¬æœˆåœ¨å·¥ä½œä¸­çš„ä¸»è¦æˆå°±
â€¢ æŠ€èƒ½æå‡å’Œèƒ½åŠ›å‘å±•æƒ…å†µ
â€¢ èŒä¸šç›®æ ‡çš„è¿›å±•è¯„ä¼°
â€¢ ä¸‹æœˆèŒä¸šå‘å±•é‡ç‚¹è§„åˆ’`,
                    nextMonthPreview: `ä¸‹æœˆèŒä¸šå‘å±•è§„åˆ’ï¼š
â€¢ é‡ç‚¹é¡¹ç›®å’Œå·¥ä½œä»»åŠ¡å®‰æ’
â€¢ æ–°æŠ€èƒ½å­¦ä¹ å’Œè®¤è¯è®¡åˆ’
â€¢ è¡Œä¸šäº¤æµå’Œç½‘ç»œæ‹“å±•æ´»åŠ¨
â€¢ èŒä¸šå‘å±•æœºä¼šçš„æŠŠæ¡å’Œå‡†å¤‡`
                }
            },
            health: {
                name: "ğŸƒâ€â™€ï¸ å¥åº·ç”Ÿæ´»è®¡åˆ’",
                description: "ä¸“æ³¨äºèº«å¿ƒå¥åº·å’Œç”Ÿæ´»å“è´¨",
                data: {
                    goals: `å¥åº·ç”Ÿæ´»ç›®æ ‡ï¼š
â€¢ å»ºç«‹è§„å¾‹çš„è¿åŠ¨ä¹ æƒ¯
â€¢ æ”¹å–„é¥®é£Ÿç»“æ„å’Œä½œæ¯
â€¢ æå‡å¿ƒç†å¥åº·æ°´å¹³
â€¢ å¢å¼ºä½“è´¨å’Œå…ç–«åŠ›`,
                    milestones: `[ ] å®Œæˆæœˆåº¦è¿åŠ¨ç›®æ ‡
[ ] å»ºç«‹å¥åº·é¥®é£Ÿä¹ æƒ¯
[ ] æ”¹å–„ç¡çœ è´¨é‡
[ ] å®Œæˆå¥åº·ä½“æ£€`,
                    habits: `[ ] æ¯å¤©è¿åŠ¨30åˆ†é’Ÿä»¥ä¸Š
[ ] æ¯å¤©å–è¶³å¤Ÿçš„æ°´ï¼ˆ8æ¯ï¼‰
[ ] æ™šä¸Š11ç‚¹å‰å…¥ç¡
[ ] æ¯å¤©è¿›è¡Œå†¥æƒ³æˆ–æ”¾æ¾`,
                    learning: `å¥åº·çŸ¥è¯†å­¦ä¹ ï¼š
â€¢ è¥å…»å­¦ï¼šå­¦ä¹ ç§‘å­¦çš„é¥®é£Ÿæ­é…
â€¢ è¿åŠ¨ç§‘å­¦ï¼šäº†è§£æ­£ç¡®çš„é”»ç‚¼æ–¹æ³•
â€¢ å¿ƒç†å¥åº·ï¼šå­¦ä¹ å‹åŠ›ç®¡ç†å’Œæƒ…ç»ªè°ƒèŠ‚
â€¢ ç”Ÿæ´»æ–¹å¼ï¼šåŸ¹å…»å¥åº·çš„ç”Ÿæ´»ä¹ æƒ¯`,
                    reflection: `å¥åº·ç”Ÿæ´»åæ€ï¼š
â€¢ æœ¬æœˆèº«ä½“çŠ¶å†µå’Œä½“èƒ½å˜åŒ–
â€¢ è¿åŠ¨å’Œé¥®é£Ÿä¹ æƒ¯çš„æ”¹å–„æƒ…å†µ
â€¢ å¿ƒç†å¥åº·å’Œå‹åŠ›ç®¡ç†çŠ¶å†µ
â€¢ ä¸‹æœˆå¥åº·è®¡åˆ’çš„è°ƒæ•´æ–¹å‘`,
                    nextMonthPreview: `ä¸‹æœˆå¥åº·ç”Ÿæ´»è§„åˆ’ï¼š
â€¢ è¿åŠ¨è®¡åˆ’çš„å‡çº§å’Œè°ƒæ•´
â€¢ é¥®é£Ÿè¥å…»çš„è¿›ä¸€æ­¥ä¼˜åŒ–
â€¢ æ–°çš„å¥åº·ä¹ æƒ¯å»ºç«‹ç›®æ ‡
â€¢ èº«å¿ƒå¥åº·çš„ç»¼åˆæå‡è®¡åˆ’`
                }
            },
            learning: {
                name: "ğŸ“š å­¦ä¹ æˆé•¿è®¡åˆ’",
                description: "ä¸“æ³¨äºçŸ¥è¯†å­¦ä¹ å’Œä¸ªäººæˆé•¿",
                data: {
                    goals: `å­¦ä¹ æˆé•¿ç›®æ ‡ï¼š
â€¢ æŒæ¡æ–°çš„çŸ¥è¯†å’ŒæŠ€èƒ½
â€¢ æå‡æ€ç»´èƒ½åŠ›å’Œè®¤çŸ¥æ°´å¹³
â€¢ åŸ¹å…»è‰¯å¥½çš„å­¦ä¹ ä¹ æƒ¯
â€¢ å»ºç«‹çŸ¥è¯†ä½“ç³»å’Œæ¡†æ¶`,
                    milestones: `[ ] å®Œæˆé‡è¦è¯¾ç¨‹å­¦ä¹ 
[ ] é€šè¿‡ä¸“ä¸šè€ƒè¯•æˆ–è®¤è¯
[ ] å®Œæˆè¯»ä¹¦è®¡åˆ’ç›®æ ‡
[ ] å†™ä½œæ€»ç»“å’Œåˆ†äº«`,
                    habits: `[ ] æ¯å¤©é˜…è¯»è‡³å°‘1å°æ—¶
[ ] æ¯å‘¨å†™å­¦ä¹ ç¬”è®°å’Œæ€»ç»“
[ ] æ¯æœˆåˆ†äº«å­¦ä¹ å¿ƒå¾—
[ ] å®šæœŸå¤ä¹ å’Œå·©å›ºçŸ¥è¯†`,
                    learning: `çŸ¥è¯†å­¦ä¹ è§„åˆ’ï¼š
â€¢ ä¸“ä¸šé¢†åŸŸï¼šæ·±å…¥å­¦ä¹ æœ¬ä¸“ä¸šçš„å‰æ²¿çŸ¥è¯†
â€¢ è·¨ç•Œå­¦ä¹ ï¼šæ¢ç´¢å…¶ä»–æ„Ÿå…´è¶£çš„é¢†åŸŸ
â€¢ æ–¹æ³•è®ºï¼šå­¦ä¹ é«˜æ•ˆçš„å­¦ä¹ æ–¹æ³•å’Œæ€ç»´æ¨¡å¼
â€¢ å®è·µåº”ç”¨ï¼šå°†å­¦åˆ°çš„çŸ¥è¯†åº”ç”¨åˆ°å®é™…ä¸­`,
                    reflection: `å­¦ä¹ æˆé•¿åæ€ï¼š
â€¢ æœ¬æœˆå­¦ä¹ çš„æ–°çŸ¥è¯†å’ŒæŠ€èƒ½
â€¢ å­¦ä¹ æ–¹æ³•å’Œæ•ˆç‡çš„æ”¹è¿›æƒ…å†µ
â€¢ çŸ¥è¯†åº”ç”¨å’Œå®è·µçš„æ•ˆæœ
â€¢ ä¸‹æœˆå­¦ä¹ è®¡åˆ’çš„ä¼˜åŒ–è°ƒæ•´`,
                    nextMonthPreview: `ä¸‹æœˆå­¦ä¹ æˆé•¿è§„åˆ’ï¼š
â€¢ æ–°çš„å­¦ä¹ é¢†åŸŸå’ŒæŠ€èƒ½ç›®æ ‡
â€¢ æ·±åŒ–å·²å­¦çŸ¥è¯†çš„å®è·µåº”ç”¨
â€¢ å­¦ä¹ æ–¹æ³•å’Œæ•ˆç‡çš„æŒç»­æ”¹è¿›
â€¢ çŸ¥è¯†åˆ†äº«å’Œäº¤æµçš„æœºä¼šå®‰æ’`
                }
            },
            minimal: {
                name: "âœ¨ ç®€çº¦å®ç”¨è®¡åˆ’",
                description: "ç®€æ´é«˜æ•ˆï¼Œé€‚åˆå¿™ç¢Œçš„ç”Ÿæ´»èŠ‚å¥",
                data: {
                    goals: `æœ¬æœˆé‡ç‚¹ç›®æ ‡ï¼š
â€¢ ä¸“æ³¨å®Œæˆ1-2ä¸ªé‡è¦ä»»åŠ¡
â€¢ ä¿æŒå·¥ä½œç”Ÿæ´»å¹³è¡¡
â€¢ æå‡æ‰§è¡Œæ•ˆç‡`,
                    milestones: `[ ] å®Œæˆæ ¸å¿ƒå·¥ä½œä»»åŠ¡
[ ] ä¿æŒå¥åº·çš„ç”Ÿæ´»çŠ¶æ€`,
                    habits: `[ ] æ¯å¤©åˆ—å‡ºé‡è¦ä»»åŠ¡æ¸…å•
[ ] ä¿æŒè§„å¾‹ä½œæ¯
[ ] å®šæœŸæ•´ç†å’Œå¤ç›˜`,
                    learning: `æŒç»­æ”¹è¿›ï¼š
â€¢ å…³æ³¨å·¥ä½œæ•ˆç‡æå‡æ–¹æ³•
â€¢ å­¦ä¹ æ—¶é—´ç®¡ç†æŠ€å·§`,
                    reflection: `ç®€è¦æ€»ç»“ï¼š
â€¢ æœ¬æœˆå®Œæˆçš„é‡è¦äº‹é¡¹
â€¢ éœ€è¦æ”¹è¿›çš„åœ°æ–¹
â€¢ ä¸‹æœˆé‡ç‚¹å…³æ³¨æ–¹å‘`,
                    nextMonthPreview: `ä¸‹æœˆé‡ç‚¹è§„åˆ’ï¼š
â€¢ å»¶ç»­æœ¬æœˆçš„é‡è¦å·¥ä½œ
â€¢ æ–°çš„ä¼˜å…ˆçº§ä»»åŠ¡å®‰æ’
â€¢ ç®€åŒ–å’Œä¼˜åŒ–çš„æ”¹è¿›è®¡åˆ’`
                }
            },
            student: {
                name: "ğŸ“ å­¦ç”Ÿæˆé•¿è®¡åˆ’",
                description: "ä¸“ä¸ºå­¦ç”Ÿç¾¤ä½“è®¾è®¡çš„å­¦ä¹ æˆé•¿æ¨¡æ¿",
                data: {
                    goals: `æœ¬æœˆå­¦ä¹ ç›®æ ‡ï¼š
â€¢ æå‡å­¦æœ¯æˆç»©å’Œä¸“ä¸šèƒ½åŠ›
â€¢ åŸ¹å…»è‰¯å¥½çš„å­¦ä¹ ä¹ æƒ¯
â€¢ å‚ä¸è¯¾å¤–æ´»åŠ¨å’Œç¤¾ä¼šå®è·µ
â€¢ ä¸ºæœªæ¥å‘å±•åšå¥½å‡†å¤‡`,
                    milestones: `[ ] å®Œæˆé‡è¦ä½œä¸šå’Œé¡¹ç›®
[ ] å‡†å¤‡æœŸä¸­/æœŸæœ«è€ƒè¯•
[ ] å‚åŠ å­¦æœ¯ç«èµ›æˆ–æ´»åŠ¨
[ ] å®Œæˆå®ä¹ æˆ–å®è·µé¡¹ç›®`,
                    habits: `[ ] æ¯å¤©æŒ‰æ—¶å®Œæˆä½œä¸š
[ ] åšæŒæ—©èµ·å’Œè§„å¾‹ä½œæ¯
[ ] æ¯å‘¨å¤ä¹ å’Œé¢„ä¹ è¯¾ç¨‹
[ ] å®šæœŸæ•´ç†å­¦ä¹ ç¬”è®°`,
                    learning: `å­¦ä¹ æˆé•¿è§„åˆ’ï¼š
â€¢ ä¸“ä¸šè¯¾ç¨‹ï¼šæ·±å…¥ç†è§£æ ¸å¿ƒæ¦‚å¿µå’ŒçŸ¥è¯†ç‚¹
â€¢ æŠ€èƒ½æå‡ï¼šå­¦ä¹ å®ç”¨çš„å·¥å…·å’Œæ–¹æ³•
â€¢ è¯­è¨€å­¦ä¹ ï¼šæå‡å¤–è¯­æ°´å¹³å’Œè¡¨è¾¾èƒ½åŠ›
â€¢ ç»¼åˆç´ è´¨ï¼šåŸ¹å…»æ‰¹åˆ¤æ€ç»´å’Œåˆ›æ–°èƒ½åŠ›`,
                    reflection: `å­¦ä¹ æˆé•¿åæ€ï¼š
â€¢ æœ¬æœˆå­¦ä¹ æˆæœå’Œå­¦æœ¯è¿›æ­¥
â€¢ å­¦ä¹ æ–¹æ³•å’Œæ•ˆç‡çš„æ”¹å–„
â€¢ è¯¾å¤–æ´»åŠ¨å’Œå®è·µç»éªŒ
â€¢ ä¸‹æœˆå­¦ä¹ è®¡åˆ’çš„è°ƒæ•´ä¼˜åŒ–`,
                    nextMonthPreview: `ä¸‹æœˆå­¦ä¹ è§„åˆ’ï¼š
â€¢ æ–°è¯¾ç¨‹çš„å­¦ä¹ å‡†å¤‡å’Œè§„åˆ’
â€¢ é‡è¦è€ƒè¯•å’Œä½œä¸šçš„æ—¶é—´å®‰æ’
â€¢ å®ä¹ æˆ–é¡¹ç›®çš„ç”³è¯·å’Œå‡†å¤‡
â€¢ ä¸ªäººå‘å±•å’Œèƒ½åŠ›æå‡è®¡åˆ’`
                }
            },
            entrepreneur: {
                name: "ğŸš€ åˆ›ä¸šå‘å±•è®¡åˆ’",
                description: "é€‚åˆåˆ›ä¸šè€…å’Œè‡ªç”±èŒä¸šè€…çš„å‘å±•è§„åˆ’",
                data: {
                    goals: `æœ¬æœˆåˆ›ä¸šç›®æ ‡ï¼š
â€¢ æ¨è¿›æ ¸å¿ƒä¸šåŠ¡å‘å±•
â€¢ æ‰©å¤§å®¢æˆ·åŸºç¡€å’Œå¸‚åœºä»½é¢
â€¢ æå‡äº§å“æˆ–æœåŠ¡è´¨é‡
â€¢ å»ºç«‹å¯æŒç»­çš„ç›ˆåˆ©æ¨¡å¼`,
                    milestones: `[ ] å®Œæˆäº§å“è¿­ä»£æˆ–æœåŠ¡å‡çº§
[ ] è·å¾—æ–°å®¢æˆ·æˆ–åˆä½œä¼™ä¼´
[ ] è¾¾æˆæœˆåº¦è¥æ”¶ç›®æ ‡
[ ] å®Œæˆå›¢é˜Ÿå»ºè®¾æˆ–æ‹›è˜`,
                    habits: `[ ] æ¯å¤©å…³æ³¨å¸‚åœºåŠ¨æ€å’Œç«äº‰å¯¹æ‰‹
[ ] å®šæœŸä¸å®¢æˆ·æ²Ÿé€šå’Œåé¦ˆ
[ ] æ¯å‘¨åˆ†æä¸šåŠ¡æ•°æ®å’ŒæŒ‡æ ‡
[ ] æŒç»­å­¦ä¹ è¡Œä¸šçŸ¥è¯†å’ŒæŠ€èƒ½`,
                    learning: `åˆ›ä¸šæŠ€èƒ½æå‡ï¼š
â€¢ å•†ä¸šæ¨¡å¼ï¼šä¼˜åŒ–å’Œå®Œå–„å•†ä¸šæ¨¡å¼è®¾è®¡
â€¢ å¸‚åœºè¥é”€ï¼šå­¦ä¹ æœ‰æ•ˆçš„è¥é”€ç­–ç•¥å’Œæ–¹æ³•
â€¢ è´¢åŠ¡ç®¡ç†ï¼šæŒæ¡è´¢åŠ¡åˆ†æå’Œèµ„é‡‘ç®¡ç†
â€¢ é¢†å¯¼åŠ›ï¼šæå‡å›¢é˜Ÿç®¡ç†å’Œå†³ç­–èƒ½åŠ›`,
                    reflection: `åˆ›ä¸šå‘å±•åæ€ï¼š
â€¢ æœ¬æœˆä¸šåŠ¡å‘å±•å’Œæˆæœè¯„ä¼°
â€¢ å¸‚åœºåé¦ˆå’Œå®¢æˆ·æ»¡æ„åº¦
â€¢ å›¢é˜Ÿåä½œå’Œç®¡ç†æ•ˆæœ
â€¢ ä¸‹æœˆå‘å±•ç­–ç•¥çš„è°ƒæ•´ä¼˜åŒ–`,
                    nextMonthPreview: `ä¸‹æœˆåˆ›ä¸šè§„åˆ’ï¼š
â€¢ æ–°çš„ä¸šåŠ¡æœºä¼šå’Œå¸‚åœºæ‹“å±•
â€¢ äº§å“æˆ–æœåŠ¡çš„è¿›ä¸€æ­¥ä¼˜åŒ–
â€¢ èµ„é‡‘ç­¹æªå’ŒæŠ•èµ„è®¡åˆ’
â€¢ å›¢é˜Ÿå‘å±•å’Œäººæ‰å¼•è¿›ç­–ç•¥`
                }
            },
            family: {
                name: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­ç”Ÿæ´»è®¡åˆ’",
                description: "æ³¨é‡å®¶åº­å’Œè°ä¸ç”Ÿæ´»å“è´¨çš„ç»¼åˆè§„åˆ’",
                data: {
                    goals: `æœ¬æœˆå®¶åº­ç›®æ ‡ï¼š
â€¢ å¢è¿›å®¶åº­æˆå‘˜ä¹‹é—´çš„æ„Ÿæƒ…
â€¢ æ”¹å–„å®¶åº­ç”Ÿæ´»è´¨é‡å’Œç¯å¢ƒ
â€¢ å¹³è¡¡å·¥ä½œä¸å®¶åº­æ—¶é—´
â€¢ ä¸ºå®¶åº­æœªæ¥å‘å±•åšè§„åˆ’`,
                    milestones: `[ ] å®‰æ’å®¶åº­èšä¼šæˆ–æ—…è¡Œ
[ ] å®Œæˆå®¶åº­é‡è¦å†³ç­–æˆ–è§„åˆ’
[ ] æ”¹å–„å®¶å±…ç¯å¢ƒæˆ–è®¾æ–½
[ ] å‚ä¸å­©å­çš„æ•™è‚²å’Œæˆé•¿`,
                    habits: `[ ] æ¯å¤©ä¸å®¶äººè¿›è¡Œæœ‰è´¨é‡çš„äº¤æµ
[ ] æ¯å‘¨å®‰æ’å®¶åº­æ´»åŠ¨æ—¶é—´
[ ] å®šæœŸæ•´ç†å’Œç»´æŠ¤å®¶å±…ç¯å¢ƒ
[ ] å…³æ³¨å®¶åº­æˆå‘˜çš„å¥åº·å’Œéœ€æ±‚`,
                    learning: `å®¶åº­æˆé•¿å­¦ä¹ ï¼š
â€¢ äº²å­æ•™è‚²ï¼šå­¦ä¹ ç§‘å­¦çš„è‚²å„¿æ–¹æ³•å’Œç†å¿µ
â€¢ å®¶åº­ç†è´¢ï¼šæŒæ¡å®¶åº­è´¢åŠ¡ç®¡ç†å’ŒæŠ•èµ„
â€¢ ç”Ÿæ´»æŠ€èƒ½ï¼šæå‡çƒ¹é¥ªã€å›­è‰ºç­‰ç”Ÿæ´»æŠ€èƒ½
â€¢ å…³ç³»ç»´æŠ¤ï¼šå­¦ä¹ å®¶åº­æ²Ÿé€šå’Œå†²çªè§£å†³`,
                    reflection: `å®¶åº­ç”Ÿæ´»åæ€ï¼š
â€¢ æœ¬æœˆå®¶åº­å…³ç³»å’Œæ°›å›´å˜åŒ–
â€¢ å®¶åº­æ´»åŠ¨å’Œå…±åŒæ—¶å…‰çš„è´¨é‡
â€¢ å®¶åº­æˆå‘˜çš„æˆé•¿å’Œéœ€æ±‚æ»¡è¶³
â€¢ ä¸‹æœˆå®¶åº­å‘å±•çš„é‡ç‚¹æ–¹å‘`,
                    nextMonthPreview: `ä¸‹æœˆå®¶åº­è§„åˆ’ï¼š
â€¢ å®¶åº­é‡è¦èŠ‚æ—¥å’Œæ´»åŠ¨å®‰æ’
â€¢ å®¶åº­æˆå‘˜çš„ä¸ªäººå‘å±•æ”¯æŒ
â€¢ å®¶å±…ç¯å¢ƒå’Œç”Ÿæ´»å“è´¨æå‡
â€¢ å®¶åº­é•¿è¿œç›®æ ‡çš„æ¨è¿›è®¡åˆ’`
                }
            },
            creative: {
                name: "ğŸ¨ åˆ›æ„ç”Ÿæ´»è®¡åˆ’",
                description: "æ¿€å‘åˆ›é€ åŠ›å’Œè‰ºæœ¯çµæ„Ÿçš„ä¸ªæ€§åŒ–è§„åˆ’",
                data: {
                    goals: `æœ¬æœˆåˆ›æ„ç›®æ ‡ï¼š
â€¢ å®Œæˆé‡è¦çš„åˆ›æ„ä½œå“æˆ–é¡¹ç›®
â€¢ æå‡è‰ºæœ¯æŠ€èƒ½å’Œè¡¨è¾¾èƒ½åŠ›
â€¢ å¯»æ‰¾åˆ›ä½œçµæ„Ÿå’Œæ–°çš„è¡¨ç°å½¢å¼
â€¢ å»ºç«‹åˆ›æ„ç¤¾ç¾¤å’Œåˆä½œç½‘ç»œ`,
                    milestones: `[ ] å®Œæˆä¸€ä¸ªåˆ›æ„ä½œå“æˆ–é¡¹ç›®
[ ] å‚åŠ è‰ºæœ¯å±•è§ˆæˆ–åˆ›æ„æ´»åŠ¨
[ ] å­¦ä¹ æ–°çš„åˆ›ä½œæŠ€æ³•æˆ–å·¥å…·
[ ] å»ºç«‹åˆ›æ„åˆä½œæˆ–äº¤æµå…³ç³»`,
                    habits: `[ ] æ¯å¤©è¿›è¡Œåˆ›ä½œç»ƒä¹ æˆ–æ€è€ƒ
[ ] å®šæœŸæ¬£èµä¼˜ç§€çš„è‰ºæœ¯ä½œå“
[ ] è®°å½•åˆ›æ„çµæ„Ÿå’Œæƒ³æ³•
[ ] å‚ä¸åˆ›æ„ç¤¾ç¾¤çš„äº¤æµåˆ†äº«`,
                    learning: `åˆ›æ„æŠ€èƒ½æå‡ï¼š
â€¢ è‰ºæœ¯æŠ€æ³•ï¼šå­¦ä¹ ç»˜ç”»ã€è®¾è®¡ã€å†™ä½œç­‰æŠ€èƒ½
â€¢ åˆ›æ„æ€ç»´ï¼šåŸ¹å…»åˆ›æ–°æ€ç»´å’Œæƒ³è±¡åŠ›
â€¢ å·¥å…·æŒæ¡ï¼šç†Ÿç»ƒä½¿ç”¨åˆ›ä½œè½¯ä»¶å’Œå·¥å…·
â€¢ å¸‚åœºè®¤çŸ¥ï¼šäº†è§£åˆ›æ„äº§ä¸šå’Œå•†ä¸šæ¨¡å¼`,
                    reflection: `åˆ›æ„ç”Ÿæ´»åæ€ï¼š
â€¢ æœ¬æœˆåˆ›ä½œæˆæœå’Œè‰ºæœ¯è¿›æ­¥
â€¢ åˆ›æ„çµæ„Ÿçš„æ¥æºå’Œæ¿€å‘æ–¹å¼
â€¢ æŠ€èƒ½æå‡å’Œè¡¨è¾¾èƒ½åŠ›å‘å±•
â€¢ ä¸‹æœˆåˆ›ä½œæ–¹å‘å’Œç›®æ ‡è°ƒæ•´`,
                    nextMonthPreview: `ä¸‹æœˆåˆ›æ„è§„åˆ’ï¼š
â€¢ æ–°çš„åˆ›ä½œä¸»é¢˜å’Œé¡¹ç›®æ„æƒ³
â€¢ æŠ€èƒ½å­¦ä¹ å’Œå·¥å…·æŒæ¡è®¡åˆ’
â€¢ åˆ›æ„å±•ç¤ºå’Œåˆ†äº«æœºä¼šå®‰æ’
â€¢ åˆ›æ„å˜ç°å’ŒèŒä¸šå‘å±•æ¢ç´¢`
                }
            }
        };

        function showTemplateSelector() {
            const templateList = Object.keys(monthTemplates).map(key => {
                const template = monthTemplates[key];
                return `
                    <div class="template-item" style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; margin-bottom: 15px; cursor: pointer; transition: all 0.2s;" 
                         onclick="applyTemplate('${key}')">
                        <h4 style="margin: 0 0 8px 0; color: #1976d2; font-size: 1.1em;">${template.name}</h4>
                        <p style="margin: 0; color: #666; font-size: 0.9em;">${template.description}</p>
                    </div>
                `;
            }).join('');

            const content = `
                <div style="padding: 20px;">
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #333; margin-bottom: 10px;">é€‰æ‹©æ¨¡æ¿ç±»å‹</h4>
                        <p style="color: #666; font-size: 0.9em; margin-bottom: 20px;">
                            é€‰æ‹©é€‚åˆçš„æ¨¡æ¿å¿«é€Ÿå¼€å§‹æ‚¨çš„æœˆåº¦è®¡åˆ’ã€‚åº”ç”¨æ¨¡æ¿ä¼šè¦†ç›–å½“å‰å†…å®¹ï¼Œè¯·ç¡®è®¤åæ“ä½œã€‚
                        </p>
                    </div>
                    <div style="max-height: 400px; overflow-y: auto;">
                        ${templateList}
                    </div>
                    <div style="text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee;">
                        <button onclick="closeTemplateModal()" style="background: #666; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-right: 10px;">
                            å–æ¶ˆ
                        </button>
                        <button onclick="showTemplatePreview()" style="background: #1976d2; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">
                            é¢„è§ˆæ¨¡æ¿
                        </button>
                    </div>
                </div>
            `;

            window.currentTemplateModal = ModalUtils.show('ğŸ“‹ é€‰æ‹©æœˆåº¦è®¡åˆ’æ¨¡æ¿', content, 'large');

            // æ·»åŠ é¼ æ ‡æ‚¬åœæ•ˆæœ
            setTimeout(() => {
                const templateItems = document.querySelectorAll('.template-item');
                templateItems.forEach(item => {
                    item.addEventListener('mouseenter', function() {
                        this.style.backgroundColor = '#f5f5f5';
                        this.style.borderColor = '#1976d2';
                        this.style.transform = 'translateY(-2px)';
                        this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                    });
                    
                    item.addEventListener('mouseleave', function() {
                        this.style.backgroundColor = '';
                        this.style.borderColor = '#e0e0e0';
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = '';
                    });
                });
            }, 100);
        }

        function applyTemplate(templateKey) {
            const template = monthTemplates[templateKey];
            if (!template) {
                MessageUtils.error('æ¨¡æ¿ä¸å­˜åœ¨ï¼');
                return;
            }

            // æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
            const confirmContent = `
                <div style="padding: 20px; text-align: center;">
                    <div style="font-size: 3em; margin-bottom: 15px;">âš ï¸</div>
                    <h4 style="color: #333; margin-bottom: 15px;">ç¡®è®¤åº”ç”¨æ¨¡æ¿</h4>
                    <p style="color: #666; margin-bottom: 20px;">
                        åº”ç”¨ <strong>${template.name}</strong> å°†ä¼šè¦†ç›–å½“å‰æ‰€æœ‰è®¡åˆ’å†…å®¹ã€‚<br>
                        æ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼Œè¯·ç¡®è®¤æ˜¯å¦ç»§ç»­ï¼Ÿ
                    </p>
                    <div>
                        <button onclick="closeConfirmModal()" style="background: #666; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin-right: 15px;">
                            å–æ¶ˆ
                        </button>
                        <button onclick="confirmApplyTemplate('${templateKey}')" style="background: #d32f2f; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                            ç¡®è®¤åº”ç”¨
                        </button>
                    </div>
                </div>
            `;

            // å…³é—­æ¨¡æ¿é€‰æ‹©å™¨
            if (window.currentTemplateModal) {
                ModalUtils.hide(window.currentTemplateModal);
            }

            window.confirmModal = ModalUtils.show('ç¡®è®¤æ“ä½œ', confirmContent, 'medium');
        }

        function confirmApplyTemplate(templateKey) {
            const template = monthTemplates[templateKey];
            
            // åº”ç”¨æ¨¡æ¿æ•°æ®
            document.getElementById('month_goals').value = template.data.goals;
            document.getElementById('month_learning').value = template.data.learning;
            document.getElementById('month_reflection').value = template.data.reflection;
            document.getElementById('next_month_preview').value = template.data.nextMonthPreview;
            
            // åº”ç”¨å¾…åŠäº‹é¡¹æ¨¡æ¿
            applyTodoTemplate('month_milestones', template.data.milestones);
            applyTodoTemplate('month_habits', template.data.habits);
            
            // å…³é—­ç¡®è®¤å¯¹è¯æ¡†
            if (window.confirmModal) {
                ModalUtils.hide(window.confirmModal);
            }
            
            MessageUtils.success(`${template.name} æ¨¡æ¿å·²åº”ç”¨æˆåŠŸï¼`);
        }

        function applyTodoTemplate(containerId, todoContent) {
            const container = document.getElementById(containerId);
            if (container && todoContent) {
                container.textContent = todoContent;
                TodoUtils.renderTodos(container);
            }
        }

        function showTemplatePreview() {
            MessageUtils.info('æ¨¡æ¿é¢„è§ˆåŠŸèƒ½å³å°†æ¨å‡ºï¼Œæ•¬è¯·æœŸå¾…ï¼');
        }

        function closeTemplateModal() {
            if (window.currentTemplateModal) {
                ModalUtils.hide(window.currentTemplateModal);
            }
        }

        function closeConfirmModal() {
            if (window.confirmModal) {
                ModalUtils.hide(window.confirmModal);
            }
        }

        // æœˆåº¦ä»»åŠ¡ç»“è½¬åŠŸèƒ½
        function carryOverMonthTasks() {
            try {
                console.log('ğŸ”„ å¼€å§‹æ‰§è¡Œæœˆåº¦ä»»åŠ¡ç»“è½¬...');
                
                // è·å–å½“å‰æœˆçš„æ‰€æœ‰æœªå®Œæˆä»»åŠ¡
                const incompleteTasks = [];
                
                // æ£€æŸ¥é‡Œç¨‹ç¢‘ä»»åŠ¡
                const milestoneContainer = document.getElementById('month_milestones');
                console.log('ğŸ” æ£€æŸ¥é‡Œç¨‹ç¢‘å®¹å™¨:', milestoneContainer);
                if (milestoneContainer) {
                    const milestoneTasks = milestoneContainer.querySelectorAll('.task-item');
                    console.log('ğŸ“‹ æ‰¾åˆ°é‡Œç¨‹ç¢‘ä»»åŠ¡æ•°é‡:', milestoneTasks.length);
                    
                    milestoneTasks.forEach((task, index) => {
                        const checkbox = task.querySelector('.custom-checkbox');
                        const taskText = task.querySelector('.task-text');
                        
                        console.log(`ğŸ“ é‡Œç¨‹ç¢‘ä»»åŠ¡ ${index + 1}:`, {
                            hasCheckbox: !!checkbox,
                            hasTaskText: !!taskText,
                            checkboxClasses: checkbox ? Array.from(checkbox.classList) : null,
                            taskTextContent: taskText ? taskText.textContent : null
                        });
                        
                        if (checkbox && taskText) {
                            const text = taskText.textContent.trim();
                            const isCompleted = checkbox.classList.contains('checked');
                            
                            console.log(`âœ… ä»»åŠ¡è¯¦æƒ…: "${text}", å·²å®Œæˆ: ${isCompleted}`);
                            
                            if (!isCompleted && text) {
                                incompleteTasks.push({
                                    text: text,
                                    source: 'é‡è¦é‡Œç¨‹ç¢‘'
                                });
                                console.log(`â• æ·»åŠ æœªå®Œæˆä»»åŠ¡: "${text}"`);
                            }
                        }
                    });
                }
                
                // æ£€æŸ¥ä¹ æƒ¯åŸ¹å…»ä»»åŠ¡
                const habitContainer = document.getElementById('month_habits');
                console.log('ğŸ” æ£€æŸ¥ä¹ æƒ¯å®¹å™¨:', habitContainer);
                if (habitContainer) {
                    const habitTasks = habitContainer.querySelectorAll('.task-item');
                    console.log('ğŸ“‹ æ‰¾åˆ°ä¹ æƒ¯ä»»åŠ¡æ•°é‡:', habitTasks.length);
                    
                    habitTasks.forEach((task, index) => {
                        const checkbox = task.querySelector('.custom-checkbox');
                        const taskText = task.querySelector('.task-text');
                        
                        console.log(`ğŸ“ ä¹ æƒ¯ä»»åŠ¡ ${index + 1}:`, {
                            hasCheckbox: !!checkbox,
                            hasTaskText: !!taskText,
                            checkboxClasses: checkbox ? Array.from(checkbox.classList) : null,
                            taskTextContent: taskText ? taskText.textContent : null
                        });
                        
                        if (checkbox && taskText) {
                            const text = taskText.textContent.trim();
                            const isCompleted = checkbox.classList.contains('checked');
                            
                            console.log(`âœ… ä»»åŠ¡è¯¦æƒ…: "${text}", å·²å®Œæˆ: ${isCompleted}`);
                            
                            if (!isCompleted && text) {
                                incompleteTasks.push({
                                    text: text,
                                    source: 'ä¹ æƒ¯åŸ¹å…»'
                                });
                                console.log(`â• æ·»åŠ æœªå®Œæˆä»»åŠ¡: "${text}"`);
                            }
                        }
                    });
                }
                
                // å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ¸²æŸ“çš„ä»»åŠ¡é¡¹ï¼Œæ£€æŸ¥å®¹å™¨çš„åŸå§‹æ–‡æœ¬å†…å®¹
                if (incompleteTasks.length === 0) {
                    console.log('ğŸ” æ²¡æœ‰æ‰¾åˆ°æ¸²æŸ“çš„ä»»åŠ¡é¡¹ï¼Œæ£€æŸ¥å®¹å™¨åŸå§‹å†…å®¹...');
                    
                    // æ£€æŸ¥é‡Œç¨‹ç¢‘å®¹å™¨çš„åŸå§‹å†…å®¹
                    if (milestoneContainer && milestoneContainer.textContent.trim()) {
                        const milestoneText = milestoneContainer.textContent.trim();
                        console.log('ğŸ“ é‡Œç¨‹ç¢‘åŸå§‹å†…å®¹:', milestoneText);
                        
                        const milestoneLines = milestoneText.split('\n').filter(line => line.trim());
                        milestoneLines.forEach(line => {
                            if (line.match(/^\[\s\]/)) {  // æœªå®Œæˆçš„ä»»åŠ¡
                                const text = line.replace(/^\[\s\]\s*/, '').trim();
                                if (text) {
                                    incompleteTasks.push({
                                        text: text,
                                        source: 'é‡è¦é‡Œç¨‹ç¢‘'
                                    });
                                    console.log(`â• ä»åŸå§‹å†…å®¹æ·»åŠ é‡Œç¨‹ç¢‘ä»»åŠ¡: "${text}"`);
                                }
                            }
                        });
                    }
                    
                    // æ£€æŸ¥ä¹ æƒ¯å®¹å™¨çš„åŸå§‹å†…å®¹
                    if (habitContainer && habitContainer.textContent.trim()) {
                        const habitText = habitContainer.textContent.trim();
                        console.log('ğŸ“ ä¹ æƒ¯åŸå§‹å†…å®¹:', habitText);
                        
                        const habitLines = habitText.split('\n').filter(line => line.trim());
                        habitLines.forEach(line => {
                            if (line.match(/^\[\s\]/)) {  // æœªå®Œæˆçš„ä»»åŠ¡
                                const text = line.replace(/^\[\s\]\s*/, '').trim();
                                if (text) {
                                    incompleteTasks.push({
                                        text: text,
                                        source: 'ä¹ æƒ¯åŸ¹å…»'
                                    });
                                    console.log(`â• ä»åŸå§‹å†…å®¹æ·»åŠ ä¹ æƒ¯ä»»åŠ¡: "${text}"`);
                                }
                            }
                        });
                    }
                }
                
                console.log('ğŸ“‹ æœ€ç»ˆæ‰¾åˆ°æœªå®Œæˆä»»åŠ¡æ•°é‡:', incompleteTasks.length);
                console.log('ğŸ“‹ æœªå®Œæˆä»»åŠ¡è¯¦æƒ…:', incompleteTasks);
                
                if (incompleteTasks.length === 0) {
                    MessageUtils.success('æ­å–œï¼æœ¬æœˆæ‰€æœ‰ä»»åŠ¡éƒ½å·²å®Œæˆï¼Œæ— éœ€ç»“è½¬ä»»åŠ¡ï¼ğŸ‰');
                    return;
                }
                
                // ç”Ÿæˆç»“è½¬ä»»åŠ¡çš„æ–‡æœ¬
                let carryOverText = 'ğŸ“‹ ä»æœ¬æœˆç»“è½¬çš„æœªå®Œæˆä»»åŠ¡ï¼š\n\n';
                
                // æŒ‰æ¥æºåˆ†ç»„
                const tasksBySource = {};
                incompleteTasks.forEach(task => {
                    if (!tasksBySource[task.source]) {
                        tasksBySource[task.source] = [];
                    }
                    tasksBySource[task.source].push(task.text);
                });
                
                // ç”Ÿæˆç»“è½¬æ–‡æœ¬
                Object.keys(tasksBySource).forEach(source => {
                    carryOverText += `${source}çš„æœªå®Œæˆä»»åŠ¡ï¼š\n`;
                    tasksBySource[source].forEach(task => {
                        carryOverText += `[ ] ${task}\n`;
                    });
                    carryOverText += '\n';
                });
                
                carryOverText += 'ğŸ’¡ ä¸‹æœˆå»ºè®®ï¼š\n';
                carryOverText += 'â€¢ é‡æ–°è¯„ä¼°ä»»åŠ¡ä¼˜å…ˆçº§å’Œéš¾åº¦\n';
                carryOverText += 'â€¢ è€ƒè™‘å°†å¤§ä»»åŠ¡åˆ†è§£ä¸ºå°æ­¥éª¤\n';
                carryOverText += 'â€¢ åˆç†å®‰æ’ä¸‹æœˆçš„æ—¶é—´åˆ†é…\n';
                carryOverText += 'â€¢ æ€»ç»“æœ¬æœˆæ‰§è¡Œä¸­çš„ç»éªŒæ•™è®­\n';
                
                // å°†ç»“è½¬çš„ä»»åŠ¡æ·»åŠ åˆ°"ä¸‹æœˆé¢„è§ˆ"åŒºåŸŸ
                const nextMonthPreview = document.getElementById('next_month_preview');
                if (nextMonthPreview) {
                    const currentContent = nextMonthPreview.value || '';
                    let newContent = carryOverText;
                    
                    if (currentContent.trim()) {
                        newContent = carryOverText + '\n' + 'â”€'.repeat(50) + '\n\n' + currentContent;
                    }
                    
                    nextMonthPreview.value = newContent;
                    
                    // è§¦å‘è‡ªåŠ¨ä¿å­˜
                    const inputEvent = new Event('input', { bubbles: true });
                    nextMonthPreview.dispatchEvent(inputEvent);
                }
                
                // æ»šåŠ¨åˆ°ä¸‹æœˆé¢„è§ˆåŒºåŸŸ
                if (nextMonthPreview) {
                    nextMonthPreview.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center' 
                    });
                    
                    // çŸ­æš‚é«˜äº®æ˜¾ç¤º
                    nextMonthPreview.style.backgroundColor = 'rgba(255, 235, 59, 0.2)';
                    setTimeout(() => {
                        nextMonthPreview.style.backgroundColor = '';
                    }, 2000);
                }
                
                console.log('âœ… æœˆåº¦ä»»åŠ¡ç»“è½¬å®Œæˆ');
                MessageUtils.success(`æˆåŠŸç»“è½¬ ${incompleteTasks.length} ä¸ªæœªå®Œæˆä»»åŠ¡åˆ°ä¸‹æœˆé¢„è§ˆï¼`);
                
                // æ˜¾ç¤ºè¯¦ç»†çš„ç»“è½¬æ‘˜è¦
                setTimeout(() => {
                    const summary = Object.keys(tasksBySource).map(source => 
                        `${source}: ${tasksBySource[source].length}ä¸ªä»»åŠ¡`
                    ).join(', ');
                    
                    MessageUtils.info(`ç»“è½¬è¯¦æƒ…: ${summary}`);
                }, 1500);
                
            } catch (error) {
                console.error('âŒ æœˆåº¦ä»»åŠ¡ç»“è½¬æ—¶å‡ºé”™:', error);
                MessageUtils.error('ç»“è½¬ä»»åŠ¡å¤±è´¥ï¼Œè¯·é‡è¯•');
            }
        }
    </script>
    
    <!-- åŒæ­¥æœåŠ¡ -->
    <script src="sync-service.js"></script>
    <script src="sync-providers.js"></script>
    <!-- é€šç”¨è‡ªåŠ¨åŒæ­¥åŠŸèƒ½ -->
    <script src="universal-auto-sync.js"></script>
    <!-- å…¨è‡ªåŠ¨åå°åŒæ­¥ -->
    <script src="auto-background-sync.js"></script>
    <script src="add-ai-to-all-pages.js"></script>
</body>

</html>

